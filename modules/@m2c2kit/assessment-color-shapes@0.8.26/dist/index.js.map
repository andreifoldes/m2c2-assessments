{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  Game,\n  Action,\n  Scene,\n  Shape,\n  Label,\n  Transition,\n  TransitionDirection,\n  WebColors,\n  RandomDraws,\n  GameParameters,\n  GameOptions,\n  TrialSchema,\n  Timer,\n  Easings,\n  RgbaColor,\n  Sprite,\n  Constants,\n  Translation,\n} from \"@m2c2kit/core\";\nimport {\n  Button,\n  Grid,\n  Instructions,\n  CountdownScene,\n  InstructionsOptions,\n  LocalePicker,\n} from \"@m2c2kit/addons\";\n\n/**\n * Color Shapes is a visual array change detection task, measuring intra-item\n * feature binding, where participants determine if shapes change color across\n * two sequential presentations of shape stimuli.\n */\nclass ColorShapes extends Game {\n  constructor() {\n    /**\n     * These are configurable game parameters and their defaults.\n     * Each game parameter should have a type, default (this is the default\n     * value), and a description.\n     */\n    const defaultParameters: GameParameters = {\n      fixation_duration_ms: {\n        default: 500,\n        description: \"How long fixation scene is shown, milliseconds.\",\n        type: \"number\",\n      },\n      shape_colors: {\n        type: \"array\",\n        description: \"Array of colors for shapes.\",\n        items: {\n          type: \"object\",\n          properties: {\n            colorName: {\n              type: \"string\",\n              description: \"Human-friendly name of color.\",\n            },\n            rgbaColor: {\n              type: \"array\",\n              description: \"Color as array, [r,g,b,a].\",\n              items: {\n                type: \"number\",\n              },\n            },\n          },\n        },\n        default: [\n          { colorName: \"black\", rgbaColor: [0, 0, 0, 1] },\n          { colorName: \"green\", rgbaColor: [0, 158, 115, 1] },\n          { colorName: \"yellow\", rgbaColor: [240, 228, 66, 1] },\n          { colorName: \"blue\", rgbaColor: [0, 114, 178, 1] },\n          { colorName: \"orange\", rgbaColor: [213, 94, 0, 1] },\n          { colorName: \"pink\", rgbaColor: [204, 121, 167, 1] },\n        ],\n      },\n      number_of_shapes_shown: {\n        default: 3,\n        description: \"How many shapes to show on the grid at one time.\",\n        type: \"integer\",\n      },\n      number_of_shapes_changing_color: {\n        default: 2,\n        description:\n          \"If a different color trial, how many shapes should change color (minimum is 2, because changes are swaps with other shapes).\",\n        type: \"integer\",\n      },\n      shapes_presented_duration_ms: {\n        default: 2000,\n        description: \"How long the shapes are shown, milliseconds.\",\n        type: \"number\",\n      },\n      shapes_removed_duration_ms: {\n        default: 1000,\n        description:\n          \"How long to show a blank square after shapes are removed, milliseconds.\",\n        type: \"number\",\n      },\n      cells_per_side: {\n        default: 3,\n        description:\n          \"How many cell positions for each side of the square grid (e.g., 3 is a 3x3 grid; 4 is a 4x4 grid).\",\n        type: \"integer\",\n      },\n      number_of_different_colors_trials: {\n        default: 2,\n        type: \"integer\",\n        description: \"Number of trials where the shapes have different colors.\",\n      },\n      number_of_trials: {\n        default: 4,\n        description: \"How many trials to run.\",\n        type: \"integer\",\n      },\n      show_trials_complete_scene: {\n        default: true,\n        type: \"boolean\",\n        description:\n          \"After the final trial, should a completion scene be shown? Otherwise, the game will immediately end.\",\n      },\n      instruction_type: {\n        default: \"long\",\n        description: \"Type of instructions to show, 'short' or 'long'.\",\n        type: \"string\",\n        enum: [\"short\", \"long\"],\n      },\n      instructions: {\n        default: null,\n        type: [\"object\", \"null\"],\n        description:\n          \"When non-null, an InstructionsOptions object that will completely override the built-in instructions.\",\n      },\n      show_quit_button: {\n        type: \"boolean\",\n        default: false,\n        description: \"Should the activity quit button be shown?\",\n      },\n      show_fps: {\n        type: \"boolean\",\n        default: false,\n        description: \"Should the FPS be shown?\",\n      },\n      show_locale_picker: {\n        type: \"boolean\",\n        default: false,\n        description:\n          \"Should the icon that allows the participant to switch the locale be shown?\",\n      },\n    };\n\n    /**\n     * This describes all the data that will be generated by the assessment.\n     * At runtime, when a trial completes, the data will be returned to the\n     * session with a callback, along with this schema transformed into\n     * JSON Schema.\n     */\n    const colorShapesTrialSchema: TrialSchema = {\n      activity_begin_iso8601_timestamp: {\n        type: \"string\",\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the game activity.\",\n      },\n      trial_begin_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the trial. Null if trial was skipped.\",\n      },\n      trial_end_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the end of the trial (when user presses 'Same' or 'Different'). Null if trial was skipped.\",\n      },\n      trial_index: {\n        type: [\"integer\", \"null\"],\n        description: \"Index of the trial within this assessment, 0-based.\",\n      },\n      present_shapes: {\n        description:\n          \"Configuration of shapes shown to the user in the presentation phase. Null if trial was skipped.\",\n        type: [\"array\", \"null\"],\n        items: {\n          type: \"object\",\n          properties: {\n            shape_index: {\n              type: \"integer\",\n              description:\n                \"Index of the shape within the library of shapes, 0-based\",\n            },\n            color_name: {\n              type: \"string\",\n              description: \"Human-friendly name of color.\",\n            },\n            rgba_color: {\n              type: \"array\",\n              description: \"Color as array, [r,g,b,a].\",\n              items: {\n                type: \"number\",\n              },\n            },\n            location: {\n              type: \"object\",\n              description: \"Location of shape.\",\n              properties: {\n                row: {\n                  type: \"number\",\n                  description: \"Row of the shape, 0-based.\",\n                },\n                column: {\n                  type: \"number\",\n                  description: \"Column of the shape, 0-based.\",\n                },\n              },\n            },\n          },\n        },\n      },\n      response_shapes: {\n        description:\n          \"Configuration of shapes shown to the user in the response phase. Null if trial was skipped.\",\n        type: [\"array\", \"null\"],\n        items: {\n          type: \"object\",\n          properties: {\n            shape_index: {\n              type: \"integer\",\n              description:\n                \"Index of the shape within the library of shapes, 0-based\",\n            },\n            color_name: {\n              type: \"string\",\n              description: \"Human-friendly name of color.\",\n            },\n            rgba_color: {\n              type: \"array\",\n              description: \"Color as array, [r,g,b,a].\",\n              items: {\n                type: \"number\",\n              },\n            },\n            location: {\n              type: \"object\",\n              description: \"Location of shape.\",\n              properties: {\n                row: {\n                  type: \"number\",\n                  description: \"Row of the shape, 0-based.\",\n                },\n                column: {\n                  type: \"number\",\n                  description: \"Column of the shape, 0-based.\",\n                },\n              },\n            },\n          },\n        },\n      },\n      response_time_duration_ms: {\n        type: [\"number\", \"null\"],\n        description:\n          \"Milliseconds from when the response configuration of shapes is shown until the user taps a response. Null if trial was skipped.\",\n      },\n      user_response: {\n        type: [\"string\", \"null\"],\n        enum: [\"same\", \"different\"],\n        description:\n          \"User's response to whether the shapes are same colors or different.\",\n      },\n      user_response_correct: {\n        type: [\"boolean\", \"null\"],\n        description: \"Was the user's response correct?\",\n      },\n      quit_button_pressed: {\n        type: \"boolean\",\n        description: \"Was the quit button pressed?\",\n      },\n    };\n\n    const translation: Translation = {\n      configuration: {\n        baseLocale: \"en-US\",\n      },\n      \"en-US\": {\n        localeName: \"English\",\n        INSTRUCTIONS_TITLE: \"Color Shapes\",\n        SHORT_INSTRUCTIONS_TEXT_PAGE_1:\n          \"Try to remember the color of 3 shapes, because they will soon disappear. When the shapes reappear, answer whether they have the SAME or DIFFERENT colors as they had before\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"Try to remember the color of 3 shapes, because they will soon disappear.\",\n        INSTRUCTIONS_TEXT_PAGE_2: \"Next you will see the same shapes reappear.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Answer whether the shapes have the SAME or DIFFERENT colors as they had before.\",\n        START_BUTTON_TEXT: \"START\",\n        NEXT_BUTTON_TEXT: \"Next\",\n        BACK_BUTTON_TEXT: \"Back\",\n        GET_READY_COUNTDOWN_TEXT: \"GET READY!\",\n        SAME_BUTTON_TEXT: \"Same\",\n        DIFFERENT_BUTTON_TEXT: \"Different\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"This activity is complete.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      // cSpell:disable (for VS Code extension, Code Spell Checker)\n      \"es-MX\": {\n        localeName: \"Español\",\n        INSTRUCTIONS_TITLE: \"Formas de Color\",\n        // Short instructions need to be translated.\n        // SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"Intenta recordar el color de las 3 formas, porque pronto desaparecerán.\",\n        INSTRUCTIONS_TEXT_PAGE_2: \"Luego verás reaparecer las mismas formas.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Responde si las formas tienen el MISMO o DIFERENTE color que antes.\",\n        START_BUTTON_TEXT: \"COMENZAR\",\n        NEXT_BUTTON_TEXT: \"Siguiente\",\n        BACK_BUTTON_TEXT: \"Atrás\",\n        GET_READY_COUNTDOWN_TEXT: \"PREPÁRESE\",\n        SAME_BUTTON_TEXT: \"Mismo\",\n        DIFFERENT_BUTTON_TEXT: \"Diferente\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Esta actividad está completa.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      \"de-DE\": {\n        localeName: \"Deutsch\",\n        INSTRUCTIONS_TITLE: \"Farb-Formen\",\n        // Short instructions need to be translated.\n        // SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1: \"Oben und unten sehen Sie Symbolpaare.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"Ihre Aufgabe wird es sein, auf dasjenige untere Paar zu tippen, welches mit einem der obigen Paare exakt übereinstimmt.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Versuchen Sie bitte, so schnell und korrekt wie möglich zu sein.\",\n        START_BUTTON_TEXT: \"START\",\n        NEXT_BUTTON_TEXT: \"Weiter\",\n        BACK_BUTTON_TEXT: \"Vorherige\",\n        GET_READY_COUNTDOWN_TEXT: \"BEREIT MACHEN\",\n        SAME_BUTTON_TEXT: \"Gleich\",\n        DIFFERENT_BUTTON_TEXT: \"Unterschiedlich\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Die Aufgabe ist beendet.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      // cSpell:enable\n    };\n\n    const options: GameOptions = {\n      name: \"Color Shapes\",\n      /**\n       * This id must match the property m2c2kit.assessmentId in package.json\n       */\n      id: \"color-shapes\",\n      publishUuid: \"394cb010-2ccf-4a87-9d23-cda7fb07a960\",\n      version: \"__PACKAGE_JSON_VERSION__\",\n      moduleMetadata: Constants.MODULE_METADATA_PLACEHOLDER,\n      translation: translation,\n      shortDescription:\n        \"Color Shapes is a visual array change detection \\\ntask, measuring intra-item feature binding, where participants determine \\\nif shapes change color across two sequential presentations of shape \\\nstimuli.\",\n      longDescription: `Color Shapes is a change detection paradigm used \\\nto measure visual short-term memory binding (Parra et al., 2009). \\\nParticipants are asked to memorize the shapes and colors of three different \\\npolygons for 3 seconds. The three polygons are then removed from the screen \\\nand re-displayed at different locations, either having the same or different \\\ncolors. Participants are then asked to decide whether the combination of \\\ncolors and shapes are the \"Same\" or \"Different\" between the study and test \\\nphases.`,\n      showFps: defaultParameters.show_fps.default,\n      width: 400,\n      height: 800,\n      trialSchema: colorShapesTrialSchema,\n      parameters: defaultParameters,\n      fonts: [\n        {\n          fontName: \"roboto\",\n          url: \"fonts/roboto/Roboto-Regular.ttf\",\n        },\n      ],\n      images: [\n        {\n          imageName: \"instructions-1\",\n          height: 256,\n          width: 256,\n          url: \"images/cs-instructions-1.png\",\n        },\n        {\n          imageName: \"instructions-2\",\n          height: 256,\n          width: 256,\n          url: \"images/cs-instructions-2.png\",\n        },\n        {\n          imageName: \"instructions-3\",\n          height: 350,\n          width: 300,\n          url: \"images/cs-instructions-3.png\",\n          localize: true,\n        },\n        {\n          imageName: \"circle-x\",\n          height: 32,\n          width: 32,\n          // the svg is from evericons and is licensed under CC0 1.0\n          // Universal (Public Domain). see https://www.patreon.com/evericons\n          url: \"images/circle-x.svg\",\n        },\n      ],\n    };\n\n    super(options);\n  }\n\n  override async initialize() {\n    await super.initialize();\n    // just for convenience, alias the variable game to \"this\"\n    // (even though eslint doesn't like it)\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const game = this;\n\n    const SHAPE_SVG_HEIGHT = 96;\n    const SQUARE_SIDE_LENGTH = 350;\n    const numberOfShapesShown = game.getParameter<number>(\n      \"number_of_shapes_shown\",\n    );\n    const shapeLibrary = this.makeShapes(SHAPE_SVG_HEIGHT);\n\n    // ==============================================================\n\n    if (game.getParameter<boolean>(\"show_quit_button\")) {\n      const quitSprite = new Sprite({\n        imageName: \"circle-x\",\n        position: { x: 380, y: 20 },\n        isUserInteractionEnabled: true,\n      });\n      game.addFreeNode(quitSprite);\n      quitSprite.onTapDown((e) => {\n        game.removeAllFreeNodes();\n        e.handled = true;\n        const blankScene = new Scene();\n        game.addScene(blankScene);\n        game.presentScene(blankScene);\n        game.addTrialData(\"quit_button_pressed\", true);\n        game.trialComplete();\n        game.cancel();\n      });\n    }\n\n    let localePicker: LocalePicker;\n    if (game.getParameter<boolean>(\"show_locale_picker\")) {\n      localePicker = new LocalePicker();\n      game.addFreeNode(localePicker);\n    }\n\n    // ==============================================================\n    // SCENES: instructions\n    let instructionsScenes: Array<Scene>;\n\n    const customInstructions = game.getParameter<InstructionsOptions | null>(\n      \"instructions\",\n    );\n    if (customInstructions) {\n      instructionsScenes = Instructions.create(customInstructions);\n    } else {\n      switch (game.getParameter(\"instruction_type\")) {\n        case \"short\": {\n          instructionsScenes = Instructions.create({\n            instructionScenes: [\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"SHORT_INSTRUCTIONS_TEXT_PAGE_1\",\n                imageName: \"instructions-1\",\n                imageAboveText: false,\n                imageMarginTop: 32,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.2,\n                nextButtonText: \"START_BUTTON_TEXT\",\n                nextButtonBackgroundColor: WebColors.Green,\n                nextSceneTransition: Transition.none(),\n              },\n            ],\n          });\n          break;\n        }\n        case \"long\": {\n          instructionsScenes = Instructions.create({\n            instructionScenes: [\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_1\",\n                imageName: \"instructions-1\",\n                imageAboveText: false,\n                imageMarginTop: 32,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.2,\n                nextButtonText: \"NEXT_BUTTON_TEXT\",\n                backButtonText: \"BACK_BUTTON_TEXT\",\n              },\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_2\",\n                imageName: \"instructions-2\",\n                imageAboveText: false,\n                imageMarginTop: 32,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.2,\n                nextButtonText: \"NEXT_BUTTON_TEXT\",\n                backButtonText: \"BACK_BUTTON_TEXT\",\n              },\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_3\",\n                imageName: \"instructions-3\",\n                imageAboveText: false,\n                imageMarginTop: 32,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.2,\n                nextButtonText: \"START_BUTTON_TEXT\",\n                nextButtonBackgroundColor: WebColors.Green,\n                backButtonText: \"BACK_BUTTON_TEXT\",\n              },\n            ],\n          });\n          break;\n        }\n        default: {\n          throw new Error(\"invalid value for instruction_type\");\n        }\n      }\n    }\n    instructionsScenes[0].onAppear(() => {\n      // in case user quits before starting a trial, record the\n      // timestamp\n      game.addTrialData(\n        \"activity_begin_iso8601_timestamp\",\n        this.beginIso8601Timestamp,\n      );\n    });\n    game.addScenes(instructionsScenes);\n\n    // ==============================================================\n    // SCENE: countdown. Show 3 second countdown.\n    const countdownScene = new CountdownScene({\n      milliseconds: 3000,\n      text: \"GET_READY_COUNTDOWN_TEXT\",\n      zeroDwellMilliseconds: 1000,\n      transition: Transition.none(),\n    });\n    game.addScene(countdownScene);\n\n    const gridRows = game.getParameter<number>(\"cells_per_side\");\n    const gridColumns = game.getParameter<number>(\"cells_per_side\");\n    const numberOfTrials = game.getParameter<number>(\"number_of_trials\");\n    const shapeColors =\n      game.getParameter<Array<{ colorName: string; rgbaColor: RgbaColor }>>(\n        \"shape_colors\",\n      );\n\n    interface DisplayShape {\n      shape: Shape;\n      shapeIndex: number;\n      color: RgbaColor;\n      colorName: string;\n      location: {\n        row: number;\n        column: number;\n      };\n    }\n\n    interface TrialConfiguration {\n      presentShapes: Array<DisplayShape>;\n      responseShapes: Array<DisplayShape>;\n      numberOfShapesWithDifferentColors: number;\n    }\n\n    const trialConfigurations: Array<TrialConfiguration> = [];\n    const rows = game.getParameter<number>(\"cells_per_side\");\n    const columns = rows;\n    const numberOfDifferentColorsTrials = game.getParameter<number>(\n      \"number_of_different_colors_trials\",\n    );\n    const differentColorsTrialIndexes = RandomDraws.FromRangeWithoutReplacement(\n      numberOfDifferentColorsTrials,\n      0,\n      numberOfTrials - 1,\n    );\n\n    for (let i = 0; i < numberOfTrials; i++) {\n      const presentShapes = new Array<DisplayShape>();\n      const responseShapes = new Array<DisplayShape>();\n      const shapesToShowIndexes = RandomDraws.FromRangeWithoutReplacement(\n        numberOfShapesShown,\n        0,\n        shapeLibrary.length - 1,\n      );\n      const shapeColorsIndexes = RandomDraws.FromRangeWithoutReplacement(\n        numberOfShapesShown,\n        0,\n        shapeColors.length - 1,\n      );\n\n      // do not allow shapes to be in the same row or column\n      // or along the diagonal\n      const onDiagonal = (\n        locations: {\n          row: number;\n          column: number;\n        }[],\n      ): boolean => {\n        if (\n          locations\n            .map((c) => c.row === 0 && c.column === 0)\n            .some((e) => e === true) &&\n          locations\n            .map((c) => c.row === 1 && c.column === 1)\n            .some((e) => e === true) &&\n          locations\n            .map((c) => c.row === 2 && c.column === 2)\n            .some((e) => e === true)\n        ) {\n          return true;\n        }\n        if (\n          locations\n            .map((c) => c.row === 2 && c.column === 0)\n            .some((e) => e === true) &&\n          locations\n            .map((c) => c.row === 1 && c.column === 1)\n            .some((e) => e === true) &&\n          locations\n            .map((c) => c.row === 0 && c.column === 2)\n            .some((e) => e === true)\n        ) {\n          return true;\n        }\n        return false;\n      };\n\n      const inLine = (\n        locations: {\n          row: number;\n          column: number;\n        }[],\n      ): boolean => {\n        const uniqueRows = new Set(locations.map((l) => l.row)).size;\n        const uniqueColumns = new Set(locations.map((l) => l.column)).size;\n\n        if (uniqueRows !== 1 && uniqueColumns !== 1) {\n          return false;\n        }\n        return true;\n      };\n\n      // assign present shapes' locations and colors\n      let presentLocationsOk = false;\n      let presentLocations: {\n        row: number;\n        column: number;\n      }[];\n      do {\n        presentLocations = RandomDraws.FromGridWithoutReplacement(\n          numberOfShapesShown,\n          rows,\n          columns,\n        );\n\n        if (!inLine(presentLocations) && !onDiagonal(presentLocations)) {\n          presentLocationsOk = true;\n        } else {\n          presentLocationsOk = false;\n        }\n      } while (!presentLocationsOk);\n      for (let j = 0; j < numberOfShapesShown; j++) {\n        const presentShape: DisplayShape = {\n          shape: shapeLibrary[shapesToShowIndexes[j]],\n          shapeIndex: shapesToShowIndexes[j],\n          color: shapeColors[shapeColorsIndexes[j]].rgbaColor,\n          colorName: shapeColors[shapeColorsIndexes[j]].colorName,\n          location: presentLocations[j],\n        };\n        presentShapes.push(presentShape);\n      }\n\n      // assign response shapes' locations\n      let responseLocationsOk = false;\n      let responseLocations: {\n        row: number;\n        column: number;\n      }[];\n      do {\n        responseLocations = RandomDraws.FromGridWithoutReplacement(\n          numberOfShapesShown,\n          rows,\n          columns,\n        );\n\n        if (!inLine(responseLocations) && !onDiagonal(responseLocations)) {\n          responseLocationsOk = true;\n        } else {\n          responseLocationsOk = false;\n        }\n      } while (!responseLocationsOk);\n      for (let j = 0; j < numberOfShapesShown; j++) {\n        const responseShape: DisplayShape = {\n          shape: presentShapes[j].shape,\n          shapeIndex: shapesToShowIndexes[j],\n          color: presentShapes[j].color,\n          colorName: shapeColors[shapeColorsIndexes[j]].colorName,\n          location: responseLocations[j],\n        };\n        responseShapes.push(responseShape);\n      }\n\n      let numberOfShapesWithDifferentColors = 0;\n      const differentColorTrial = differentColorsTrialIndexes.includes(i);\n\n      if (differentColorTrial) {\n        const numberOfShapesToChange = game.getParameter<number>(\n          \"number_of_shapes_changing_color\",\n        );\n        if (numberOfShapesToChange > numberOfShapesShown) {\n          throw new Error(\n            `number_of_shapes_changing_color is ${numberOfShapesToChange}, but it must be less than or equal to number_of_shapes_shown (which is ${numberOfShapesShown}).`,\n          );\n        }\n        const shapesToChangeIndexes = RandomDraws.FromRangeWithoutReplacement(\n          numberOfShapesToChange,\n          0,\n          numberOfShapesShown - 1,\n        );\n        const shapesToChange = shapesToChangeIndexes.map(\n          (index) => responseShapes[index],\n        );\n        numberOfShapesWithDifferentColors = shapesToChange.length;\n\n        /**\n         * rotate each shape's color to the next one. The last shape\n         * gets the first shape's color\n         */\n        const firstShapeColor = shapesToChange[0].color;\n        for (let j = 0; j < numberOfShapesToChange; j++) {\n          const shape = shapesToChange[j];\n          if (j + 1 < numberOfShapesToChange) {\n            shape.color = shapesToChange[j + 1].color;\n          } else {\n            shape.color = firstShapeColor;\n          }\n        }\n      }\n\n      trialConfigurations.push({\n        presentShapes: presentShapes,\n        responseShapes: responseShapes,\n        numberOfShapesWithDifferentColors: numberOfShapesWithDifferentColors,\n      });\n    }\n\n    // ==============================================================\n    // SCENE: fixation. Show get ready message, then advance after XXXX\n    // milliseconds (as defined in fixation_duration_ms parameter)\n    const fixationScene = new Scene();\n    game.addScene(fixationScene);\n\n    const fixationSceneSquare = new Shape({\n      rect: { size: { width: SQUARE_SIDE_LENGTH, height: SQUARE_SIDE_LENGTH } },\n      fillColor: WebColors.Transparent,\n      strokeColor: WebColors.Gray,\n      lineWidth: 4,\n      position: { x: 200, y: 300 },\n    });\n    fixationScene.addChild(fixationSceneSquare);\n\n    const plusLabel = new Label({\n      text: \"+\",\n      fontSize: 32,\n      fontColor: WebColors.Black,\n      localize: false,\n    });\n    fixationSceneSquare.addChild(plusLabel);\n\n    fixationScene.onAppear(() => {\n      game.addTrialData(\n        \"activity_begin_iso8601_timestamp\",\n        this.beginIso8601Timestamp,\n      );\n      game.addTrialData(\n        \"trial_begin_iso8601_timestamp\",\n        new Date().toISOString(),\n      );\n      fixationScene.run(\n        Action.sequence([\n          Action.wait({ duration: game.getParameter(\"fixation_duration_ms\") }),\n          Action.custom({\n            callback: () => {\n              game.presentScene(shapePresentationScene);\n            },\n          }),\n        ]),\n      );\n    });\n\n    // ==============================================================\n    // SCENE: Shape Presentation.\n    const shapePresentationScene = new Scene();\n    game.addScene(shapePresentationScene);\n\n    const presentationSceneSquare = new Shape({\n      rect: { size: { width: SQUARE_SIDE_LENGTH, height: SQUARE_SIDE_LENGTH } },\n      fillColor: WebColors.Transparent,\n      strokeColor: WebColors.Gray,\n      lineWidth: 4,\n      position: { x: 200, y: 300 },\n    });\n    shapePresentationScene.addChild(presentationSceneSquare);\n\n    const presentationGrid = new Grid({\n      rows: gridRows,\n      columns: gridColumns,\n      size: { width: SQUARE_SIDE_LENGTH, height: SQUARE_SIDE_LENGTH },\n      position: { x: 200, y: 300 },\n      backgroundColor: WebColors.Transparent,\n      gridLineColor: WebColors.Transparent,\n    });\n    shapePresentationScene.addChild(presentationGrid);\n\n    shapePresentationScene.onAppear(() => {\n      const trialConfiguration = trialConfigurations[game.trialIndex];\n      for (let i = 0; i < trialConfiguration.presentShapes.length; i++) {\n        const presentShape = trialConfiguration.presentShapes[i].shape;\n        presentShape.fillColor = trialConfiguration.presentShapes[i].color;\n        /**\n         * Because we are repositioning children of a grid, we need to\n         * set its position back to zero, because in the grid, it recalculates\n         * the position. If we don't do this, the shapes will be positioned\n         * incorrectly if they are positioned a second time.\n         */\n        presentShape.position = { x: 0, y: 0 };\n        presentationGrid.addAtCell(\n          presentShape,\n          trialConfiguration.presentShapes[i].location.row,\n          trialConfiguration.presentShapes[i].location.column,\n        );\n      }\n      shapePresentationScene.run(\n        Action.sequence([\n          Action.wait({\n            duration: game.getParameter(\"shapes_presented_duration_ms\"),\n          }),\n          Action.custom({\n            callback: () => {\n              presentationGrid.removeAllGridChildren();\n            },\n          }),\n          Action.wait({\n            duration: game.getParameter(\"shapes_removed_duration_ms\"),\n          }),\n          Action.custom({\n            callback: () => {\n              presentationGrid.removeAllGridChildren();\n              game.presentScene(shapeResponseScene);\n            },\n          }),\n        ]),\n      );\n    });\n\n    // ==============================================================\n    // SCENE: Shape Response.\n    const shapeResponseScene = new Scene();\n    game.addScene(shapeResponseScene);\n\n    const responseSceneSquare = new Shape({\n      rect: { size: { width: SQUARE_SIDE_LENGTH, height: SQUARE_SIDE_LENGTH } },\n      fillColor: WebColors.Transparent,\n      strokeColor: WebColors.Gray,\n      lineWidth: 4,\n      position: { x: 200, y: 300 },\n    });\n    shapeResponseScene.addChild(responseSceneSquare);\n\n    const responseGrid = new Grid({\n      rows: gridRows,\n      columns: gridColumns,\n      size: { width: SQUARE_SIDE_LENGTH, height: SQUARE_SIDE_LENGTH },\n      position: { x: 200, y: 300 },\n      backgroundColor: WebColors.Transparent,\n      gridLineColor: WebColors.Transparent,\n    });\n    shapeResponseScene.addChild(responseGrid);\n\n    shapeResponseScene.onAppear(() => {\n      const trialConfiguration = trialConfigurations[game.trialIndex];\n      for (let i = 0; i < trialConfiguration.responseShapes.length; i++) {\n        const responseShape = trialConfiguration.responseShapes[i].shape;\n        responseShape.fillColor = trialConfiguration.responseShapes[i].color;\n        /**\n         * Because we are repositioning children of a grid, we need to\n         * set its position back to zero, because in the grid, it recalculates\n         * the position. If we don't do this, the shapes will be positioned\n         * incorrectly if they are positioned a second time.\n         */\n        responseShape.position = { x: 0, y: 0 };\n        responseGrid.addAtCell(\n          responseShape,\n          trialConfiguration.responseShapes[i].location.row,\n          trialConfiguration.responseShapes[i].location.column,\n        );\n      }\n      sameButton.isUserInteractionEnabled = true;\n      differentButton.isUserInteractionEnabled = true;\n      Timer.startNew(\"rt\");\n    });\n\n    const sameButton = new Button({\n      text: \"SAME_BUTTON_TEXT\",\n      position: { x: 100, y: 700 },\n      size: { width: 150, height: 50 },\n    });\n    shapeResponseScene.addChild(sameButton);\n    sameButton.onTapDown(() => {\n      sameButton.isUserInteractionEnabled = false;\n      handleSelection(false);\n    });\n\n    const differentButton = new Button({\n      text: \"DIFFERENT_BUTTON_TEXT\",\n      position: { x: 300, y: 700 },\n      size: { width: 150, height: 50 },\n    });\n    shapeResponseScene.addChild(differentButton);\n    differentButton.onTapDown(() => {\n      differentButton.isUserInteractionEnabled = false;\n      handleSelection(true);\n    });\n\n    const handleSelection = (differentPressed: boolean) => {\n      const rt = Timer.elapsed(\"rt\");\n      Timer.remove(\"rt\");\n      responseGrid.removeAllGridChildren();\n\n      game.addTrialData(\n        \"trial_end_iso8601_timestamp\",\n        new Date().toISOString(),\n      );\n      const trialConfiguration = trialConfigurations[game.trialIndex];\n      game.addTrialData(\"response_time_duration_ms\", rt);\n      game.addTrialData(\n        \"user_response\",\n        differentPressed ? \"different\" : \"same\",\n      );\n      const correctResponse =\n        (trialConfiguration.numberOfShapesWithDifferentColors === 0 &&\n          !differentPressed) ||\n        (trialConfiguration.numberOfShapesWithDifferentColors > 0 &&\n          differentPressed);\n      game.addTrialData(\"user_response_correct\", correctResponse);\n\n      const presentShapes = trialConfiguration.presentShapes.map((p) => {\n        return {\n          shape_index: p.shapeIndex,\n          color_name: p.colorName,\n          rgba_color: p.color,\n          location: p.location,\n        };\n      });\n      game.addTrialData(\"present_shapes\", presentShapes);\n      game.addTrialData(\"quit_button_pressed\", false);\n\n      const responseShapes = trialConfiguration.responseShapes.map((p) => {\n        return {\n          shape_index: p.shapeIndex,\n          color_name: p.colorName,\n          rgba_color: p.color,\n          location: p.location,\n        };\n      });\n      game.addTrialData(\"response_shapes\", responseShapes);\n      game.addTrialData(\"trial_index\", game.trialIndex);\n\n      game.trialComplete();\n      if (game.trialIndex < numberOfTrials) {\n        game.presentScene(fixationScene);\n      } else {\n        game.presentScene(\n          doneScene,\n          Transition.slide({\n            direction: TransitionDirection.Left,\n            duration: 500,\n            easing: Easings.sinusoidalInOut,\n          }),\n        );\n      }\n    };\n\n    // ==============================================================\n    // SCENE: done. Show done message, with a button to exit.\n    const doneScene = new Scene();\n    game.addScene(doneScene);\n\n    const doneSceneText = new Label({\n      text: \"TRIALS_COMPLETE_SCENE_TEXT\",\n      position: { x: 200, y: 400 },\n    });\n    doneScene.addChild(doneSceneText);\n\n    const okButton = new Button({\n      text: \"TRIALS_COMPLETE_SCENE_BUTTON_TEXT\",\n      position: { x: 200, y: 650 },\n    });\n    okButton.isUserInteractionEnabled = true;\n    okButton.onTapDown(() => {\n      // don't allow repeat taps of ok button\n      okButton.isUserInteractionEnabled = false;\n      doneScene.removeAllChildren();\n      game.end();\n    });\n    doneScene.addChild(okButton);\n    doneScene.onSetup(() => {\n      // no need to have cancel button, because we're done\n      game.removeAllFreeNodes();\n    });\n  }\n\n  private makeShapes(svgHeight: number) {\n    const shape01 = new Shape({\n      path: {\n        pathString: shapePathStrings[0],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    const shape02 = new Shape({\n      path: {\n        pathString: shapePathStrings[1],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    // note: shape03 is purposively smaller (.8 height of other shapes)\n    const shape03 = new Shape({\n      path: {\n        pathString: shapePathStrings[2],\n        height: svgHeight * 0.8,\n      },\n      lineWidth: 0,\n    });\n\n    const shape04 = new Shape({\n      path: {\n        pathString: shapePathStrings[3],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    // note: shape05 is purposively smaller (.8 height of other shapes)\n    const shape05 = new Shape({\n      path: {\n        pathString: shapePathStrings[4],\n        height: svgHeight * 0.8,\n      },\n      lineWidth: 0,\n    });\n\n    const shape06 = new Shape({\n      path: {\n        pathString: shapePathStrings[5],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    const shape07 = new Shape({\n      path: {\n        pathString: shapePathStrings[6],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    const shape08 = new Shape({\n      path: {\n        pathString: shapePathStrings[7],\n        height: svgHeight,\n      },\n      lineWidth: 0,\n    });\n\n    const shapes = [\n      shape01,\n      shape02,\n      shape03,\n      shape04,\n      shape05,\n      shape06,\n      shape07,\n      shape08,\n    ];\n    return shapes;\n  }\n}\n\nconst shapePathStrings = [\n  \"M0 89.94v-2L131.95 0h2v88.7c2.34 1.6 4.47 3.11 6.65 4.55 42.77 28.22 85.54 56.42 128.3 84.63v2c-44.65 29.65-89.3 59.29-133.95 88.94h-1v-90.84C89.44 148.72 44.72 119.33 0 89.94Z\",\n  \"M162 188c-.33 27-.67 54-1 81-26.87-26.18-53.74-52.35-80-77.94V269H0C0 180.83 0 92.67.04 4.5.04 3 .67 1.5 1 0c24.64 29.1 49.15 58.31 73.96 87.26 28.88 33.7 58.01 67.17 87.04 100.74Z\",\n  \"M3 148.86V61.12C41.76 40.75 80.52 20.37 119.28 0h2.91c21.32 20.7 42.64 41.4 63.96 62.11v89.71c-38.44 20.04-76.88 40.09-115.31 60.13h-2.91L3.01 148.86Z\",\n  \"M134 0h2c7.26 22.31 14.38 44.67 21.86 66.9 3.91 11.61 5.47 29.91 13.25 33.27C203 113.94 236.86 123.13 270 134v1L136 269h-1c-11.04-33.58-22.08-67.16-33.21-101.03C67.87 156.98 33.93 145.99 0 135v-1L134 0Z\",\n  \"M107 0h1l108 108v1c-26.67 35.33-53.33 70.66-80 106h-1c-8.82-35.03-17.64-70.07-27-107.28C98.62 145.01 89.81 180 81.01 215h-1C53.33 179.66 26.67 144.33 0 109v-2L107 0Z\",\n  \"M0 1C2.17.67 4.33.05 6.5.04 58.33-.01 110.17 0 162 0v270H2c26.2-22.17 52.41-44.33 78.86-66.71V67.4c-3.85-3.22-7.35-6.2-10.9-9.11C46.64 39.18 23.32 20.09 0 1Z\",\n  \"M95 268.99h-1C62.66 238.66 31.33 208.33 0 178V88C26.67 58.67 53.33 29.33 80 0h1c0 29.45 0 58.89-.01 88.38 35.99 29.57 72 59.09 108.01 88.61v1l-94 91Z\",\n  \"M13 0h67l135 135v1L81 270c-27-.33-54-.67-81-1 11.73-12.51 23.61-24.87 35.16-37.54 33.14-36.35 66.14-72.82 100.23-110.38C94.4 80.52 53.7 40.26 13 0Z\",\n];\n\nexport { ColorShapes };\n"],"names":[],"mappings":"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"}