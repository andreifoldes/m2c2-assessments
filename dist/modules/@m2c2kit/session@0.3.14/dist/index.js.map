{"version":3,"file":"index.js","sources":["../src/DomHelper.ts","../src/SessionEvent.ts","../src/m2c2kitCss.ts","../src/HtmlDialog.ts","../src/DiagnosticsReporter.ts","../src/Session.ts","../src/index.ts"],"sourcesContent":["import { Activity, ActivityType, M2Error } from \"@m2c2kit/core\";\n\nexport class DomHelper {\n  /**\n   * Specifies the HTML element in which to render the m2c2kit activities.\n   *\n   * @param rootElement - the element to add the survey div and canvas div to\n   */\n  static createRoot(rootElement: HTMLElement): void {\n    const surveyDiv = document.createElement(\"div\");\n    surveyDiv.setAttribute(\"id\", \"m2c2kit-survey-div\");\n    rootElement.appendChild(surveyDiv);\n\n    const canvasDiv = document.createElement(\"div\");\n    canvasDiv.setAttribute(\"id\", \"m2c2kit-canvas-div\");\n    canvasDiv.className = \"m2c2kit-full-viewport m2c2kit-flex-container\";\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"id\", \"m2c2kit-canvas\");\n    canvas.className = \"m2c2kit-full-viewport\";\n    canvasDiv.appendChild(canvas);\n\n    rootElement.appendChild(canvasDiv);\n  }\n\n  /**\n   * Adds a style sheet to the head of the document.\n   *\n   * @param css - text of the CSS\n   */\n  static addStyleSheet(css: string): void {\n    const styleSheet = document.createElement(\"style\");\n    styleSheet.innerText = css;\n    document.head.appendChild(styleSheet);\n  }\n\n  /**\n   * Add elements to hide the canvas and show a spinner.\n   */\n  static addLoadingElements(): void {\n    const canvasDiv = document.getElementById(\"m2c2kit-canvas-div\");\n    if (!canvasDiv) {\n      throw new M2Error(\"Could not find container element\");\n    }\n\n    let overlayDiv = document.getElementById(\"m2c2kit-canvas-overlay-div\");\n    if (!overlayDiv) {\n      overlayDiv = document.createElement(\"div\");\n      overlayDiv.setAttribute(\"id\", \"m2c2kit-canvas-overlay-div\");\n      overlayDiv.className = \"m2c2kit-canvas-overlay m2c2kit-display-none\";\n\n      const spinnerDiv = document.createElement(\"div\");\n      spinnerDiv.setAttribute(\"id\", \"m2c2kit-spinner-div\");\n      spinnerDiv.className = \"m2c2kit-spinner m2c2kit-display-none\";\n\n      canvasDiv.appendChild(overlayDiv);\n      canvasDiv.appendChild(spinnerDiv);\n    }\n  }\n\n  /**\n   * Depending on the type of activity, set the visibility of the survey div\n   * and canvas div.\n   *\n   * @param activity - the activity to configure the DOM for\n   */\n  static configureDomForActivity(activity: Activity): void {\n    if (activity.type == ActivityType.Game) {\n      this.setCanvasDivVisibility(true);\n      this.setSurveyDivVisibility(false);\n    }\n    if (activity.type == ActivityType.Survey) {\n      this.setCanvasDivVisibility(false);\n      this.setSurveyDivVisibility(true);\n      DomHelper.setBusyAnimationVisibility(false);\n      DomHelper.setCanvasOverlayVisibility(false);\n    }\n  }\n\n  /**\n   * Hide the canvas div and survey div.\n   */\n  static hideM2c2Elements(): void {\n    this.setCanvasDivVisibility(false);\n    this.setSurveyDivVisibility(false);\n  }\n\n  /**\n   * Shows or hides the canvas overlay.\n   *\n   * @param visible - true if the canvas overlay should be visible\n   */\n  static setCanvasOverlayVisibility(visible: boolean): void {\n    const div = document.getElementById(\"m2c2kit-canvas-overlay-div\");\n    if (div) {\n      if (visible) {\n        div.classList.remove(\"m2c2kit-display-none\");\n      } else {\n        div.classList.add(\"m2c2kit-display-none\");\n      }\n    }\n  }\n\n  /**\n   * Shows or hides the busy animation.\n   *\n   * @param visible - true if the busy animation should be visible\n   */\n  static setBusyAnimationVisibility(visible: boolean): void {\n    const div = document.getElementById(\"m2c2kit-spinner-div\");\n    if (div) {\n      if (visible) {\n        div.classList.remove(\"m2c2kit-display-none\");\n      } else {\n        div.classList.add(\"m2c2kit-display-none\");\n      }\n    }\n  }\n\n  /**\n   * Shows or hides the survey div.\n   *\n   * @param visible - true if the survey div should be visible\n   */\n  private static setSurveyDivVisibility(visible: boolean): void {\n    const surveyDiv = document.getElementById(\"m2c2kit-survey-div\");\n    if (surveyDiv && visible) {\n      surveyDiv.classList.remove(\"m2c2kit-display-none\");\n      surveyDiv.classList.add(\"m2c2kit-display-block\");\n    }\n    if (surveyDiv && !visible) {\n      surveyDiv.classList.add(\"m2c2kit-display-none\");\n      surveyDiv.classList.remove(\"m2c2kit-display-block\");\n    }\n  }\n\n  /**\n   * Shows or hides the canvas div.\n   *\n   * @param visible - true if the canvas div should be visible\n   */\n  private static setCanvasDivVisibility(visible: boolean): void {\n    const canvasDiv = document.getElementById(\"m2c2kit-canvas-div\");\n    if (canvasDiv && visible) {\n      canvasDiv.classList.remove(\"m2c2kit-display-none\");\n      canvasDiv.classList.add(\"m2c2kit-flex-container\");\n    }\n    if (canvasDiv && !visible) {\n      canvasDiv.classList.add(\"m2c2kit-display-none\");\n      canvasDiv.classList.remove(\"m2c2kit-flex-container\");\n    }\n  }\n}\n","import { M2Event } from \"@m2c2kit/core\";\nimport { Session } from \"./Session\";\n\n/** Base interface for all Session events. */\nexport interface SessionEvent extends M2Event<Session> {\n  target: Session;\n}\n\nexport const SessionEventType = {\n  SessionInitialize: \"SessionInitialize\",\n  SessionStart: \"SessionStart\",\n  SessionEnd: \"SessionEnd\",\n  SessionData: \"SessionData\",\n} as const;\n\nexport type SessionEventType =\n  (typeof SessionEventType)[keyof typeof SessionEventType];\n","export const m2c2kitCss = `.m2c2kit-background-color {\n  background: white;\n}\n\n.m2c2kit-no-margin {\n  margin: 0;\n}\n\n.m2c2kit-display-none {\n  display: none;\n}\n\n.m2c2kit-display-block {\n  display: block;\n}\n\n.m2c2kit-full-viewport {\n  height: 100vh;\n  width: 100vw;\n}\n\n.m2c2kit-flex-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.m2c2kit-canvas-overlay {\n  background-color: white;\n  width: 100vw;\n  height: 100vh;\n  position: absolute\n}\n\n.m2c2kit-spinner {\n  border: 16px solid #f3f3f3;\n  border-radius: 50%;\n  border-top: 16px solid #212529;\n  width: 120px;\n  height: 120px;\n  /* Safari */\n  -webkit-animation: m2c2kit-loader-spin 1.5s linear infinite;\n  animation: m2c2kit-loader-spin 1.5s linear infinite;\n  position: absolute;\n}\n\n#m2c2kit-time-stepping-div {\n  position: fixed;\n  top: 4px;\n  left: 4px\n}\n\n/* Safari */\n@-webkit-keyframes m2c2kit-loader-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n\n@keyframes m2c2kit-loader-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}`;\n","import { HtmlDialogOptions } from \"./HtmlDialogOptions\";\n\nexport class HtmlDialog {\n  private overlay: HTMLDivElement;\n  private dialog: HTMLDivElement;\n  private message: HTMLParagraphElement;\n  private button: HTMLButtonElement;\n  private onDialogConfirm?: () => void;\n  private removeOverlayAfterConfirm;\n  private static activeDialog: HtmlDialog | null = null;\n\n  /**\n   * HtmlDialog class creates a custom dialog box.\n   *\n   * @remarks The dialog box is centered on the screen and has an overlay\n   * background composed of a large character (e.g., an emoji). The dialog box\n   * is shown using HTML and CSS, not drawing on a canvas, so that it will\n   * reliably be shown even if there is an error in the assessment code.\n   *\n   * @param options - Options for the dialog box.\n   */\n  constructor(options: HtmlDialogOptions) {\n    this.onDialogConfirm = options.onDialogConfirm;\n    this.removeOverlayAfterConfirm = options.removeOverlayAfterConfirm ?? true;\n\n    // overlay background\n    this.overlay = document.createElement(\"div\");\n    this.overlay.style.position = \"fixed\";\n    this.overlay.style.top = \"0\";\n    this.overlay.style.left = \"0\";\n    this.overlay.style.width = \"100vw\";\n    this.overlay.style.height = \"100vh\";\n    this.overlay.style.backgroundColor = \"#fff\";\n    this.overlay.style.display = \"flex\";\n    this.overlay.style.justifyContent = \"center\";\n    this.overlay.style.alignItems = \"center\";\n    this.overlay.style.zIndex = \"1000\";\n\n    // character background element\n    const background = document.createElement(\"div\");\n    background.textContent = options.backgroundCharacter ?? null;\n    background.style.position = \"absolute\";\n    background.style.fontSize = \"20rem\"; // Very large\n    background.style.opacity = \"0.40\"; // Subtle appearance\n    background.style.top = \"50%\";\n    background.style.left = \"50%\";\n    background.style.transform = \"translate(-50%, -50%)\";\n\n    // dialog box\n    this.dialog = document.createElement(\"div\");\n    this.dialog.style.backgroundColor = \"#fff\";\n    this.dialog.style.padding = \"20px\";\n    this.dialog.style.borderRadius = \"10px\";\n    this.dialog.style.boxShadow = \"0px 4px 10px rgba(0, 0, 0, 0.3)\";\n    this.dialog.style.textAlign = \"center\";\n    this.dialog.style.minWidth = \"200px\";\n    this.dialog.style.maxWidth = \"75%\";\n    this.dialog.style.opacity = \".80\";\n    this.dialog.style.position = \"relative\"; // Add this to ensure it's above the emoji\n    this.dialog.style.zIndex = \"1001\"; // Higher than the overlay\n\n    this.message = document.createElement(\"p\");\n    this.message.textContent = options.message;\n    this.message.style.marginBottom = \"15px\";\n    this.message.style.fontFamily = \"Arial, sans-serif\";\n\n    this.button = document.createElement(\"button\");\n    this.button.textContent = \"OK\";\n    this.button.style.padding = \"8px 15px\";\n    this.button.style.border = \"none\";\n    this.button.style.backgroundColor = \"#007bff\";\n    this.button.style.color = \"#fff\";\n    this.button.style.borderRadius = \"5px\";\n    this.button.style.cursor = \"pointer\";\n    this.button.style.fontSize = \"16px\";\n    this.button.style.fontFamily = \"Arial, sans-serif\";\n    this.button.onclick = this.close.bind(this);\n\n    this.dialog.appendChild(this.message);\n    this.dialog.appendChild(this.button);\n    this.overlay.appendChild(background);\n    this.overlay.appendChild(this.dialog);\n  }\n\n  /**\n   * Shows the dialog box. If another dialog is already visible,\n   * it will be closed before showing this one.\n   */\n  public show(): void {\n    // Close any existing dialog first\n    if (HtmlDialog.activeDialog && HtmlDialog.activeDialog !== this) {\n      HtmlDialog.activeDialog.forceClose();\n    }\n\n    HtmlDialog.activeDialog = this;\n    document.body.appendChild(this.overlay);\n  }\n\n  /**\n   * Checks if any dialog is currently being displayed\n   *\n   * @returns True if a dialog is currently visible\n   */\n  public static isDialogVisible(): boolean {\n    return HtmlDialog.activeDialog !== null;\n  }\n\n  /**\n   * Closes the dialog without triggering onDialogConfirm callback\n   */\n  private forceClose(): void {\n    // Remove only the dialog box, keeping the overlay with emoji\n    if (this.dialog.parentNode === this.overlay) {\n      this.overlay.removeChild(this.dialog);\n      if (this.removeOverlayAfterConfirm) {\n        this.overlay.remove();\n      }\n    }\n    this.button.onclick = null;\n    HtmlDialog.activeDialog = null;\n  }\n\n  /**\n   * Closes the dialog and calls the onDialogConfirm callback if provided\n   */\n  private close(): void {\n    // Remove only the dialog box, keeping the overlay with emoji\n    if (this.dialog.parentNode === this.overlay) {\n      this.overlay.removeChild(this.dialog);\n      if (this.removeOverlayAfterConfirm) {\n        this.overlay.remove();\n      }\n    }\n    this.button.onclick = null;\n    HtmlDialog.activeDialog = null;\n    if (this.onDialogConfirm) {\n      this.onDialogConfirm();\n    }\n  }\n}\n","import {\n  M2c2KitHelpers,\n  Uuid,\n  ActivityType,\n  Game,\n  Activity,\n} from \"@m2c2kit/core\";\nimport { SessionKeyValueData } from \"./SessionData\";\nimport { SessionEvent, SessionEventType } from \"./SessionEvent\";\nimport { SessionDataEvent } from \"./SessionDataEvent\";\nimport { HtmlDialog } from \"./HtmlDialog\";\nimport { DiagnosticsReporterOptions } from \"./DiagnosticsReporterOptions\";\n\nconst MAX_DIAGNOSTIC_EVENTS = 10;\n\nexport class DiagnosticsReporter {\n  private staticDiagnosticData: SessionKeyValueData = {};\n  private batteryStatus: BatteryStatus | undefined;\n  private storageEstimate: StorageEstimate | undefined;\n  private isHandlingException = false;\n  private reportedExceptions = new Set<string>();\n  private diagnosticEventsCount = 0;\n  private getSessionUuid: () => string;\n  private getCurrentActivity: () => Activity | undefined;\n  private dispatchEvent: (event: SessionEvent, extra?: unknown) => void;\n  private onErrorDialogConfirm: () => void;\n  private removeOverlayAfterErrorDialogConfirm: boolean;\n  private onlyM2Errors: boolean;\n  private handleResourceLoadingErrors: boolean;\n  private maximumDiagnosticEvents: number;\n  private errorHandler: (event: ErrorEvent) => void;\n  private rejectionHandler: (event: PromiseRejectionEvent) => void;\n  private resourceErrorHandler: (event: Event) => void;\n\n  constructor(options: DiagnosticsReporterOptions) {\n    this.getSessionUuid = options.getSessionUuid;\n    this.getCurrentActivity = options.getCurrentActivity;\n    this.dispatchEvent = options.dispatchEvent;\n    this.onErrorDialogConfirm = options.onErrorDialogConfirm || (() => {});\n    this.removeOverlayAfterErrorDialogConfirm =\n      options.removeOverlayAfterErrorDialogConfirm ?? false;\n    this.onlyM2Errors = options.onlyM2Errors ?? true;\n    this.handleResourceLoadingErrors =\n      options.handleResourceLoadingErrors ?? false;\n    this.maximumDiagnosticEvents =\n      options.maximumDiagnosticEvents ?? MAX_DIAGNOSTIC_EVENTS;\n    this.errorHandler = this.handleError.bind(this);\n    this.rejectionHandler = this.handleRejection.bind(this);\n    this.resourceErrorHandler = this.handleResourceError.bind(this);\n\n    this.refreshBatteryStatus();\n    this.refreshStorageEstimate();\n  }\n\n  /**\n   * Sets the value of a variable that will be the same for all diagnostic data.\n   *\n   * @param key - key (variable name) for the static diagnostic data\n   * @param value - value for the data\n   */\n  addStaticDiagnosticData(\n    key: string,\n    value: string | number | boolean | object | undefined | null,\n  ): void {\n    this.staticDiagnosticData[key] = value;\n  }\n\n  /**\n   * Starts the DiagnosticsReporter by setting up global error handlers to\n   * capture uncaught errors, unhandled promise rejections, and possibly\n   * resource loading errors to be reported through diagnostics.\n   */\n  start(): void {\n    window.addEventListener(\"error\", this.errorHandler);\n    window.addEventListener(\"unhandledrejection\", this.rejectionHandler);\n    if (this.handleResourceLoadingErrors) {\n      document.addEventListener(\"error\", this.resourceErrorHandler, true);\n    }\n  }\n\n  /**\n   * Stops the DiagnosticsReporter by removing all global error handlers\n   * to prevent memory leaks. Call this method when the DiagnosticsReporter\n   * is no longer needed.\n   */\n  stop(): void {\n    window.removeEventListener(\"error\", this.errorHandler);\n    window.removeEventListener(\"unhandledrejection\", this.rejectionHandler);\n    document.removeEventListener(\"error\", this.resourceErrorHandler, true);\n  }\n\n  /**\n   * Handles synchronous errors\n   */\n  private handleError(event: ErrorEvent): boolean {\n    if (this.onlyM2Errors && event.error && event.error.name !== \"M2Error\") {\n      return false;\n    }\n\n    this.handleException(event.error || new Error(event.message), {\n      source: event.filename,\n      lineno: event.lineno,\n      colno: event.colno,\n      type: \"synchronous\",\n    });\n    return false; // Don't prevent default handling\n  }\n\n  /**\n   * Handles unhandled promise rejections\n   */\n  private handleRejection(event: PromiseRejectionEvent): boolean {\n    let error: Error;\n    if (event.reason instanceof Error) {\n      error = event.reason;\n    } else if (typeof event.reason === \"string\") {\n      error = new Error(event.reason);\n    } else {\n      try {\n        error = new Error(JSON.stringify(event.reason));\n      } catch {\n        error = new Error(\n          \"Unhandled Promise rejection with unserializable reason\",\n        );\n      }\n    }\n\n    if (this.onlyM2Errors && error && error.name !== \"M2Error\") {\n      return false;\n    }\n\n    // Extract line/column info from stack trace\n    const errorInfo = this.extractErrorLocationFromStack(error.stack);\n\n    this.handleException(error, {\n      source: errorInfo.source || \"promise_rejection\",\n      lineno: errorInfo.lineno,\n      colno: errorInfo.colno,\n      type: \"promise_rejection\",\n    });\n\n    return false; // Don't prevent default handling\n  }\n\n  /**\n   * Extracts source file, line number and column number from error stack trace\n   * Works across Chrome, Firefox, Safari, Edge on both desktop and mobile\n   *\n   * @param stack - The error stack trace string\n   * @returns Object containing source file, line number, and column number\n   * @private\n   */\n  private extractErrorLocationFromStack(stack?: string): {\n    source?: string;\n    lineno?: number;\n    colno?: number;\n  } {\n    if (!stack) return {};\n\n    const MAX_STACK_LINES = 20; // Don't process extremely large stacks\n    const stackLines = stack.split(\"\\n\").slice(0, MAX_STACK_LINES);\n\n    for (let i = 0; i < stackLines.length; i++) {\n      const line = stackLines[i].trim();\n\n      // Skip empty lines\n      if (!line) continue;\n\n      // Chrome/Edge format: \"at methodName (file:///path/file.js:line:column)\"\n      const chromeMatch = line.match(/at .*? \\(([^)]+):(\\d+):(\\d+)\\)/);\n      if (chromeMatch) {\n        return {\n          source: chromeMatch[1],\n          lineno: parseInt(chromeMatch[2], 10),\n          colno: parseInt(chromeMatch[3], 10),\n        };\n      }\n\n      // Chrome/Edge alternative format: \"at file:///path/file.js:line:column\"\n      const chromeAltMatch = line.match(/at ([^ ]+):(\\d+):(\\d+)/);\n      if (chromeAltMatch) {\n        return {\n          source: chromeAltMatch[1],\n          lineno: parseInt(chromeAltMatch[2], 10),\n          colno: parseInt(chromeAltMatch[3], 10),\n        };\n      }\n\n      // Firefox/Safari format: \"functionName@file:///path/file.js:line:column\"\n      // or \"@file:///path/file.js:line:column\"\n      const mozillaMatch = line.match(/(?:@|at )([^@]+):(\\d+):(\\d+)/);\n      if (mozillaMatch) {\n        return {\n          source: mozillaMatch[1],\n          lineno: parseInt(mozillaMatch[2], 10),\n          colno: parseInt(mozillaMatch[3], 10),\n        };\n      }\n\n      // Handle eval call stacks in Safari/Firefox\n      // Example: \"methodName@http://site.com/file.js line 1 > eval line 1 > eval:1:1\"\n      const evalMatch = line.match(/([^@\\s]+)(?:.*?)?:(\\d+):(\\d+)$/);\n      if (evalMatch) {\n        return {\n          source: evalMatch[1],\n          lineno: parseInt(evalMatch[2], 10),\n          colno: parseInt(evalMatch[3], 10),\n        };\n      }\n\n      // Generic fallback pattern that looks for file:line:column\n      // This helps with other browser formats we might not specifically handle\n      const genericMatch = line.match(/([^:]+):(\\d+):(\\d+)/);\n      if (genericMatch) {\n        return {\n          source: genericMatch[1],\n          lineno: parseInt(genericMatch[2], 10),\n          colno: parseInt(genericMatch[3], 10),\n        };\n      }\n    }\n\n    return {}; // No location information found\n  }\n\n  /**\n   * Handles resource loading errors\n   */\n  private handleResourceError(event: Event): void {\n    // There are many HTML elements that can cause resource loading errors,\n    // but for now watch only images and scripts.\n    if (\n      event.target instanceof HTMLImageElement ||\n      event.target instanceof HTMLScriptElement\n    ) {\n      let url = \"src\" in event.target ? event.target.src : \"unknown\";\n      url = this.truncateString(url, 100);\n      this.handleException(\n        new Error(\n          `Error on element ${event.target.nodeName} in document at ${document.URL}. Failed to load resource: ${url}`,\n        ),\n        {\n          source: \"resource_loading\",\n          type: \"resource_loading\",\n        },\n      );\n    }\n  }\n\n  /**\n   * Handles uncaught exceptions and sends diagnostic data to listeners.\n   *\n   * @remarks This method is called by the global error handler and\n   * unhandled promise rejection handler.\n   *\n   * @param error - the error object\n   * @param errorInfo - additional information about the error\n   * @param errorInfo.source - the source of the error (e.g., filename)\n   * @param errorInfo.lineno - the line number where the error occurred\n   * @param errorInfo.colno - the column number where the error occurred   *\n   */\n  private handleException(error: Error, errorInfo?: ErrorInfo): void {\n    if (this.isHandlingException) {\n      console.error(\"Error occurred while handling another exception\", error);\n      return;\n    }\n\n    const errorKey = `${error.message}:${errorInfo?.lineno || 0}:${errorInfo?.colno || 0}`;\n    if (this.reportedExceptions.has(errorKey)) {\n      return;\n    }\n    this.reportedExceptions.add(errorKey);\n    this.diagnosticEventsCount++;\n\n    if (this.diagnosticEventsCount > this.maximumDiagnosticEvents) {\n      console.warn(\n        `Maximum diagnostic events reached (${this.maximumDiagnosticEvents}). No more will be reported.`,\n      );\n      return;\n    }\n\n    try {\n      this.isHandlingException = true;\n\n      // Only show a dialog if there isn't one already visible\n      if (!HtmlDialog.isDialogVisible()) {\n        const dialog = new HtmlDialog({\n          message:\n            \"We are sorry, but something went wrong. Please try again later.\",\n          backgroundCharacter: \"âš ï¸\",\n          onDialogConfirm: this.onErrorDialogConfirm,\n          removeOverlayAfterConfirm: this.removeOverlayAfterErrorDialogConfirm,\n        });\n        dialog.show();\n      } else {\n        console.log(\"Error dialog already visible, not showing another one\");\n      }\n\n      // Create diagnostic data and dispatch event\n      const currentActivity = this.getCurrentActivity();\n      const { timestamp, iso8601Timestamp } = M2c2KitHelpers.createTimestamps();\n      const diagnosticData: SessionKeyValueData = {\n        data_type: \"diagnostics\",\n        document_uuid: Uuid.generate(),\n        iso8601_timestamp: iso8601Timestamp,\n        session_uuid: this.getSessionUuid(),\n        activity: {\n          id: currentActivity?.id ?? null,\n          uuid: currentActivity?.uuid ?? null,\n          publish_uuid: currentActivity?.publishUuid ?? null,\n          version:\n            currentActivity?.type === ActivityType.Game\n              ? (currentActivity as Game).options.version\n              : null,\n          begin_iso8601_timestamp:\n            currentActivity?.type === ActivityType.Game\n              ? (currentActivity as Game).beginIso8601Timestamp\n              : null,\n          locale:\n            currentActivity?.type === ActivityType.Game\n              ? ((currentActivity as Game).i18n?.locale ?? null)\n              : null,\n        },\n        error_message: error.message,\n        error_stack: this.truncateString(error.stack, 2048) ?? null,\n        error_source: errorInfo?.source ?? null,\n        error_line: errorInfo?.lineno || 0,\n        error_column: errorInfo?.colno || 0,\n        error_type: errorInfo?.type ?? null,\n        device_metadata: this.getExtendedDeviceMetadata(),\n        ...this.staticDiagnosticData,\n      };\n\n      const sessionDataEvent: SessionDataEvent = {\n        // target will be replaced by the Session instance in the eventRaiser,\n        // which is raiseEventOnListeners() in the Session class. It will set\n        // the target to the session instance.\n        target: null as unknown as SessionEvent[\"target\"],\n        type: SessionEventType.SessionData,\n        data: diagnosticData,\n        dataType: \"Diagnostics\",\n        timestamp: timestamp,\n        iso8601Timestamp: iso8601Timestamp,\n      };\n\n      this.dispatchEvent(sessionDataEvent);\n      console.log(\"âŒ diagnostics:\", error, errorInfo);\n    } finally {\n      this.isHandlingException = false;\n    }\n  }\n\n  private getExtendedDeviceMetadata() {\n    try {\n      const screen = window.screen || {};\n      let orientation = undefined;\n      try {\n        orientation = screen.orientation || undefined;\n      } catch {\n        // Ignore errors accessing orientation\n      }\n\n      return {\n        userAgent: navigator?.userAgent,\n        language: navigator?.language,\n        hardwareConcurrency: navigator?.hardwareConcurrency,\n        deviceMemory:\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          typeof (navigator as any)?.deviceMemory !== \"undefined\"\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              (navigator as any).deviceMemory\n            : undefined,\n        // Connection API is experimental. Wrap in try/catch to avoid errors\n        // that some browsers may throw if the API is not available.\n        connection: (() => {\n          try {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const conn = (navigator as any)?.connection;\n            return conn\n              ? {\n                  effectiveType: conn?.effectiveType,\n                  downlink: conn?.downlink,\n                  downlinkMax: conn?.downlinkMax,\n                  rtt: conn?.rtt,\n                  saveData: conn?.saveData,\n                  type: conn?.type,\n                }\n              : undefined;\n          } catch {\n            return undefined;\n          }\n        })(),\n        battery: this.batteryStatus,\n        storage: this.storageEstimate,\n        cookieEnabled: navigator?.cookieEnabled,\n        webAssembly: typeof WebAssembly !== \"undefined\",\n        maxTouchPoints: navigator?.maxTouchPoints,\n        devicePixelRatio: window?.devicePixelRatio,\n        screen: {\n          availHeight: screen?.availHeight,\n          availWidth: screen?.availWidth,\n          colorDepth: screen?.colorDepth,\n          height: screen?.height,\n          orientation: orientation\n            ? {\n                type: orientation?.type,\n                angle: orientation?.angle,\n              }\n            : undefined,\n          pixelDepth: screen?.pixelDepth,\n          width: screen?.width,\n        },\n        device_timezone:\n          Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone || \"\",\n        device_timezone_offset_minutes: new Date().getTimezoneOffset(),\n      };\n    } catch (error) {\n      console.warn(\"Error collecting device metadata:\", error);\n      // Return minimal metadata to avoid breaking diagnostics completely\n      return {\n        userAgent: navigator?.userAgent || \"unknown\",\n      };\n    }\n  }\n\n  /**\n   * Refreshes the battery status.\n   *\n   * @remarks This method uses the Battery Status API to get the current\n   * battery status of the device. Because the API is asynchronous, we\n   * call it previously so that it is ready when we need it and do not need\n   * to await it.\n   */\n  private refreshBatteryStatus(): void {\n    try {\n      // Check if API exists\n      if (!(\"getBattery\" in navigator)) {\n        return;\n      }\n\n      // Set a timeout to prevent hanging\n      const timeoutPromise = new Promise<null>((_, reject) => {\n        setTimeout(() => reject(new Error(\"Battery status timeout\")), 2000);\n      });\n\n      // Race with actual battery fetch\n      Promise.race([\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (navigator as any).getBattery(),\n        timeoutPromise,\n      ])\n        .then((battery: BatteryStatus) => {\n          this.batteryStatus = {\n            charging: battery?.charging,\n            level: battery?.level,\n            chargingTime: battery?.chargingTime,\n            dischargingTime: battery?.dischargingTime,\n          };\n        })\n        .catch((error) => {\n          console.warn(\"Battery status API error:\", error);\n          this.batteryStatus = undefined;\n        });\n    } catch (error) {\n      console.warn(\"Unexpected error in battery status check:\", error);\n    }\n  }\n\n  private refreshStorageEstimate(): void {\n    try {\n      // Check if API exists\n      if (!(\"storage\" in navigator && \"estimate\" in navigator.storage)) {\n        return;\n      }\n\n      // Set a timeout to prevent hanging\n      const timeoutPromise = new Promise<null>((_, reject) => {\n        setTimeout(() => reject(new Error(\"Storage estimate timeout\")), 2000);\n      });\n\n      // Race with actual storage estimate fetch\n      Promise.race([\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (navigator as any).storage.estimate(),\n        timeoutPromise,\n      ])\n        .then((storage: StorageEstimate) => {\n          this.storageEstimate = {\n            quota: storage.quota,\n            usage: storage.usage,\n          };\n        })\n        .catch((error) => {\n          console.warn(\"Storage estimation API error:\", error);\n          this.storageEstimate = undefined;\n        });\n    } catch (error) {\n      console.warn(\"Unexpected error in storage estimation check:\", error);\n    }\n  }\n\n  private truncateString(s: string | undefined, length: number) {\n    if (!s) {\n      return \"\";\n    }\n    if (s.length <= length) {\n      return s;\n    }\n    return s.slice(0, length) + `...(truncated from ${s.length} characters)`;\n  }\n}\n\ninterface ErrorInfo {\n  source?: string;\n  lineno?: number;\n  colno?: number;\n  type?: string;\n}\n\ninterface BatteryStatus {\n  charging?: boolean;\n  level?: number;\n  chargingTime?: number;\n  dischargingTime?: number;\n}\n\ninterface StorageEstimate {\n  quota?: number;\n  usage?: number;\n}\n","import {\n  Activity,\n  ActivityEvent,\n  ActivityType,\n  ActivityLifecycleEvent,\n  ActivityResultsEvent,\n  CallbackOptions,\n  IDataStore,\n  Timer,\n  FontAsset,\n  Uuid,\n  M2EventType,\n  Constants,\n  M2EventListener,\n  Game,\n  M2c2KitHelpers,\n  M2Error,\n} from \"@m2c2kit/core\";\nimport { DomHelper } from \"./DomHelper\";\nimport { SessionOptions } from \"./SessionOptions\";\nimport { SessionLifecycleEvent } from \"./SessionLifecycleEvent\";\nimport { SessionEvent, SessionEventType } from \"./SessionEvent\";\nimport { m2c2kitCss } from \"./m2c2kitCss\";\nimport { SessionDataEvent } from \"./SessionDataEvent\";\nimport { DiagnosticsReporter } from \"./DiagnosticsReporter\";\n\nexport class Session {\n  options: SessionOptions;\n  currentActivity?: Activity;\n  private _uuid?: string;\n  dataStores?: IDataStore[];\n  private eventListeners = new Array<\n    M2EventListener<SessionEvent | ActivityEvent>\n  >();\n  private sessionDictionary = new Map<string, SessionDictionaryValues>();\n  private initialized = false;\n  private diagnosticsReporter?: DiagnosticsReporter;\n\n  /**\n   * A Session contains one or more activities. The session manages the start\n   * and stop of activities, and advancement to next activity\n   *\n   * @param options\n   */\n  constructor(options: SessionOptions) {\n    this.options = options;\n\n    // Make session also available on window in case we want to control or inspect it\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as unknown as any).m2c2kitSession = this;\n\n    this.addDebuggingTools();\n  }\n\n  /**\n   * Adds debugging tools to the session.\n   *\n   * @remarks These tools can be activated by appending query parameters to the\n   * URL or by setting game parameters via the `Game.SetParameters()` method\n   * (only eruda and scripts can be set with `Game.SetParameters()`).\n   */\n  private addDebuggingTools() {\n    const urlParams = new URLSearchParams(window.location.search);\n\n    const diagnosticsUrlParam = urlParams.get(\"diagnostics\");\n    if (diagnosticsUrlParam !== null) {\n      // URL parameter exists - it overrides session options\n      if (diagnosticsUrlParam === \"true\") {\n        this.startDiagnostics();\n      }\n      // If \"false\", don't start diagnostics regardless of session options\n    } else if (this.options.diagnostics === true) {\n      // No URL parameter - fall back to session options\n      this.startDiagnostics();\n    }\n\n    if (urlParams.get(\"eruda\") === \"true\") {\n      M2c2KitHelpers.loadEruda();\n    }\n\n    const scriptsParam = urlParams.get(\"scripts\");\n    if (scriptsParam) {\n      try {\n        const scripts = JSON.parse(\n          decodeURIComponent(scriptsParam),\n        ) as string[];\n        M2c2KitHelpers.loadScriptUrls(scripts);\n      } catch {\n        console.log(\n          `Error parsing \"scripts\" parameter. \"scripts\" must be an array of URL strings, and it is recommended to be URI encoded.`,\n        );\n      }\n    }\n  }\n\n  /**\n   * Starts the diagnostics reporter.\n   */\n  private startDiagnostics() {\n    if (this.diagnosticsReporter) {\n      this.diagnosticsReporter.stop();\n    }\n\n    this.diagnosticsReporter = new DiagnosticsReporter({\n      getSessionUuid: () => this.uuid,\n      getCurrentActivity: () => this.currentActivity,\n      dispatchEvent: this.raiseEventOnListeners.bind(this),\n      onErrorDialogConfirm: this.end.bind(this),\n    });\n    this.diagnosticsReporter.start();\n  }\n\n  /**\n   * Executes a callback when the session initializes.\n   *\n   * @param callback - function to execute.\n   * @param options - options for the callback.\n   */\n  onInitialize(\n    callback: (sessionLifecycleEvent: SessionLifecycleEvent) => void,\n    options?: CallbackOptions,\n  ): void {\n    this.addEventListener(\n      SessionEventType.SessionInitialize,\n      callback,\n      options,\n    );\n  }\n\n  /**\n   * Executes a callback when the session starts.\n   *\n   * @param callback - function to execute.\n   * @param options - options for the callback.\n   */\n  onStart(\n    callback: (sessionLifecycleEvent: SessionLifecycleEvent) => void,\n    options?: CallbackOptions,\n  ): void {\n    this.addEventListener(SessionEventType.SessionStart, callback, options);\n  }\n\n  /**\n   * Executes a callback when the session ends.\n   *\n   * @param callback - function to execute.\n   * @param options - options for the callback.\n   */\n  onEnd(\n    callback: (sessionLifecycleEvent: SessionLifecycleEvent) => void,\n    options?: CallbackOptions,\n  ): void {\n    this.addEventListener(SessionEventType.SessionEnd, callback, options);\n  }\n\n  /**\n   * Executes a callback when the session generates data.\n   *\n   * @remarks Currently, this is used only for capturing diagnostics data on\n   * exceptions.\n   *\n   * @param callback - function to execute.\n   * @param options - options for the callback.\n   */\n  onData(\n    callback: (sessionDataEvent: SessionDataEvent) => void,\n    options?: CallbackOptions,\n  ): void {\n    this.addEventListener(SessionEventType.SessionData, callback, options);\n  }\n\n  /**\n   * Executes a callback when any activity in the session generates data.\n   *\n   * @param callback - function to execute.\n   * @param options - options for the callback.\n   */\n  onActivityData(\n    callback: (activityResultsEvent: ActivityResultsEvent) => void,\n    options?: CallbackOptions,\n  ): void {\n    this.addEventListener(M2EventType.ActivityData, callback, options);\n  }\n\n  private addEventListener<T extends SessionEvent | ActivityEvent>(\n    type: M2EventType | SessionEventType,\n    callback: (ev: T) => void,\n    options?: CallbackOptions,\n  ): void {\n    const eventListener: M2EventListener<T> = {\n      type: type,\n      callback: callback,\n      key: options?.key,\n    };\n\n    if (options?.replaceExisting) {\n      this.eventListeners = this.eventListeners.filter(\n        (listener) => !(listener.type === eventListener.type),\n      );\n    }\n    this.eventListeners.push(\n      eventListener as M2EventListener<SessionEvent | ActivityEvent>,\n    );\n  }\n\n  private raiseEventOnListeners(\n    event: SessionEvent | ActivityEvent,\n    extra?: unknown,\n  ): void {\n    if (extra) {\n      event = {\n        ...event,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ...(extra as any),\n      };\n    }\n    // To maintain loose coupling, the DiagnosticReporter does not\n    // depend on the Session class. Instead, it uses the event system to\n    // communicate with the session. Thus, we need to check if the event is\n    // a SessionDataEvent and if the target is not set. If it is not set,\n    // we set it to this session.\n    if (this.eventIsSessionDataEventMissingTarget(event)) {\n      event.target = this;\n    }\n    this.eventListeners\n      .filter((listener) => listener.type === event.type)\n      .forEach((listener) => {\n        listener.callback(event);\n      });\n  }\n\n  private eventIsSessionDataEventMissingTarget(\n    event: SessionEvent | ActivityEvent,\n  ): boolean {\n    return (\n      event.type === SessionEventType.SessionData &&\n      (event as SessionDataEvent).dataType === \"Diagnostics\" &&\n      !event.target\n    );\n  }\n\n  private async sessionActivityStartHandler(event: ActivityLifecycleEvent) {\n    const activityType =\n      event.target.type === ActivityType.Game ? \"game\" : \"survey\";\n    console.log(`ðŸŸ¢ started activity (${activityType}) ${event.target.name}`);\n  }\n\n  private async sessionActivityCancelHandler(event: ActivityLifecycleEvent) {\n    const activityType =\n      event.target.type === ActivityType.Game ? \"game\" : \"survey\";\n    console.log(`ðŸš« canceled activity (${activityType}) ${event.target.name}`);\n\n    if (this.nextActivity && this.options.autoGoToNextActivity !== false) {\n      await this.goToNextActivity();\n      // Note: important to return here, because now this.nextActivity refers\n      // to the activity AFTER the one we have just advanced to.\n      return;\n    }\n    if (!this.nextActivity && this.options.autoEndAfterLastActivity !== false) {\n      this.end();\n    }\n  }\n\n  private async sessionActivityEndHandler(event: ActivityLifecycleEvent) {\n    const activityType =\n      event.target.type === ActivityType.Game ? \"game\" : \"survey\";\n    console.log(`ðŸ”´ ended activity (${activityType}) ${event.target.name}`);\n    if (this.nextActivity && this.options.autoGoToNextActivity !== false) {\n      await this.goToNextActivity();\n      // Note: important to return here, because now this.nextActivity refers\n      // to the activity AFTER the one we have just advanced to.\n      return;\n    }\n    if (!this.nextActivity && this.options.autoEndAfterLastActivity !== false) {\n      this.end();\n    }\n  }\n\n  private async sessionActivityLifecycleHandler(event: ActivityLifecycleEvent) {\n    if (event.type === M2EventType.ActivityStart) {\n      await this.sessionActivityStartHandler(event);\n      return;\n    }\n\n    if (event.type === M2EventType.ActivityCancel) {\n      await this.sessionActivityCancelHandler(event);\n      return;\n    }\n\n    if (event.type === M2EventType.ActivityEnd) {\n      await this.sessionActivityEndHandler(event);\n      return;\n    }\n\n    throw new M2Error(\"unknown activity lifecycle event type\");\n  }\n\n  private activityResultsEventHandler(event: ActivityResultsEvent) {\n    this.raiseEventOnListeners(event);\n  }\n\n  /**\n   * Asynchronously initializes the m2c2kit engine and loads assets\n   *\n   * @deprecated Use Session.initialize() instead.\n   */\n  async init(): Promise<void> {\n    console.warn(\n      `The init() method of Session is deprecated. Use initialize() instead.`,\n    );\n    return this.initialize();\n  }\n\n  /**\n   * Check if the Activity uses the deprecated init() method.\n   *\n   * @remarks Activity.init() is deprecated and should be replaced with\n   * Activity.initialize().\n   *\n   * @param activity\n   * @returns true if the activity defines its own init() method, false otherwise.\n   */\n  private activityUsesDeprecatedInit(activity: Activity): boolean {\n    if (activity.type === ActivityType.Survey) {\n      return false;\n    }\n    const activityPrototype = Object.getPrototypeOf(activity);\n    const gamePrototype = Object.getPrototypeOf(activityPrototype);\n    return activityPrototype?.init !== gamePrototype?.init;\n  }\n\n  /**\n   * Asynchronously initializes the m2c2kit engine and loads assets\n   */\n  async initialize(): Promise<void> {\n    Timer.startNew(\"sessionInitialize\");\n\n    if (this.options.sessionUuid) {\n      this.uuid = this.options.sessionUuid;\n    } else {\n      this.uuid = Uuid.generate();\n    }\n\n    for (const activity of this.options.activities) {\n      if (this.options.activities.filter((a) => a === activity).length > 1) {\n        throw new M2Error(\n          `error in SessionOptions.activities: an instance of the activity named \"${activity.name}\" has been added more than once to the session. If you want to repeat the same activity, create separate instances of it.`,\n        );\n      }\n      activity.sessionUuid = this.uuid;\n      if (this.options.activityCallbacks?.onActivityLifecycle) {\n        activity.onStart(this.options.activityCallbacks.onActivityLifecycle);\n        activity.onCancel(this.options.activityCallbacks.onActivityLifecycle);\n        activity.onEnd(this.options.activityCallbacks.onActivityLifecycle);\n      }\n      if (this.options.activityCallbacks?.onActivityResults) {\n        activity.onData(this.options.activityCallbacks.onActivityResults);\n      }\n\n      if (activity.type === ActivityType.Game) {\n        const game = activity as Game;\n        game.onWarmupStart(() => {\n          DomHelper.setCanvasOverlayVisibility(true);\n        });\n        game.onWarmupEnd(() => {\n          DomHelper.setCanvasOverlayVisibility(false);\n          DomHelper.setBusyAnimationVisibility(false);\n        });\n      }\n    }\n\n    const sessionInitializeEvent: SessionEvent = {\n      target: this,\n      type: SessionEventType.SessionInitialize,\n      ...M2c2KitHelpers.createTimestamps(),\n    };\n    this.raiseEventOnListeners(sessionInitializeEvent);\n    const rootId =\n      this.options.rootElementId ?? Constants.DEFAULT_ROOT_ELEMENT_ID;\n    const root = document.getElementById(rootId);\n    if (!root) {\n      throw new M2Error(\n        `Session.initialize(): root element with id ${rootId} not found. The index.html should have: <div id=\"${rootId}\"></div>.`,\n      );\n    }\n    DomHelper.createRoot(root);\n    DomHelper.addStyleSheet(this.options.styleSheet ?? m2c2kitCss);\n    DomHelper.addLoadingElements();\n    DomHelper.setBusyAnimationVisibility(true);\n    DomHelper.setCanvasOverlayVisibility(true);\n\n    this.dataStores = this.options.dataStores;\n    if (this.dataStores?.length === 0) {\n      throw new M2Error(\n        \"Session.initialize(): dataStores must be undefined or a non-zero array of datastores.\",\n      );\n    }\n\n    await this.getSharedAssets(this.options.activities);\n\n    await Promise.all(\n      this.options.activities.map((activity) => {\n        activity.studyId = this.options.studyId;\n        activity.studyUuid = this.options.studyUuid;\n        // IDataStore implementation is provided by another library and must\n        // be set in the session before calling session.initialize()\n        activity.dataStores = this.dataStores;\n        activity.onStart(this.sessionActivityLifecycleHandler.bind(this));\n        activity.onCancel(this.sessionActivityLifecycleHandler.bind(this));\n        activity.onEnd(this.sessionActivityLifecycleHandler.bind(this));\n        activity.onData((event: ActivityResultsEvent) => {\n          this.activityResultsEventHandler(event);\n        });\n\n        if (this.activityUsesDeprecatedInit(activity)) {\n          console.warn(\n            `game ${activity.id}: Activity.init() is deprecated. In the assessment class that extends Game, use Activity.initialize() instead:\\n  async initialize() {\\n    await super.initialize();\\n    ...\\n  }\\n`,\n          );\n          return activity.init();\n        }\n        return activity.initialize();\n      }),\n    );\n\n    console.log(\n      `âšª Session.initialize() took ${Timer.elapsed(\n        \"sessionInitialize\",\n      ).toFixed(0)} ms`,\n    );\n    Timer.remove(\"sessionInitialize\");\n    this.initialized = true;\n    if (this.options.autoStartAfterInit !== false) {\n      await this.start();\n    }\n  }\n\n  /**\n   * Asynchronously loads fonts and wasm binaries that are common across two\n   * or more game activities and shares them with the games.\n   *\n   * @param activities - array of activities\n   */\n  private async getSharedAssets(activities: Activity[]) {\n    const games = activities.filter(\n      (activity) =>\n        activity.type === ActivityType.Game &&\n        (activity as Game).options.shareAssets !== false,\n    ) as Array<Game>;\n\n    if (games.length > 0) {\n      const manifest = await games[0].loadManifest();\n      games.forEach((game) => {\n        game.manifest = manifest;\n      });\n\n      const wasmPromises = this.initializeSharedCanvasKit(games);\n      const fontPromises = this.fetchSharedFontData(games);\n      await Promise.all([...wasmPromises, ...fontPromises]);\n    }\n  }\n\n  private initializeSharedCanvasKit(games: Game[]) {\n    const sharedWasmVersions = this.getDuplicates(\n      games.map((game) => game.canvasKitWasmVersion),\n    );\n    const wasmAssets = games.map((game) => {\n      return {\n        game: game,\n        version: game.canvasKitWasmVersion,\n        data: undefined,\n      };\n    });\n\n    const wasmPromises = sharedWasmVersions.map(async (sharedWasmVersion) => {\n      const wasmAsset = wasmAssets.filter(\n        (wasm) => wasm.version === sharedWasmVersion,\n      )[0];\n      const game = wasmAsset.game;\n      const baseUrls = await game.resolveGameBaseUrls(game);\n      const canvasKitWasmFilename = `canvaskit-${game.canvasKitWasmVersion}.wasm`;\n      const manifestCanvasKitWasmUrl = M2c2KitHelpers.getUrlFromManifest(\n        game,\n        `${baseUrls.canvasKitWasm}/${canvasKitWasmFilename}`,\n      );\n      console.log(`âšª sharing ${canvasKitWasmFilename} within session`);\n\n      const canvasKit = await game.loadCanvasKit(manifestCanvasKitWasmUrl);\n      games.forEach((game) => {\n        if (game.canvasKitWasmVersion === sharedWasmVersion) {\n          game.canvasKit = canvasKit;\n        }\n      });\n    });\n    return wasmPromises;\n  }\n\n  private fetchSharedFontData(games: Game[]) {\n    const fontFiles = games\n      .flatMap(\n        (game) => game.options.fonts?.filter((f) => f.lazy !== true) ?? [],\n      )\n      .map((fontAsset) => this.getFilenameFromUrl(fontAsset.url));\n    const sharedFontFiles = this.getDuplicates(fontFiles);\n\n    const allGameFonts: Array<GameFontAsset> = games.flatMap((game) => {\n      return (game.options.fonts ?? []).map((fontAsset) => {\n        return {\n          game: game,\n          fontAsset: fontAsset,\n          filename: this.getFilenameFromUrl(fontAsset.url),\n          data: undefined,\n        };\n      });\n    });\n\n    const fontPromises = sharedFontFiles.map(async (sharedFontFile) => {\n      const gameFontAsset = allGameFonts.filter(\n        (gameFont) => gameFont.filename === sharedFontFile,\n      )[0];\n      const game = gameFontAsset.game;\n      const baseUrls = await game.resolveGameBaseUrls(game);\n      const fontUrl = M2c2KitHelpers.getUrlFromManifest(\n        game,\n        `${baseUrls.assets}/${gameFontAsset.fontAsset.url}`,\n      );\n      console.log(\n        `âšª sharing ${this.getFilenameFromUrl(fontUrl)} within session`,\n      );\n\n      const response = await fetch(fontUrl);\n      const fontData = await response.arrayBuffer();\n      games\n        .flatMap((game) => game.options.fonts ?? [])\n        .forEach((fontAsset) => {\n          if (this.getFilenameFromUrl(fontAsset.url) === sharedFontFile) {\n            fontAsset.sharedFont = {\n              url: fontUrl,\n              data: fontData,\n            };\n          }\n        });\n    });\n    return fontPromises;\n  }\n\n  /**\n   * Waits for the session to be initialized.\n   *\n   * @remarks Session.initialize() is asynchronous, and it should be awaited\n   * so that the session is fully initialized before calling Session.start().\n   * If it is not awaited (or it cannot be awaited because the target\n   * environment does not support top-level await), this function ensures that\n   * the session has been initialized.\n   */\n  private async waitForSessionInitialization(): Promise<void> {\n    while (!this.initialized) {\n      await new Promise((resolve) =>\n        setTimeout(\n          resolve,\n          Constants.SESSION_INITIALIZATION_POLLING_INTERVAL_MS,\n        ),\n      );\n    }\n  }\n\n  /**\n   * Starts the session and starts the first activity.\n   */\n  async start(): Promise<void> {\n    await this.waitForSessionInitialization();\n    console.log(\"ðŸŸ¢ started session\");\n    const sessionStartEvent: SessionLifecycleEvent = {\n      target: this,\n      type: SessionEventType.SessionStart,\n      ...M2c2KitHelpers.createTimestamps(),\n    };\n    this.raiseEventOnListeners(sessionStartEvent);\n    this.currentActivity = this.options.activities.find(Boolean);\n    if (this.currentActivity) {\n      DomHelper.configureDomForActivity(this.currentActivity);\n      await this.currentActivity.start();\n    } else {\n      // no activities, so immediately end the session\n      console.warn(\"no activities in session.\");\n      this.end();\n    }\n  }\n\n  /**\n   * Declares the session ended and sends callback.\n   */\n  end(): void {\n    console.log(\"ðŸ”´ ended session\");\n    DomHelper.hideM2c2Elements();\n    this.stop();\n    const sessionEndEvent: SessionLifecycleEvent = {\n      target: this,\n      type: SessionEventType.SessionEnd,\n      ...M2c2KitHelpers.createTimestamps(),\n    };\n    this.raiseEventOnListeners(sessionEndEvent);\n\n    if (this.diagnosticsReporter) {\n      this.diagnosticsReporter.stop();\n      this.diagnosticsReporter = undefined;\n    }\n  }\n\n  private stop(): void {\n    this.dispose();\n  }\n\n  /**\n   * Frees up resources that were allocated to run the session.\n   *\n   * @remarks This will be done automatically by the m2c2kit library;\n   * the end-user must not call this.\n   */\n  private dispose(): void {\n    // TODO: Are there are any other resources that need to be disposed at the session level?\n  }\n\n  /**\n   * Stops the current activity and goes to the activity with the provided id.\n   *\n   * @param options\n   */\n  async goToActivity(options: GoToActivityOptions): Promise<void> {\n    const nextActivity = this.options.activities\n      .filter((activity) => activity.id === options.id)\n      .find(Boolean);\n    if (!nextActivity) {\n      throw new M2Error(\n        `Error in goToActivity(): Session does not contain an activity with id ${options.id}.`,\n      );\n    }\n    if (this.currentActivity) {\n      this.currentActivity.stop();\n    }\n\n    /**\n     * From this point on, the phrase \"currentActivity\" refers to the activity\n     * that we are going to, not the one we are leaving.\n     * currentActivityOldObject is an instance of the activity that has been\n     * fully initialized previously. We use currentActivityOldObject as a\n     * blueprint to create a new instance.\n     */\n    const currentActivityOldObject = nextActivity;\n\n    /**\n     * It is possible the current activity is one we have executed before. In\n     * that case, we need to reset everything about this activity. The cleanest\n     * way to do that is create a new instance of it. The below factory\n     * function does that.\n     * see https://stackoverflow.com/a/14378462\n     */\n    const activityFactoryFunction =\n      currentActivityOldObject.constructor.bind.apply(\n        currentActivityOldObject.constructor,\n        [null],\n      );\n    this.currentActivity = new activityFactoryFunction() as Activity;\n\n    const indexOfCurrentActivity = this.options.activities.indexOf(\n      currentActivityOldObject,\n    );\n    this.options.activities[indexOfCurrentActivity] = this.currentActivity;\n    DomHelper.configureDomForActivity(this.currentActivity);\n\n    /**\n     * Because the current activity has been newly created, it needs properties\n     * assigned to it that it would have received in the Session.initialize()\n     * method. Also, if the old instance had new parameters set via\n     * Game.SetParameters(), we must apply them.\n     */\n    this.currentActivity.dataStores = this.dataStores;\n    /**\n     * IMPORTANT: Originally, we checked if the current activity was a game\n     * by checking if it was an instance of Game. However, if we are mixing\n     * code bundles, the Game class in one bundle will not be the same as the\n     * Game class in another bundle. Instead, we must check the type property\n     * of the activity.\n     */\n    // if (this.currentActivity.type === ActivityType.Game && this.canvasKit) {\n    //   (this.currentActivity as Game).canvasKit = this.canvasKit;\n    // }\n    if (currentActivityOldObject.additionalParameters) {\n      this.currentActivity.setParameters(\n        currentActivityOldObject.additionalParameters,\n      );\n    }\n\n    /**\n     * In Session.initialize(), async assets were loaded. Once processed, they were\n     * stored in a dictionary, with the activity uuid as the key. When a new\n     * instance of the activity is created, the object has a different uuid.\n     * We must update the uuid in the dictionaries (if it exists).\n     */\n    // if (this.imageManager.loadedImages[currentActivityOldObject.uuid]) {\n    //   this.imageManager.loadedImages[this.currentActivity.uuid] =\n    //     this.imageManager.loadedImages[currentActivityOldObject.uuid];\n    //   delete this.imageManager.loadedImages[currentActivityOldObject.uuid];\n    // }\n    // if (this.fontManager.gameTypefaces[currentActivityOldObject.uuid]) {\n    //   this.fontManager.gameTypefaces[this.currentActivity.uuid] =\n    //     this.fontManager.gameTypefaces[currentActivityOldObject.uuid];\n    //   delete this.fontManager.gameTypefaces[currentActivityOldObject.uuid];\n    // }\n\n    await this.currentActivity.initialize();\n    await this.currentActivity.start();\n  }\n\n  /**\n   * Stops the current activity and advances to next activity in the session.\n   * If there is no activity after the current activity, throws error.\n   */\n  async goToNextActivity(): Promise<void> {\n    if (!this.currentActivity) {\n      throw new M2Error(\n        \"error in advanceToNextActivity(): no current activity\",\n      );\n    }\n    if (!this.nextActivity) {\n      throw new M2Error(\"error in advanceToNextActivity(): no next activity\");\n    }\n    this.currentActivity.stop();\n    this.currentActivity = this.nextActivity;\n\n    DomHelper.configureDomForActivity(this.currentActivity);\n    await this.currentActivity.start();\n  }\n\n  /**\n   * Stops the current activity and advances to next activity in the session.\n   * If there is no activity after the current activity, throws error.\n   *\n   * @deprecated Use goToNextActivity() instead.\n   */\n  async advanceToNextActivity(): Promise<void> {\n    await this.goToNextActivity();\n  }\n\n  /**\n   * Gets the next activity after the current one, or undefined if\n   * this is the last activity.\n   */\n  get nextActivity(): Activity | undefined {\n    if (!this.currentActivity) {\n      throw new M2Error(\"error in get nextActivity(): no current activity\");\n    }\n    const index = this.options.activities.indexOf(this.currentActivity);\n    if (index === this.options.activities.length - 1) {\n      return undefined;\n    }\n    const currentActivityIndex = this.options.activities.indexOf(\n      this.currentActivity,\n    );\n    return this.options.activities[currentActivityIndex + 1];\n  }\n\n  /**\n   * Saves an item to the session's key-value dictionary.\n   *\n   * @remarks The session dictionary is not persisted. It is available only\n   * during the actively running session. It is useful for storing temporary\n   * data to coordinate between activities.\n   *\n   * @param key - item key\n   * @param value - item value\n   */\n  dictionarySetItem(key: string, value: SessionDictionaryValues): void {\n    this.sessionDictionary.set(key, value);\n  }\n\n  /**\n   * Gets an item value from the session's key-value dictionary.\n   *\n   * @remarks The session dictionary is not persisted. It is available only\n   * during the actively running session. It is useful for storing temporary\n   * data to coordinate between activities.\n   *\n   * @param key - item key\n   * @returns value of the item\n   */\n  dictionaryGetItem<T extends SessionDictionaryValues>(key: string) {\n    return this.sessionDictionary.get(key) as T;\n  }\n\n  /**\n   * Deletes an item value from the session's key-value dictionary.\n   *\n   * @remarks The session dictionary is not persisted. It is available only\n   * during the actively running session. It is useful for storing temporary\n   * data to coordinate between activities.\n   *\n   * @param key - item key\n   * @returns true if the item was deleted, false if it did not exist\n   */\n  dictionaryDeleteItem(key: string) {\n    return this.sessionDictionary.delete(key);\n  }\n\n  /**\n   * Determines if a key exists in the activity's key-value dictionary.\n   *\n   * @remarks The session dictionary is not persisted. It is available only\n   * during the actively running session. It is useful for storing temporary\n   * data to coordinate between activities.\n   *\n   * @param key - item key\n   * @returns true if the key exists, false otherwise\n   */\n  dictionaryItemExists(key: string) {\n    return this.sessionDictionary.has(key);\n  }\n\n  /**\n   * Returns the filename from a url.\n   *\n   * @param url - url to parse\n   * @returns filename\n   */\n  private getFilenameFromUrl(url: string) {\n    return url.substring(url.lastIndexOf(\"/\") + 1);\n  }\n\n  /**\n   * Returns the duplicated strings in an array.\n   *\n   * @param s - array of strings\n   * @returns array of duplicated strings\n   */\n  private getDuplicates(s: string[]): string[] {\n    const count: { [key: string]: number } = {};\n    const duplicates: string[] = [];\n\n    for (const str of s) {\n      count[str] = (count[str] || 0) + 1;\n      if (count[str] === 2) {\n        duplicates.push(str);\n      }\n    }\n\n    return duplicates;\n  }\n\n  get uuid(): string {\n    if (!this._uuid) {\n      // A UUID is generated in the initialize() method, and this is okay\n      // in most cases because the UUID will not be used until the session\n      // is initialized. However, there is an edge case. If there is an\n      // exception before the session is initialized, the DiagnosticsReporter\n      // class will need a session UUID to report the error. In that case,\n      // use the empty UUID.\n      console.warn(\"Session.uuid is undefined. Returning empty UUID.\");\n      return \"00000000-0000-0000-0000-000000000000\";\n    }\n    return this._uuid;\n  }\n  set uuid(value: string) {\n    this._uuid = value;\n  }\n\n  /**\n   * Sets the value of a variable that will be the same for all diagnostic data.\n   *\n   * @remarks This is useful for custom variables to appear in the diagnostic\n   * data. For example, you might save the subject's participant ID, or some\n   * other identifier that is not typically part of the diagnostic data. In\n   * the example below, if an exception occurs, the `participant_id` variable\n   * will be saved with the value `12345` within the diagnostic data.\n   * \n   * @example\n   * ```\n   * session.addStaticDiagnosticData(\"participant_id\", \"12345\");\n   *```\n\n   * @param key - key (variable name) for the static diagnostic data\n   * @param value - value for the data\n   */\n  addStaticDiagnosticData(\n    key: string,\n    value: string | number | boolean | object | undefined | null,\n  ) {\n    if (this.diagnosticsReporter) {\n      this.diagnosticsReporter.addStaticDiagnosticData(key, value);\n    } else {\n      console.warn(\n        `Session.addStaticDiagnosticData(): diagnostics reporter has not been created.`,\n      );\n    }\n  }\n}\n\nexport interface GoToActivityOptions {\n  /** ActivityId of the activity to go to. */\n  id: string;\n}\n\n/**\n * Types of values that can be stored in the session dictionary.\n */\nexport type SessionDictionaryValues =\n  | string\n  | number\n  | boolean\n  | object\n  | null\n  | undefined;\n\ninterface GameFontAsset {\n  game: Game;\n  fontAsset: FontAsset;\n  filename: string;\n  data: ArrayBuffer | undefined;\n}\n","export * from \"./Session\";\nexport * from \"./SessionEvent\";\nexport * from \"./SessionOptions\";\nexport * from \"./SessionLifecycleEvent\";\nexport * from \"./DomHelper\";\n\nconsole.log(\"âšª @m2c2kit/session version __PACKAGE_JSON_VERSION__\");\n"],"names":["game"],"mappings":"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"}