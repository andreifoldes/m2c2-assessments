import{Game as Q,WebColors as o,Sprite as X,Scene as P,Transition as U,Easings as L,TransitionDirection as F,Shape as q,Label as v,RandomDraws as S,Timer as R,Action as k}from"@m2c2kit/core";import{LocalePicker as ee,Instructions as D,CountdownScene as te,Grid as M,Button as ie}from"@m2c2kit/addons";class ae extends Q{constructor(){const e={number_of_top_pairs:{default:3,type:"integer",enum:[1,2,3,4],description:"Number of pairs to be shown on top. (1-4)"},lure_percent:{default:.5,type:"number",description:"Percentage of lure trials. Number from 0 to 1. A lure trial is when the incorrect symbol pair on the bottom contains exactly one symbol that is found on the top.(1 unique symbol). A non-lure trial is when the incorrect symbol pair contains exactly zero symbols that match the top. (2 unique symbols.)"},lure_position_on_card:{default:"either",type:"string",enum:["top","bottom","either"],description:"If a lure trial, must the lure symbol occupy the top position on the the card, the bottom, or either? If either, then the lure symbol will be equally distributed across trials to be in the top and bottom positions."},left_correct_percent:{default:.5,type:"number",description:"Percentage of trials where the left pair is the correct answer. Number from 0 to 1."},countdown_duration_ms:{default:3e3,type:"number",description:"Duration of the countdown phase, milliseconds. Multiples of 1000 recommended."},after_countdown_transition_duration_ms:{default:500,type:"number",description:"Duration, in milliseconds, of the slide in animation after the countdown phase."},number_of_trials:{default:5,type:"integer",description:"How many trials to run."},interstimulus_animation:{default:!0,type:"boolean",description:"Should new trials slide in from right to left?"},interstimulus_interval_duration_ms:{default:500,type:"number",description:"If interstimulus_animation == true, the duration, in milliseconds, of the slide in animation after each trial. Otherwise, the duration, in milliseconds, to wait after a trial has been completed until a new trial appears."},instruction_type:{default:"long",type:"string",enum:["short","long"],description:"Type of instructions to show, 'short' or 'long'."},instructions:{default:null,type:["object","null"],description:"When non-null, an InstructionsOptions object that will completely override the built-in instructions."},show_trials_complete_scene:{default:!0,type:"boolean",description:"After the final trial, should a completion scene be shown? Otherwise, the game will immediately end."},show_quit_button:{type:"boolean",default:!1,description:"Should the activity quit button be shown?"},show_fps:{type:"boolean",default:!1,description:"Should the FPS be shown?"},show_locale_picker:{type:"boolean",default:!1,description:"Should the icon that allows the participant to switch the locale be shown?"}},h={activity_begin_iso8601_timestamp:{type:"string",format:"date-time",description:"ISO 8601 timestamp at the beginning of the game activity."},trial_begin_iso8601_timestamp:{type:["string","null"],format:"date-time",description:"ISO 8601 timestamp at the beginning of the trial. Null if trial was skipped."},trial_end_iso8601_timestamp:{type:["string","null"],format:"date-time",description:"ISO 8601 timestamp at the end of the trial (when user selects a card). Null if trial was skipped."},trial_index:{type:["integer","null"],description:"Index of the trial within this assessment, 0-based."},trial_type:{type:["string","null"],enum:["normal","lure",null],description:"Indicates if trial was normal or lure. Null if trial was skipped."},card_configuration:{type:["object","null"],description:"Symbols used on cards. Null if trial was skipped.",properties:{top_cards_symbols:{type:"array",description:"Symbols of the top cards, starting at 0 for leftmost upper card and incrementing by 1 moving right.",items:{type:"object",properties:{top:{type:"integer",description:"Index of the top symbol within the card, 1-based."},bottom:{type:"integer",description:"Index of the bottom symbol within the card, 1-based."}}}},bottom_cards_symbols:{type:"array",description:"Symbols of the bottom cards, starting at 0 for leftmost card and incrementing by 1 moving right.",items:{type:"object",properties:{top:{type:"integer",description:"Index of the top symbol within the card, 1-based."},bottom:{type:"integer",description:"Index of the bottom symbol within the card, 1-based."}}}}}},response_time_duration_ms:{type:["number","null"],description:"Milliseconds from the beginning of the trial until a user taps a response. Null if trial was skipped."},user_response_index:{type:["integer","null"],description:"Index of user selected response, starting at 0 for leftmost card and incrementing by 1 moving right. Null if trial was skipped."},correct_response_index:{type:["integer","null"],description:"Index of correct response, starting at 0 for leftmost card and incrementing by 1 moving right. Null if trial was skipped."},quit_button_pressed:{type:"boolean",description:"Was the quit button pressed?"}},c={configuration:{baseLocale:"en-US"},"en-US":{localeName:"English",INSTRUCTIONS_TITLE:"Symbol Search",SHORT_INSTRUCTIONS_TEXT_PAGE_1:"Goal: Touch the set on the bottom that is exactly the same as a set above, as fast and accurately as you can",INSTRUCTIONS_TEXT_PAGE_1:"You will see sets of symbols on the top and bottom of the screen.",INSTRUCTIONS_TEXT_PAGE_2:"When prompted, touch the set on the bottom that is exactly the same as a set above.",INSTRUCTIONS_TEXT_PAGE_3:"Please be as fast and accurate as you can.",START_BUTTON_TEXT:"START",NEXT_BUTTON_TEXT:"Next",BACK_BUTTON_TEXT:"Back",GET_READY_COUNTDOWN_TEXT:"GET READY!",WHICH_MATCHES_TEXT:"Which of these matches a pair above?",OR_TEXT:"or",TRIALS_COMPLETE_SCENE_TEXT:"This activity is complete.",TRIALS_COMPLETE_SCENE_BUTTON_TEXT:"OK"},"es-MX":{localeName:"Espa\xF1ol",INSTRUCTIONS_TITLE:"B\xFAsqueda de S\xEDmbolos",INSTRUCTIONS_TEXT_PAGE_1:"Ver\xE1s series de s\xEDmbolos en la parte de arriba y abajo de la pantalla.",INSTRUCTIONS_TEXT_PAGE_2:"Cuando se le solicite, toque el grupo en la parte de abajo que es exactamente igual a un grupo de arriba.",INSTRUCTIONS_TEXT_PAGE_3:"Por favor, sea tan r\xE1pido y preciso como pueda.",START_BUTTON_TEXT:"COMENZAR",NEXT_BUTTON_TEXT:"Siguiente",BACK_BUTTON_TEXT:"Atr\xE1s",GET_READY_COUNTDOWN_TEXT:"PREP\xC1RESE",WHICH_MATCHES_TEXT:"\xBFCu\xE1l de estos coincide con un par anterior?",OR_TEXT:"o",TRIALS_COMPLETE_SCENE_TEXT:"Esta actividad est\xE1 completa.",TRIALS_COMPLETE_SCENE_BUTTON_TEXT:"OK"},"fr-FR":{localeName:"Fran\xE7ais",INSTRUCTIONS_TITLE:"Recherche de Symboles",INSTRUCTIONS_TEXT_PAGE_1:"Vous verrez des ensembles de symboles en haut et en bas de l'\xE9cran.",INSTRUCTIONS_TEXT_PAGE_2:"Lorsqu'on vous le demandera, touchez le groupe en bas qui est exactement le m\xEAme qu'un groupe ci-dessus.",INSTRUCTIONS_TEXT_PAGE_3:"Soyez aussi rapide et pr\xE9cis que possible.",START_BUTTON_TEXT:"D\xC9MARRER",NEXT_BUTTON_TEXT:"Suivant",BACK_BUTTON_TEXT:"Retour",GET_READY_COUNTDOWN_TEXT:"PR\xC9PAREZ-VOUS",WHICH_MATCHES_TEXT:"Lequel de ces \xE9l\xE9ments correspond \xE0 une paire ci-dessus ?",OR_TEXT:"ou",TRIALS_COMPLETE_SCENE_TEXT:"Cette activit\xE9 est termin\xE9e.",TRIALS_COMPLETE_SCENE_BUTTON_TEXT:"OK"},"de-DE":{localeName:"Deutsch",INSTRUCTIONS_TITLE:"Symbol-\xDCbereinstimmungs",INSTRUCTIONS_TEXT_PAGE_1:"Oben und unten sehen Sie Symbolpaare.",INSTRUCTIONS_TEXT_PAGE_2:"Ihre Aufgabe wird es sein, auf dasjenige untere Paar zu tippen, welches mit einem der obigen Paare exakt \xFCbereinstimmt.",INSTRUCTIONS_TEXT_PAGE_3:"Versuchen Sie bitte, so schnell und korrekt wie m\xF6glich zu sein.",START_BUTTON_TEXT:"START",NEXT_BUTTON_TEXT:"Weiter",BACK_BUTTON_TEXT:"Vorherige",GET_READY_COUNTDOWN_TEXT:"BEREIT MACHEN",WHICH_MATCHES_TEXT:"Welches dieser beiden stimmt mit einem der obigen Paare \xFCberein?",OR_TEXT:"oder",TRIALS_COMPLETE_SCENE_TEXT:"Die Aufgabe ist beendet.",TRIALS_COMPLETE_SCENE_BUTTON_TEXT:"OK"},"jp-JP":{localeName:"Japanese",localeSvg:{svgString:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 396.43 133.77"><path d="M0 9.22h93.45v121.25H83.37v-8.64H9.94v9.5H0zm83.37 9.79H9.94v41.33h73.44V19.01ZM9.94 112.03h73.44V69.84H9.94zM247.82 40.9h-52.56c12.38 25.63 33.98 49.39 57.46 60.62-2.45 2.02-5.62 5.76-7.34 8.5-22.61-12.24-43.06-35.28-56.3-61.34v47.23h28.8v9.79h-28.8v27.94H179V105.7h-29.23v-9.79H179V48.97c-13.68 26.06-34.27 48.67-56.02 61.34-1.73-2.45-4.75-6.05-6.91-7.92 22.61-11.66 44.21-35.85 56.74-61.49h-51.98v-9.79h58.18V0l12.96.72c-.14 1.01-.86 1.73-2.88 2.02v28.37h58.75v9.79Zm13.25-8.21v-8.21h52.85v8.21zm48.24 51.69v42.34h-33.12v6.77h-8.5v-49.1h41.62Zm-.43-39.74v7.92h-41.04v-7.92zm-41.04 27.79v-7.92h41.04v7.92zm40.61-67.39v7.92h-39.74V5.04zm-7.78 87.55h-24.48v25.92h24.48zm81.36-31.97h14.4v8.78h-82.08v-8.78h19.73c1.3-6.34 2.74-13.82 4.18-21.74h-15.84v-8.64h17.28c.86-5.47 1.73-11.09 2.59-16.13h-22.75V5.47h71.57v8.64h-39.46l-2.45 16.13h32.83zm-56.3 73.15V81.35h60.62v51.55h-9.36v-5.76h-42.05v6.62h-9.22Zm51.26-43.63h-42.05v28.08h42.05zm-4.32-51.26h-24.91c-1.3 7.78-2.74 15.41-4.03 21.74h28.94z"/></svg>',width:65,height:22},fontName:"noto-sans-japanese",INSTRUCTIONS_TITLE:"\u8A18\u53F7\u63A2\u3057",INSTRUCTIONS_TEXT_PAGE_1:"\u753B\u9762\u306E\u4E0A\u90E8\u3068\u4E0B\u90E8\u306B\u8A18\u53F7\u306E\u30DA\u30A2\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u3002",INSTRUCTIONS_TEXT_PAGE_2:"\u6307\u793A\u304C\u3042\u3063\u305F\u3089\u3001\u4E0A\u306B\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u30DA\u30A2\u3068\u307E\u3063\u305F\u304F\u540C\u3058\u30DA\u30A2\u3092\u4E0B\u304B\u3089\u9078\u3093\u3067\u30BF\u30C3\u30C1\u3057\u3066\u304F\u3060\u3055\u3044\u3002",INSTRUCTIONS_TEXT_PAGE_3:"\u3067\u304D\u308B\u3060\u3051\u901F\u304F\u3001\u305D\u3057\u3066\u6B63\u78BA\u306B\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002",START_BUTTON_TEXT:"\u30B9\u30BF\u30FC\u30C8",NEXT_BUTTON_TEXT:"\u6B21\u3078",BACK_BUTTON_TEXT:"\u623B\u308B",GET_READY_COUNTDOWN_TEXT:{text:"\u6E96\u5099\u3057\u3066\u304F\u3060\u3055\u3044\uFF01",fontSize:40},WHICH_MATCHES_TEXT:"\u3069\u308C\u304C\u4E0A\u306E\u30DA\u30A2\u3068\u4E00\u81F4\u3057\u307E\u3059\u304B\uFF1F",OR_TEXT:"\u307E\u305F\u306F",TRIALS_COMPLETE_SCENE_TEXT:"\u3053\u306E\u30C6\u30B9\u30C8\u306F\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",TRIALS_COMPLETE_SCENE_BUTTON_TEXT:"\u7D42\u4E86"}},t=160,x={name:"Symbol Search",id:"symbol-search",publishUuid:"400ad833-3037-4738-8ad8-c54e07c46896",version:"0.8.27 (d1ad307f)",moduleMetadata:{name:"@m2c2kit/assessment-symbol-search",version:"0.8.27",dependencies:{"@m2c2kit/addons":"0.3.28","@m2c2kit/core":"0.3.29"}},translation:c,shortDescription:"Symbol Search is a speeded continuous performance test of conjunctive feature search in which respondents identify matching symbol pairs as quickly and as accurately as they can.",longDescription:'On each trial of the symbol search task, participants saw a row of three symbol pairs at the top of the screen and were presented with two symbol pairs at the bottom of the screen. Stimuli were presented until a response was provided there was an interval of 200 msec. between each response and the following stimulus. Participants decided, as quickly as possible, which of the two pairs presented at the bottom of the screen was among the pairs at the top of the screen (see Figure 1). Participants completed 12 trials of this task. The dependent variable was median response time of correct trials. Because this task requires speeded comparisons similar to standard laboratory tests, we reasoned it would be a viable indicator of perceptual speed. SOURCE: Sliwinski, Martin J., Jacqueline A. Mogle, Jinshil Hyun, Elizabeth Munoz, Joshua M. Smyth, and Richard B. Lipton. "Reliability and validity of ambulatory cognitive assessments." Assessment 25, no. 1 (2018): 14-30.',showFps:e.show_fps.default,width:400,height:800,trialSchema:h,parameters:e,fonts:[{fontName:"roboto",url:"fonts/roboto/Roboto-Regular.ttf"},{fontName:"noto-sans-japanese",url:"fonts/noto-sans-japanese/NotoSansJP-Regular.ttf",lazy:!0}],bodyBackgroundColor:o.White,images:[{imageName:"gameImage",height:340,width:255,url:"images/gameImage.png",localize:!0},{imageName:"gameImageOutlinedCards",height:340,width:255,url:"images/gameImageOutlinedCards.png",localize:!0},{imageName:"stopwatchImage",height:319,width:256,url:"images/stopwatch.svg"},{imageName:"ssintroImage",height:186,width:336,url:"images/ssintroImage.png"},{imageName:"ss-01",height:t,width:t,url:"images/ss-01.svg"},{imageName:"ss-02",height:t,width:t,url:"images/ss-02.svg"},{imageName:"ss-03",height:t,width:t,url:"images/ss-03.svg"},{imageName:"ss-04",height:t,width:t,url:"images/ss-04.svg"},{imageName:"ss-05",height:t,width:t,url:"images/ss-05.svg"},{imageName:"ss-06",height:t,width:t,url:"images/ss-06.svg"},{imageName:"ss-07",height:t,width:t,url:"images/ss-07.svg"},{imageName:"ss-08",height:t,width:t,url:"images/ss-08.svg"},{imageName:"ss-09",height:t,width:t,url:"images/ss-09.svg"},{imageName:"ss-10",height:t,width:t,url:"images/ss-10.svg"},{imageName:"ss-11",height:t,width:t,url:"images/ss-11.svg"},{imageName:"ss-12",height:t,width:t,url:"images/ss-12.svg"},{imageName:"ss-13",height:t,width:t,url:"images/ss-13.svg"},{imageName:"ss-14",height:t,width:t,url:"images/ss-14.svg"},{imageName:"ss-15",height:t,width:t,url:"images/ss-15.svg"},{imageName:"ss-16",height:t,width:t,url:"images/ss-16.svg"},{imageName:"ss-17",height:t,width:t,url:"images/ss-17.svg"},{imageName:"ss-18",height:t,width:t,url:"images/ss-18.svg"},{imageName:"ss-19",height:t,width:t,url:"images/ss-19.svg"},{imageName:"ss-20",height:t,width:t,url:"images/ss-20.svg"},{imageName:"ss-21",height:t,width:t,url:"images/ss-21.svg"},{imageName:"ss-22",height:t,width:t,url:"images/ss-22.svg"},{imageName:"ss-23",height:t,width:t,url:"images/ss-23.svg"},{imageName:"ss-24",height:t,width:t,url:"images/ss-24.svg"},{imageName:"circle-x",height:32,width:32,url:"images/circle-x.svg"}]};super(x)}async initialize(){await super.initialize();const e=this,h=24;if(e.getParameter("show_quit_button")){const a=new X({imageName:"circle-x",position:{x:380,y:20},isUserInteractionEnabled:!0});e.addFreeNode(a),a.onTapDown(r=>{e.removeAllFreeNodes(),r.handled=!0;const _=new P;e.addScene(_),e.presentScene(_),e.addTrialData("quit_button_pressed",!0),e.trialComplete(),e.cancel()})}let c;e.getParameter("show_locale_picker")&&(c=new ee,e.addFreeNode(c));let t;const x=e.getParameter("instructions");if(x)t=D.create(x);else{const a={backgroundColor:o.White,nextButtonBackgroundColor:o.Black,backButtonBackgroundColor:o.Black,nextSceneTransition:U.slide({direction:F.Left,duration:500,easing:L.sinusoidalInOut}),backSceneTransition:U.slide({direction:F.Right,duration:500,easing:L.sinusoidalInOut})};switch(e.getParameter("instruction_type")){case"short":{t=D.create({...a,instructionScenes:[{title:"INSTRUCTIONS_TITLE",text:"SHORT_INSTRUCTIONS_TEXT_PAGE_1",imageName:"ssintroImage",imageAboveText:!1,imageMarginTop:12,textFontSize:24,titleFontSize:30,textVerticalBias:.25,nextButtonText:"START_BUTTON_TEXT",nextButtonBackgroundColor:o.Green}]});break}case"long":{t=D.create({...a,instructionScenes:[{title:"INSTRUCTIONS_TITLE",text:"INSTRUCTIONS_TEXT_PAGE_1",imageName:"gameImage",imageAboveText:!1,imageMarginTop:12,textFontSize:24,titleFontSize:30,textVerticalBias:.25,nextButtonText:"NEXT_BUTTON_TEXT"},{title:"INSTRUCTIONS_TITLE",text:"INSTRUCTIONS_TEXT_PAGE_2",imageName:"gameImageOutlinedCards",imageAboveText:!1,imageMarginTop:12,textFontSize:24,titleFontSize:30,textVerticalBias:.25,nextButtonText:"NEXT_BUTTON_TEXT",backButtonText:"BACK_BUTTON_TEXT"},{title:"INSTRUCTIONS_TITLE",text:"INSTRUCTIONS_TEXT_PAGE_3",imageName:"stopwatchImage",imageAboveText:!1,imageMarginTop:48,textFontSize:24,titleFontSize:30,textVerticalBias:.25,nextButtonText:"START_BUTTON_TEXT",nextButtonBackgroundColor:o.Green,backButtonText:"BACK_BUTTON_TEXT"}]});break}default:throw new Error(`invalid value for instruction_type: ${e.getParameter("instruction_type")}`)}}t[0].onAppear(()=>{e.addTrialData("activity_begin_iso8601_timestamp",this.beginIso8601Timestamp)}),e.addScenes(t);const z=U.slide({direction:F.Left,duration:e.getParameter("interstimulus_interval_duration_ms"),easing:L.sinusoidalInOut}),G=new te({milliseconds:e.getParameter("countdown_duration_ms"),text:"GET_READY_COUNTDOWN_TEXT",transitionDurationMilliseconds:e.getParameter("after_countdown_transition_duration_ms")});e.addScene(G),G.onSetup(()=>{c&&(c.hidden=!0)});const l=new P({name:"chooseCardScene",backgroundColor:[169,201,219,1]});e.addScene(l);const V=new q({rect:{size:{width:400,height:400}},fillColor:[166,177,181,1],position:{x:200,y:600}});l.addChild(V);const O=new v({text:"WHICH_MATCHES_TEXT",fontSize:22,preferredMaxLayoutWidth:240});l.addChild(O),O.position={x:200,y:460};const N=new v({text:"OR_TEXT",fontSize:22,preferredMaxLayoutWidth:240});l.addChild(N),N.position={x:200,y:580};const H=[],C=e.getParameter("number_of_trials"),j=e.getParameter("lure_percent"),K=e.getParameter("left_correct_percent"),T=e.getParameter("number_of_top_pairs"),w=Math.round(C*j),Y=Math.round(C*K),J=S.FromRangeWithoutReplacement(w,0,C-1),Z=S.FromRangeWithoutReplacement(Y,0,C-1);let g;switch(e.getParameter("lure_position_on_card")){case"top":{g=Array(w).fill(0);break}case"bottom":{g=Array(w).fill(1);break}case"either":{const a=Math.round(w/2);g=[...Array(a).fill(0),...Array(w-a).fill(1)],g=this.shuffleArray(g);break}default:throw new Error(`invalid value for lure_position_on_card: ${e.getParameter("lure_position_on_card")}`)}for(let a=0;a<C;a++){const r=J.includes(a),_=Z.includes(a);let n;r?n=S.FromRangeWithoutReplacement(T*2+1,1,h):n=S.FromRangeWithoutReplacement(T*2+2,1,h);const u=new Array;for(let d=0;d<T;d++){const I={top:n[2*d],bottom:n[2*d+1]};u.push(I)}const y=S.FromRangeWithoutReplacement(1,0,T-1)[0],b=u[y];let p;if(!r)p={top:n[2*T],bottom:n[2*T+1]};else{const d=u.filter(m=>m!=b).map(m=>[m.top,m.bottom]).flat(),I=S.FromRangeWithoutReplacement(1,0,d.length-1)[0],i=d[I],s=g.shift();if(s===void 0)throw new Error("lurePositions is empty");s===0?p={top:i,bottom:n[2*T]}:p={top:n[2*T],bottom:i}}const f={top_cards_symbols:u,bottom_cards_symbols:_?[b,p]:[p,b],trial_type:r?"lure":"normal",correct_response_index:_?0:1};H.push(f)}l.onSetup(()=>{N.hidden=!1;const a=H[e.trialIndex],r=a.top_cards_symbols.length,_=a.bottom_cards_symbols.length;let n;switch(r){case 2:case 4:{n=200;break}case 3:{n=100;break}default:throw new Error("valid values for number_of_top_pairs are 2, 3, or 4 cards")}let u;if(r>=1&&r<=3)u=new M({rows:1,columns:r,size:{width:80*r+n,height:160},position:{x:200,y:200},backgroundColor:o.Transparent,gridLineColor:o.Transparent});else if(r===4)u=new M({rows:2,columns:2,size:{width:80*2+n,height:200+n},position:{x:200,y:200},backgroundColor:o.Transparent,gridLineColor:o.Transparent});else throw new Error("invalid number_of_top_pairs");l.addChild(u);const y=new M({rows:1,columns:2,size:{width:80*2+200,height:160},position:{x:200,y:600},backgroundColor:o.Transparent,gridLineColor:o.Transparent});l.addChild(y);function b(i,s){const m=new q({rect:{size:{width:80,height:160}},fillColor:o.White,strokeColor:o.Black,lineWidth:2}),W=new X({imageName:"ss-"+i.toString().padStart(2,"0"),position:{x:0,y:-36}});m.addChild(W);const B=new X({imageName:"ss-"+s.toString().padStart(2,"0"),position:{x:0,y:36}});return m.addChild(B),m}const p=new Array;for(let i=0;i<r;i++){const s=b(a.top_cards_symbols[i].top,a.top_cards_symbols[i].bottom);p.push(s),r===4?u.addAtCell(s,Math.floor(i/2),i%2):u.addAtCell(s,0,i)}const f=new Array;for(let i=0;i<_;i++){const s=b(a.bottom_cards_symbols[i].top,a.bottom_cards_symbols[i].bottom);s.userData={index:i},f.push(s),y.addAtCell(s,0,i)}function d(i){i?f.forEach(s=>s.isUserInteractionEnabled=!0):f.forEach(s=>s.isUserInteractionEnabled=!1)}f.forEach(i=>i.onTapDown(()=>I(i)));function I(i){y.hidden=!0,u.hidden=!0,N.hidden=!0,R.stop("rt"),d(!1);const s=R.elapsed("rt");R.remove("rt"),e.addTrialData("trial_end_iso8601_timestamp",new Date().toISOString()),e.addTrialData("trial_type",a.trial_type),e.addTrialData("response_time_duration_ms",s),e.addTrialData("correct_response_index",a.correct_response_index),e.addTrialData("user_response_index",i.userData.index);const{correct_response_index:m,trial_type:W,...B}=a;e.addTrialData("card_configuration",B),e.addTrialData("quit_button_pressed",!1),e.addTrialData("trial_index",e.trialIndex),e.trialComplete(),e.trialIndex<e.getParameter("number_of_trials")?(N.hidden=!0,e.getParameter("interstimulus_animation")?e.presentScene(l,z):l.run(k.sequence([k.wait({duration:e.getParameter("interstimulus_interval_ms")}),k.custom({callback:()=>{e.presentScene(l)}})]))):(O.hidden=!1,e.removeFreeNode("questionLabelFree"),e.getParameter("show_trials_complete_scene")?e.presentScene(E,z):e.end())}l.onAppear(()=>{if(e.addTrialData("activity_begin_iso8601_timestamp",this.beginIso8601Timestamp),e.addTrialData("trial_begin_iso8601_timestamp",new Date().toISOString()),!e.nodes.map(i=>i.name).includes("questionLabelFree")){O.hidden=!0;const i=new v({name:"questionLabelFree",text:"WHICH_MATCHES_TEXT",fontSize:22,preferredMaxLayoutWidth:240});e.addFreeNode(i),i.position={x:200,y:460}}d(!0),R.startNew("rt")},{replaceExisting:!0})});const E=new P;e.addScene(E);const $=new v({text:"TRIALS_COMPLETE_SCENE_TEXT",position:{x:200,y:400}});E.addChild($);const A=new ie({text:"TRIALS_COMPLETE_SCENE_BUTTON_TEXT",position:{x:200,y:600},backgroundColor:o.Black});A.isUserInteractionEnabled=!0,A.onTapDown(()=>{A.isUserInteractionEnabled=!1,E.removeAllChildren(),e.end()}),E.addChild(A),E.onSetup(()=>{e.removeAllFreeNodes()})}shuffleArray(e){const h=[...e],c=[];for(;h.length>0;){const t=Math.floor(Math.random()*h.length);c.push(h.splice(t,1)[0])}return c}}export{ae as SymbolSearch};
