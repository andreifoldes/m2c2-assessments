{"version":3,"file":"index.js","sources":["../../data-calc/dist/index.js","../src/index.ts"],"sourcesContent":["class M2Error extends Error {\n  constructor(...params) {\n    super(...params);\n    this.name = \"M2Error\";\n    Object.setPrototypeOf(this, M2Error.prototype);\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, M2Error);\n    }\n  }\n}\n\nclass DataCalc {\n  /**\n   * A class for transformation and calculation of m2c2kit data.\n   *\n   * @remarks The purpose is to provide a simple and intuitive interface for\n   * assessments to score and summarize their own data. It is not meant for\n   * data analysis or statistical modeling. The idiomatic approach is based on the\n   * dplyr R package.\n   *\n   * @param data - An array of observations, where each observation is a set of\n   * key-value pairs of variable names and values.\n   * @param options - Options, such as groups to group the data by\n   * @example\n   * ```js\n   * const dc = new DataCalc(gameData.trials);\n   * const mean_response_time_correct_trials = dc\n   *  .filter((obs) => obs.correct_response_index === obs.user_response_index)\n   *  .summarize({ mean_rt: mean(\"response_time_duration_ms\") })\n   *  .pull(\"mean_rt\");\n   * ```\n   */\n  constructor(data, options) {\n    this._groups = new Array();\n    if (!Array.isArray(data)) {\n      throw new M2Error(\n        \"DataCalc constructor expects an array of observations as first argument\"\n      );\n    }\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] === null || typeof data[i] !== \"object\" || Array.isArray(data[i])) {\n        throw new M2Error(\n          `DataCalc constructor expects all elements to be objects (observations). Element at index ${i} is ${typeof data[i]}. Element: ${JSON.stringify(data[i])}`\n        );\n      }\n    }\n    this._observations = this.deepCopy(data);\n    const allVariables = /* @__PURE__ */ new Set();\n    for (const observation of data) {\n      for (const key of Object.keys(observation)) {\n        allVariables.add(key);\n      }\n    }\n    for (const observation of this._observations) {\n      for (const variable of allVariables) {\n        if (!(variable in observation)) {\n          observation[variable] = null;\n        }\n      }\n    }\n    if (options?.groups) {\n      this._groups = Array.from(options.groups);\n    }\n  }\n  /**\n   * Returns the groups in the data.\n   */\n  get groups() {\n    return this._groups;\n  }\n  /**\n   * Returns the observations in the data.\n   *\n   * @remarks An observation is conceptually similar to a row in a dataset,\n   * where the keys are the variable names and the values are the variable values.\n   */\n  get observations() {\n    return this._observations;\n  }\n  /**\n   * Alias for the observations property.\n   */\n  get rows() {\n    return this._observations;\n  }\n  /**\n   * Returns a single variable from the data.\n   *\n   * @remarks If the variable length is 1, the value is returned. If the\n   * variable has length > 1, an array of values is returned.\n   *\n   * @param variable - Name of variable to pull from the data\n   * @returns the value of the variable\n   *\n   * @example\n   * ```js\n   * const d = [{ a: 1, b: 2, c: 3 }];\n   * const dc = new DataCalc(d);\n   * console.log(\n   *   dc.pull(\"c\")\n   * ); // 3\n   * ```\n   */\n  pull(variable) {\n    if (this._observations.length === 0) {\n      console.warn(\n        `DataCalc.pull(): No observations available to pull variable \"${variable}\" from. Returning null.`\n      );\n      return null;\n    }\n    this.verifyObservationsContainVariable(variable);\n    const values = this._observations.map((o) => o[variable]);\n    if (values.length === 1) {\n      return values[0];\n    }\n    return values;\n  }\n  /**\n   * Returns the number of observations in the data.\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 0, b: 8, c: 3 }\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(\n   *   dc.length\n   * ); // 2\n   * ```\n   */\n  get length() {\n    return this._observations.length;\n  }\n  /**\n   * Filters observations based on a predicate function.\n   *\n   * @param predicate - A function that returns true for observations to keep and\n   * false for observations to discard\n   * @returns A new `DataCalc` object with only the observations that pass the\n   * predicate function\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 0, b: 8, c: 3 },\n   *   { a: 9, b: 4, c: 7 },\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(dc.filter((obs) => obs.b >= 3).observations);\n   * // [ { a: 0, b: 8, c: 3 }, { a: 9, b: 4, c: 7 } ]\n   * ```\n   */\n  filter(predicate) {\n    if (this._groups.length > 0) {\n      throw new M2Error(\n        `filter() cannot be used on grouped data. The data are currently grouped by ${this._groups.join(\n          \", \"\n        )}. Ungroup the data first using ungroup().`\n      );\n    }\n    return new DataCalc(\n      this._observations.filter(\n        predicate\n      ),\n      { groups: this._groups }\n    );\n  }\n  /**\n   * Groups observations by one or more variables.\n   *\n   * @remarks This is used with the `summarize()` method to calculate summaries\n   * by group.\n   *\n   * @param groups - variable names to group by\n   * @returns A new `DataCalc` object with the observations grouped by one or\n   * more variables\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 0, b: 8, c: 3 },\n   *   { a: 9, b: 4, c: 7 },\n   *   { a: 5, b: 0, c: 7 },\n   * ];\n   * const dc = new DataCalc(d);\n   * const grouped = dc.groupBy(\"c\");\n   * // subsequent summarize operations will be performed separately by\n   * // each unique level of c, in this case, 3 and 7\n   * ```\n   */\n  groupBy(...groups) {\n    groups.forEach((group) => {\n      this.verifyObservationsContainVariable(group);\n    });\n    return new DataCalc(this._observations, { groups });\n  }\n  /**\n   * Ungroups observations.\n   *\n   * @returns A new DataCalc object with the observations ungrouped\n   */\n  ungroup() {\n    return new DataCalc(this._observations);\n  }\n  /**\n   * Adds new variables to the observations based on the provided mutation options.\n   *\n   * @param mutations - An object where the keys are the names of the new variables\n   * and the values are functions that take an observation and return the value\n   * for the new variable.\n   * @returns A new DataCalc object with the new variables added to the observations.\n   *\n   * @example\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 0, b: 8, c: 3 },\n   *   { a: 9, b: 4, c: 7 },\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(\n   *   dc.mutate({ doubledA: (obs) => obs.a * 2 }).observations\n   * );\n   * // [ { a: 1, b: 2, c: 3, doubledA: 2 },\n   * //   { a: 0, b: 8, c: 3, doubledA: 0 },\n   * //   { a: 9, b: 4, c: 7, doubledA: 18 } ]\n   */\n  mutate(mutations) {\n    if (this._groups.length > 0) {\n      throw new M2Error(\n        `mutate() cannot be used on grouped data. The data are currently grouped by ${this._groups.join(\n          \", \"\n        )}. Ungroup the data first using ungroup().`\n      );\n    }\n    const newObservations = this._observations.map((observation) => {\n      let newObservation = { ...observation };\n      for (const [newVariable, transformFunction] of Object.entries(\n        mutations\n      )) {\n        newObservation = {\n          ...newObservation,\n          [newVariable]: transformFunction(observation)\n        };\n      }\n      return newObservation;\n    });\n    return new DataCalc(newObservations, { groups: this._groups });\n  }\n  /**\n   * Calculates summaries of the data.\n   *\n   * @param summarizations - An object where the keys are the names of the new\n   * variables and the values are `DataCalc` summary functions: `sum()`,\n   * `mean()`, `median()`, `variance()`, `sd()`, `min()`, `max()`, or `n()`.\n   * The summary functions take a variable name as a string, or alternatively,\n   * a value or array of values to summarize.\n   * @returns A new `DataCalc` object with the new summary variables.\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 0, b: 8, c: 3 },\n   *   { a: 9, b: 4, c: 7 },\n   *   { a: 5, b: 0, c: 7 },\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(\n   *   dc.summarize({\n   *     meanA: mean(\"a\"),\n   *     varA: variance(\"a\"),\n   *     totalB: sum(\"b\")\n   *   }).observations\n   * );\n   * // [ { meanA: 3.75, varA: 16.916666666666668, totalB: 14 } ]\n   *\n   * console.log(\n   *   dc.summarize({\n   *    filteredTotalC: sum(dc.filter(obs => obs.b > 2).pull(\"c\"))\n   *  }).observations\n   * );\n   * // [ { filteredTotalC: 10 } ]\n   * ```\n   */\n  summarize(summarizations) {\n    if (this._groups.length === 0) {\n      const obs = {};\n      for (const [newVariable, value] of Object.entries(summarizations)) {\n        if (typeof value === \"object\" && value !== null && \"summarizeFunction\" in value) {\n          const summarizeOperation = value;\n          obs[newVariable] = summarizeOperation.summarizeFunction(\n            this,\n            summarizeOperation.parameters,\n            summarizeOperation.options\n          );\n        } else {\n          obs[newVariable] = value;\n        }\n      }\n      return new DataCalc([obs], { groups: this._groups });\n    }\n    return this.summarizeByGroups(summarizations);\n  }\n  summarizeByGroups(summarizations) {\n    const groupMap = /* @__PURE__ */ new Map();\n    this._observations.forEach((obs) => {\n      const groupKey = this._groups.map(\n        (g) => typeof obs[g] === \"object\" ? JSON.stringify(obs[g]) : obs[g]\n      ).join(\"|\");\n      if (!groupMap.has(groupKey)) {\n        groupMap.set(groupKey, []);\n      }\n      const groupArray = groupMap.get(groupKey);\n      if (groupArray) {\n        groupArray.push(obs);\n      } else {\n        groupMap.set(groupKey, [obs]);\n      }\n    });\n    const summarizedObservations = [];\n    groupMap.forEach((groupObs, groupKey) => {\n      const groupValues = groupKey.split(\"|\");\n      const firstObs = groupObs[0];\n      const summaryObj = {};\n      this._groups.forEach((group, i) => {\n        const valueStr = groupValues[i];\n        const originalType = typeof firstObs[group];\n        if (originalType === \"number\") {\n          summaryObj[group] = Number(valueStr);\n        } else if (originalType === \"boolean\") {\n          summaryObj[group] = valueStr === \"true\";\n        } else if (valueStr.startsWith(\"{\") || valueStr.startsWith(\"[\")) {\n          try {\n            summaryObj[group] = JSON.parse(valueStr);\n          } catch {\n            throw new M2Error(\n              `Failed to parse group value ${valueStr} as JSON for group ${group}`\n            );\n          }\n        } else {\n          summaryObj[group] = valueStr;\n        }\n      });\n      const groupDataCalc = new DataCalc(groupObs);\n      for (const [newVariable, value] of Object.entries(summarizations)) {\n        if (typeof value === \"object\" && value !== null && \"summarizeFunction\" in value) {\n          const summarizeOperation = value;\n          summaryObj[newVariable] = summarizeOperation.summarizeFunction(\n            groupDataCalc,\n            summarizeOperation.parameters,\n            summarizeOperation.options\n          );\n        } else {\n          summaryObj[newVariable] = value;\n        }\n      }\n      summarizedObservations.push(summaryObj);\n    });\n    return new DataCalc(summarizedObservations, { groups: this._groups });\n  }\n  /**\n   * Selects specific variables to keep in the dataset.\n   * Variables prefixed with \"-\" will be excluded from the result.\n   *\n   * @param variables - Names of variables to select; prefix with '-' to exclude instead\n   * @returns A new DataCalc object with only the selected variables (minus excluded ones)\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3, d: 4 },\n   *   { a: 5, b: 6, c: 7, d: 8 }\n   * ];\n   * const dc = new DataCalc(d);\n   * // Keep a and c\n   * console.log(dc.select(\"a\", \"c\").observations);\n   * // [ { a: 1, c: 3 }, { a: 5, c: 7 } ]\n   * ```\n   */\n  select(...variables) {\n    const includeVars = [];\n    const excludeVars = [];\n    variables.forEach((variable) => {\n      if (variable.startsWith(\"-\")) {\n        excludeVars.push(variable.substring(1));\n      } else {\n        includeVars.push(variable);\n      }\n    });\n    const allVars = includeVars.length > 0 ? includeVars : Object.keys(this._observations[0] || {});\n    [...allVars, ...excludeVars].forEach((variable) => {\n      this.verifyObservationsContainVariable(variable);\n    });\n    const excludeSet = new Set(excludeVars);\n    const newObservations = this._observations.map((observation) => {\n      const newObservation = {};\n      if (includeVars.length > 0) {\n        includeVars.forEach((variable) => {\n          if (!excludeSet.has(variable)) {\n            newObservation[variable] = observation[variable];\n          }\n        });\n      } else {\n        Object.keys(observation).forEach((key) => {\n          if (!excludeSet.has(key)) {\n            newObservation[key] = observation[key];\n          }\n        });\n      }\n      return newObservation;\n    });\n    return new DataCalc(newObservations, { groups: this._groups });\n  }\n  /**\n   * Arranges (sorts) the observations based on one or more variables.\n   *\n   * @param variables - Names of variables to sort by, prefixed with '-' for descending order\n   * @returns A new DataCalc object with the observations sorted\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 5, b: 2 },\n   *   { a: 3, b: 7 },\n   *   { a: 5, b: 1 }\n   * ];\n   * const dc = new DataCalc(d);\n   * // Sort by a (ascending), then by b (descending)\n   * console.log(dc.arrange(\"a\", \"-b\").observations);\n   * // [ { a: 3, b: 7 }, { a: 5, b: 2 }, { a: 5, b: 1 } ]\n   * ```\n   */\n  arrange(...variables) {\n    if (this._groups.length > 0) {\n      throw new M2Error(\n        `arrange() cannot be used on grouped data. The data are currently grouped by ${this._groups.join(\n          \", \"\n        )}. Ungroup the data first using ungroup().`\n      );\n    }\n    const sortedObservations = [...this._observations].sort((a, b) => {\n      for (const variable of variables) {\n        let varName = variable;\n        let direction = 1;\n        if (variable.startsWith(\"-\")) {\n          varName = variable.substring(1);\n          direction = -1;\n        }\n        if (!(varName in a) || !(varName in b)) {\n          throw new M2Error(\n            `arrange(): variable ${varName} does not exist in all observations`\n          );\n        }\n        const aVal = a[varName];\n        const bVal = b[varName];\n        if (typeof aVal !== typeof bVal) {\n          return direction * (String(aVal) < String(bVal) ? -1 : 1);\n        }\n        if (aVal < bVal) return -1 * direction;\n        if (aVal > bVal) return 1 * direction;\n      }\n      return 0;\n    });\n    return new DataCalc(sortedObservations, { groups: this._groups });\n  }\n  /**\n   * Keeps only unique/distinct observations.\n   *\n   * @returns A new `DataCalc` object with only unique observations\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 1, b: 2, c: 3 }, // Duplicate\n   *   { a: 2, b: 3, c: 5 },\n   *   { a: 1, b: 2, c: { name: \"dog\" } },\n   *   { a: 1, b: 2, c: { name: \"dog\" } } // Duplicate with nested object\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(dc.distinct().observations);\n   * // [ { a: 1, b: 2, c: 3 }, { a: 2, b: 3, c: 5 }, { a: 1, b: 2, c: { name: \"dog\" } } ]\n   * ```\n   */\n  distinct() {\n    const seen = /* @__PURE__ */ new Set();\n    const uniqueObs = this._observations.filter((obs) => {\n      const key = JSON.stringify(this.normalizeForComparison(obs));\n      if (seen.has(key)) return false;\n      seen.add(key);\n      return true;\n    });\n    return new DataCalc(uniqueObs, { groups: this._groups });\n  }\n  /**\n   * Renames variables in the observations.\n   *\n   * @param renames - Object mapping new variable names to old variable names\n   * @returns A new DataCalc object with renamed variables\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2, c: 3 },\n   *   { a: 4, b: 5, c: 6 }\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(dc.rename({ x: 'a', z: 'c' }).observations);\n   * // [ { x: 1, b: 2, z: 3 }, { x: 4, b: 5, z: 6 } ]\n   * ```\n   */\n  rename(renames) {\n    if (this._observations.length === 0) {\n      throw new M2Error(\"Cannot rename variables on an empty dataset\");\n    }\n    Object.values(renames).forEach((oldName) => {\n      this.verifyObservationsContainVariable(oldName);\n    });\n    const newObservations = this._observations.map((observation) => {\n      const newObservation = {};\n      for (const [key, value] of Object.entries(observation)) {\n        const newKey = Object.entries(renames).find(\n          ([, old]) => old === key\n        )?.[0];\n        if (newKey) {\n          newObservation[newKey] = value;\n        } else if (!Object.values(renames).includes(key)) {\n          newObservation[key] = value;\n        }\n      }\n      return newObservation;\n    });\n    return new DataCalc(newObservations, { groups: this._groups });\n  }\n  /**\n   * Performs an inner join with another DataCalc object.\n   * Only rows with matching keys in both datasets are included.\n   *\n   * @param other - The other DataCalc object to join with\n   * @param by - The variables to join on\n   * @returns A new DataCalc object with joined observations\n   *\n   * @example\n   * ```js\n   * const d1 = [\n   *   { id: 1, x: 'a' },\n   *   { id: 2, x: 'b' },\n   *   { id: 3, x: 'c' }\n   * ];\n   * const d2 = [\n   *   { id: 1, y: 100 },\n   *   { id: 2, y: 200 },\n   *   { id: 4, y: 400 }\n   * ];\n   * const dc1 = new DataCalc(d1);\n   * const dc2 = new DataCalc(d2);\n   * console.log(dc1.innerJoin(dc2, [\"id\"]).observations);\n   * // [ { id: 1, x: 'a', y: 100 }, { id: 2, x: 'b', y: 200 } ]\n   * ```\n   */\n  innerJoin(other, by) {\n    if (this._groups.length > 0 || other._groups.length > 0) {\n      throw new M2Error(\n        `innerJoin() cannot be used on grouped data. Ungroup the data first using ungroup().`\n      );\n    }\n    by.forEach((key) => {\n      this.verifyObservationsContainVariable(key);\n      other.verifyObservationsContainVariable(key);\n    });\n    const rightMap = /* @__PURE__ */ new Map();\n    other.observations.forEach((obs) => {\n      if (this.hasNullJoinKeys(obs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(obs[k]))).join(\"|\");\n      const matches = rightMap.get(key) || [];\n      matches.push(obs);\n      rightMap.set(key, matches);\n    });\n    const result = [];\n    this._observations.forEach((leftObs) => {\n      if (this.hasNullJoinKeys(leftObs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(leftObs[k]))).join(\"|\");\n      const rightMatches = rightMap.get(key) || [];\n      if (rightMatches.length > 0) {\n        rightMatches.forEach((rightObs) => {\n          const joinedObs = { ...leftObs };\n          Object.entries(rightObs).forEach(([k, v]) => {\n            if (!by.includes(k)) {\n              joinedObs[k] = v;\n            }\n          });\n          result.push(joinedObs);\n        });\n      }\n    });\n    return new DataCalc(result);\n  }\n  /**\n   * Performs a left join with another DataCalc object.\n   * All rows from the left dataset are included, along with matching rows from the right.\n   *\n   * @param other - The other DataCalc object to join with\n   * @param by - The variables to join on\n   * @returns A new DataCalc object with joined observations\n   *\n   * @example\n   * ```js\n   * const d1 = [\n   *   { id: 1, x: 'a' },\n   *   { id: 2, x: 'b' },\n   *   { id: 3, x: 'c' }\n   * ];\n   * const d2 = [\n   *   { id: 1, y: 100 },\n   *   { id: 2, y: 200 }\n   * ];\n   * const dc1 = new DataCalc(d1);\n   * const dc2 = new DataCalc(d2);\n   * console.log(dc1.leftJoin(dc2, [\"id\"]).observations);\n   * // [ { id: 1, x: 'a', y: 100 }, { id: 2, x: 'b', y: 200 }, { id: 3, x: 'c' } ]\n   * ```\n   */\n  leftJoin(other, by) {\n    if (this._groups.length > 0 || other._groups.length > 0) {\n      throw new M2Error(\n        `leftJoin() cannot be used on grouped data. Ungroup the data first using ungroup().`\n      );\n    }\n    by.forEach((key) => {\n      this.verifyObservationsContainVariable(key);\n      other.verifyObservationsContainVariable(key);\n    });\n    const rightMap = /* @__PURE__ */ new Map();\n    other.observations.forEach((obs) => {\n      if (this.hasNullJoinKeys(obs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(obs[k]))).join(\"|\");\n      const matches = rightMap.get(key) || [];\n      matches.push(obs);\n      rightMap.set(key, matches);\n    });\n    const result = [];\n    this._observations.forEach((leftObs) => {\n      if (this.hasNullJoinKeys(leftObs, by)) {\n        result.push({ ...leftObs });\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(leftObs[k]))).join(\"|\");\n      const rightMatches = rightMap.get(key) || [];\n      if (rightMatches.length > 0) {\n        rightMatches.forEach((rightObs) => {\n          const joinedObs = { ...leftObs };\n          Object.entries(rightObs).forEach(([k, v]) => {\n            if (!by.includes(k)) {\n              joinedObs[k] = v;\n            }\n          });\n          result.push(joinedObs);\n        });\n      } else {\n        result.push({ ...leftObs });\n      }\n    });\n    return new DataCalc(result);\n  }\n  /**\n   * Performs a right join with another DataCalc object.\n   * All rows from the right dataset are included, along with matching rows from the left.\n   *\n   * @param other - The other DataCalc object to join with\n   * @param by - The variables to join on\n   * @returns A new DataCalc object with joined observations\n   *\n   * @example\n   * ```js\n   * const d1 = [\n   *   { id: 1, x: 'a' },\n   *   { id: 2, x: 'b' }\n   * ];\n   * const d2 = [\n   *   { id: 1, y: 100 },\n   *   { id: 2, y: 200 },\n   *   { id: 4, y: 400 }\n   * ];\n   * const dc1 = new DataCalc(d1);\n   * const dc2 = new DataCalc(d2);\n   * console.log(dc1.rightJoin(dc2, [\"id\"]).observations);\n   * // [ { id: 1, x: 'a', y: 100 }, { id: 2, x: 'b', y: 200 }, { id: 4, y: 400 } ]\n   * ```\n   */\n  rightJoin(other, by) {\n    if (this._groups.length > 0 || other._groups.length > 0) {\n      throw new M2Error(\n        `rightJoin() cannot be used on grouped data. Ungroup the data first using ungroup().`\n      );\n    }\n    by.forEach((key) => {\n      this.verifyObservationsContainVariable(key);\n      other.verifyObservationsContainVariable(key);\n    });\n    const rightMap = /* @__PURE__ */ new Map();\n    other.observations.forEach((obs) => {\n      if (this.hasNullJoinKeys(obs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(obs[k]))).join(\"|\");\n      const matches = rightMap.get(key) || [];\n      matches.push(obs);\n      rightMap.set(key, matches);\n    });\n    const result = [];\n    const processedRightKeys = /* @__PURE__ */ new Set();\n    this._observations.forEach((leftObs) => {\n      if (this.hasNullJoinKeys(leftObs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(leftObs[k]))).join(\"|\");\n      const rightMatches = rightMap.get(key) || [];\n      if (rightMatches.length > 0) {\n        rightMatches.forEach((rightObs) => {\n          const joinedObs = { ...leftObs };\n          Object.entries(rightObs).forEach(([k, v]) => {\n            if (!by.includes(k)) {\n              joinedObs[k] = v;\n            }\n          });\n          result.push(joinedObs);\n        });\n        processedRightKeys.add(key);\n      }\n    });\n    other.observations.forEach((rightObs) => {\n      if (this.hasNullJoinKeys(rightObs, by)) {\n        result.push({ ...rightObs });\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(rightObs[k]))).join(\"|\");\n      if (!processedRightKeys.has(key)) {\n        result.push({ ...rightObs });\n        processedRightKeys.add(key);\n      }\n    });\n    return new DataCalc(result);\n  }\n  /**\n   * Performs a full join with another DataCalc object.\n   * All rows from both datasets are included.\n   *\n   * @param other - The other DataCalc object to join with\n   * @param by - The variables to join on\n   * @returns A new DataCalc object with joined observations\n   *\n   * @example\n   * ```js\n   * const d1 = [\n   *   { id: 1, x: 'a' },\n   *   { id: 2, x: 'b' },\n   *   { id: 3, x: 'c' }\n   * ];\n   * const d2 = [\n   *   { id: 1, y: 100 },\n   *   { id: 2, y: 200 },\n   *   { id: 4, y: 400 }\n   * ];\n   * const dc1 = new DataCalc(d1);\n   * const dc2 = new DataCalc(d2);\n   * console.log(dc1.fullJoin(dc2, [\"id\"]).observations);\n   * // [\n   * //   { id: 1, x: 'a', y: 100 },\n   * //   { id: 2, x: 'b', y: 200 },\n   * //   { id: 3, x: 'c' },\n   * //   { id: 4, y: 400 }\n   * // ]\n   * ```\n   */\n  fullJoin(other, by) {\n    if (this._groups.length > 0 || other._groups.length > 0) {\n      throw new M2Error(\n        `fullJoin() cannot be used on grouped data. Ungroup the data first using ungroup().`\n      );\n    }\n    by.forEach((key) => {\n      this.verifyObservationsContainVariable(key);\n      other.verifyObservationsContainVariable(key);\n    });\n    const rightMap = /* @__PURE__ */ new Map();\n    other.observations.forEach((obs) => {\n      if (this.hasNullJoinKeys(obs, by)) {\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(obs[k]))).join(\"|\");\n      const matches = rightMap.get(key) || [];\n      matches.push(obs);\n      rightMap.set(key, matches);\n    });\n    const result = [];\n    const processedRightKeys = /* @__PURE__ */ new Set();\n    this._observations.forEach((leftObs) => {\n      if (this.hasNullJoinKeys(leftObs, by)) {\n        result.push({ ...leftObs });\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(leftObs[k]))).join(\"|\");\n      const rightMatches = rightMap.get(key) || [];\n      if (rightMatches.length > 0) {\n        rightMatches.forEach((rightObs) => {\n          const joinedObs = { ...leftObs };\n          Object.entries(rightObs).forEach(([k, v]) => {\n            if (!by.includes(k)) {\n              joinedObs[k] = v;\n            }\n          });\n          result.push(joinedObs);\n        });\n        processedRightKeys.add(key);\n      } else {\n        result.push({ ...leftObs });\n      }\n    });\n    other.observations.forEach((rightObs) => {\n      if (this.hasNullJoinKeys(rightObs, by)) {\n        result.push({ ...rightObs });\n        return;\n      }\n      const key = by.map((k) => JSON.stringify(this.normalizeForComparison(rightObs[k]))).join(\"|\");\n      if (!processedRightKeys.has(key)) {\n        result.push({ ...rightObs });\n        processedRightKeys.add(key);\n      }\n    });\n    return new DataCalc(result);\n  }\n  /**\n   * Slice observations by position.\n   *\n   * @param start - Starting position (0-based). Negative values count from\n   * the end.\n   * @param end - Ending position (exclusive)\n   * @returns A new DataCalc object with sliced observations\n   *\n   * @remarks If `end` is not provided, it will return a single observation at\n   * `start` position. If `start` is beyond the length of observations,\n   * it will return an empty DataCalc.\n   *\n   * @example\n   * ```js\n   * const d = [\n   *   { a: 1, b: 2 },\n   *   { a: 3, b: 4 },\n   *   { a: 5, b: 6 },\n   *   { a: 7, b: 8 }\n   * ];\n   * const dc = new DataCalc(d);\n   * console.log(dc.slice(1, 3).observations);\n   * // [ { a: 3, b: 4 }, { a: 5, b: 6 } ]\n   * console.log(dc.slice(0).observations);\n   * // [ { a: 1, b: 2 } ]\n   * ```\n   */\n  slice(start, end) {\n    if (this._groups.length > 0) {\n      throw new M2Error(\n        `slice() cannot be used on grouped data. Ungroup the data first using ungroup().`\n      );\n    }\n    let sliced;\n    if (start >= this._observations.length) {\n      return new DataCalc([], { groups: this._groups });\n    }\n    if (end === void 0) {\n      const index = start < 0 ? this._observations.length + start : start;\n      sliced = [this._observations[index]];\n    } else {\n      sliced = this._observations.slice(start, end);\n    }\n    return new DataCalc(sliced, { groups: this._groups });\n  }\n  /**\n   * Combines observations from two DataCalc objects by rows.\n   *\n   * @param other - The other DataCalc object to bind with\n   * @returns A new DataCalc object with combined observations\n   *\n   * @example\n   * ```js\n   * const d1 = [\n   *   { a: 1, b: 2 },\n   *   { a: 3, b: 4 }\n   * ];\n   * const d2 = [\n   *   { a: 5, b: 6 },\n   *   { a: 7, b: 8 }\n   * ];\n   * const dc1 = new DataCalc(d1);\n   * const dc2 = new DataCalc(d2);\n   * console.log(dc1.bindRows(dc2).observations);\n   * // [ { a: 1, b: 2 }, { a: 3, b: 4 }, { a: 5, b: 6 }, { a: 7, b: 8 } ]\n   * ```\n   */\n  bindRows(other) {\n    if (this._observations.length > 0 && other.observations.length > 0) {\n      const thisVariables = new Set(Object.keys(this._observations[0]));\n      const otherVariables = new Set(Object.keys(other.observations[0]));\n      const commonVariables = [...thisVariables].filter(\n        (variable) => otherVariables.has(variable)\n      );\n      commonVariables.forEach((variable) => {\n        const thisType = this.getVariableType(variable);\n        const otherType = other.getVariableType(variable);\n        if (thisType !== otherType) {\n          console.warn(\n            `Warning: bindRows() is combining datasets with different data types for variable '${variable}'. Left dataset has type '${thisType}' and right dataset has type '${otherType}'.`\n          );\n        }\n      });\n    }\n    return new DataCalc([...this._observations, ...other.observations]);\n  }\n  /**\n   * Helper method to determine the primary type of a variable across observations\n   * @internal\n   *\n   * @param variable - The variable name to check\n   * @returns The most common type for the variable or 'mixed' if no clear type exists\n   */\n  getVariableType(variable) {\n    if (this._observations.length === 0) {\n      return \"unknown\";\n    }\n    const typeCounts = {};\n    this._observations.forEach((obs) => {\n      if (variable in obs) {\n        const value = obs[variable];\n        const type = value === null ? \"null\" : Array.isArray(value) ? \"array\" : typeof value;\n        typeCounts[type] = (typeCounts[type] || 0) + 1;\n      }\n    });\n    let maxCount = 0;\n    let dominantType = \"unknown\";\n    for (const [type, count] of Object.entries(typeCounts)) {\n      if (count > maxCount) {\n        maxCount = count;\n        dominantType = type;\n      }\n    }\n    return dominantType;\n  }\n  /**\n   * Verifies that the variable exists in each observation in the data.\n   *\n   * @remarks Throws an error if the variable does not exist in each\n   * observation. This is not meant to be called by users of the library, but\n   * is used internally.\n   * @internal\n   *\n   * @param variable - The variable to check for\n   */\n  verifyObservationsContainVariable(variable) {\n    if (!this._observations.every((observation) => variable in observation)) {\n      throw new M2Error(\n        `Variable ${variable} does not exist for each item (row) in the data array.`\n      );\n    }\n  }\n  /**\n   * Checks if the variable exists for at least one observation in the data.\n   *\n   * @remarks This is not meant to be called by users of the library, but\n   * is used internally.\n   * @internal\n   *\n   * @param variable - The variable to check for\n   * @returns true if the variable exists in at least one observation, false\n   * otherwise\n   */\n  variableExists(variable) {\n    return this._observations.some((observation) => variable in observation);\n  }\n  /**\n   * Checks if a value is a non-missing numeric value.\n   *\n   * @remarks A non-missing numeric value is a value that is a number and is\n   * not NaN or infinite.\n   *\n   * @param value - The value to check\n   * @returns true if the value is a non-missing numeric value, false otherwise\n   */\n  isNonMissingNumeric(value) {\n    return typeof value === \"number\" && !isNaN(value) && isFinite(value);\n  }\n  /**\n   * Checks if a value is a missing numeric value.\n   *\n   * @remarks A missing numeric value is a number that is NaN or infinite, or any\n   * value that is null or undefined. Thus, a null or undefined value is\n   * considered to be a missing numeric value.\n   *\n   * @param value - The value to check\n   * @returns true if the value is a missing numeric value, false otherwise\n   */\n  isMissingNumeric(value) {\n    return typeof value === \"number\" && (isNaN(value) || !isFinite(value)) || value === null || typeof value === \"undefined\";\n  }\n  /**\n   * Normalizes an object for stable comparison by sorting keys\n   * @internal\n   *\n   * @remarks Normalizing is needed to handle situations where objects have the\n   * same properties but in different orders because we are using\n   * JSON.stringify() for comparison.\n   */\n  normalizeForComparison(obj) {\n    if (obj === null || typeof obj !== \"object\") {\n      return obj;\n    }\n    if (Array.isArray(obj)) {\n      return obj.map((item) => this.normalizeForComparison(item));\n    }\n    return Object.keys(obj).sort().reduce((result, key) => {\n      result[key] = this.normalizeForComparison(obj[key]);\n      return result;\n    }, {});\n  }\n  /**\n   * Creates a deep copy of an object.\n   * @internal\n   *\n   * @remarks We create a deep copy of the object, in our case an instance\n   * of `DataCalc`, to ensure that we are working with a new object\n   * without any references to the original object. This is important\n   * to avoid unintended side effects when modifying an object.\n   *\n   * @param source - object to copy\n   * @param map - map of objects that have already been copied\n   * @returns a deep copy of the object\n   */\n  deepCopy(source, map = /* @__PURE__ */ new WeakMap()) {\n    if (source === null || typeof source !== \"object\") {\n      return source;\n    }\n    if (map.has(source)) {\n      return map.get(source);\n    }\n    const copy = Array.isArray(source) ? [] : Object.create(Object.getPrototypeOf(source));\n    map.set(source, copy);\n    const keys = [\n      ...Object.getOwnPropertyNames(source),\n      ...Object.getOwnPropertySymbols(source)\n    ];\n    for (const key of keys) {\n      const descriptor = Object.getOwnPropertyDescriptor(\n        source,\n        key\n      );\n      if (descriptor) {\n        Object.defineProperty(copy, key, {\n          ...descriptor,\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          value: this.deepCopy(source[key], map)\n        });\n      }\n    }\n    return copy;\n  }\n  /**\n   * Checks if an observation has null or undefined values in any of the join columns.\n   * @internal\n   *\n   * @param obs - The observation to check\n   * @param keys - The join columns to check\n   * @returns true if any join column has a null or undefined value\n   */\n  hasNullJoinKeys(obs, keys) {\n    return keys.some((key) => obs[key] === null || obs[key] === void 0);\n  }\n}\n\nconst DEFAULT_SUMMARIZE_OPTIONS = {\n  coerceBooleans: true,\n  skipMissing: false\n};\nfunction applyDefaultOptions(options) {\n  return { ...DEFAULT_SUMMARIZE_OPTIONS, ...options };\n}\nfunction processNumericValues(dataCalc, variable, options, collector, errorPrefix, initialState) {\n  const mergedOptions = applyDefaultOptions(options);\n  dataCalc.verifyObservationsContainVariable(variable);\n  let count = 0;\n  let state = initialState;\n  let containsMissing = false;\n  dataCalc.observations.forEach((o) => {\n    if (dataCalc.isNonMissingNumeric(o[variable])) {\n      state = collector(o[variable], state);\n      count++;\n      return;\n    }\n    if (typeof o[variable] === \"boolean\" && mergedOptions.coerceBooleans) {\n      state = collector(o[variable] ? 1 : 0, state);\n      count++;\n      return;\n    }\n    if (dataCalc.isMissingNumeric(o[variable])) {\n      containsMissing = true;\n      return;\n    }\n    throw new M2Error(\n      `${errorPrefix}: variable ${variable} has non-numeric value ${o[variable]} in this observation: ${JSON.stringify(o)}`\n    );\n  });\n  return { state, count, containsMissing };\n}\nfunction processDirectValues(values, options, collector, errorPrefix, initialState) {\n  const mergedOptions = applyDefaultOptions(options);\n  let state = initialState;\n  let count = 0;\n  let containsMissing = false;\n  for (const value of values) {\n    if (typeof value === \"number\" && !isNaN(value) && isFinite(value)) {\n      state = collector(value, state);\n      count++;\n    } else if (typeof value === \"boolean\" && mergedOptions.coerceBooleans) {\n      state = collector(value ? 1 : 0, state);\n      count++;\n    } else if (value === null || value === void 0 || typeof value === \"number\" && (isNaN(value) || !isFinite(value))) {\n      containsMissing = true;\n    } else {\n      throw new M2Error(`${errorPrefix}: has non-numeric value ${value}`);\n    }\n  }\n  return { state, count, containsMissing };\n}\nfunction processSingleValue(value, options, errorPrefix) {\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof value === \"number\" && !isNaN(value) && isFinite(value)) {\n    return { value, isMissing: false };\n  } else if (typeof value === \"boolean\" && mergedOptions.coerceBooleans) {\n    return { value: value ? 1 : 0, isMissing: false };\n  } else if (value === null || value === void 0 || typeof value === \"number\" && (isNaN(value) || !isFinite(value))) {\n    return { value: 0, isMissing: true };\n  } else {\n    throw new M2Error(`${errorPrefix}: has non-numeric value ${value}`);\n  }\n}\nconst nInternal = (dataCalc) => {\n  return dataCalc.length;\n};\nfunction n() {\n  return {\n    summarizeFunction: nInternal,\n    parameters: []\n  };\n}\nconst sumInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    const result = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, sum2) => sum2 + value,\n      \"sum()\",\n      0\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else if (Array.isArray(variableOrValues)) {\n    const result = processDirectValues(\n      variableOrValues,\n      options,\n      (value, sum2) => sum2 + value,\n      \"sum()\",\n      0\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else {\n    const result = processSingleValue(variableOrValues, options, \"sum()\");\n    if (result.isMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    return result.isMissing ? null : result.value;\n  }\n};\nfunction sum(variableOrValues, options) {\n  return {\n    summarizeFunction: sumInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst meanInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    const result = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, sum2) => sum2 + value,\n      \"mean()\",\n      0\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state / result.count;\n  } else if (Array.isArray(variableOrValues)) {\n    const result = processDirectValues(\n      variableOrValues,\n      options,\n      (value, sum2) => sum2 + value,\n      \"mean()\",\n      0\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state / result.count;\n  } else {\n    const result = processSingleValue(variableOrValues, options, \"mean()\");\n    return result.isMissing && !mergedOptions.skipMissing ? null : result.value;\n  }\n};\nfunction mean(variableOrValues, options) {\n  return {\n    summarizeFunction: meanInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst varianceInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    const meanResult = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, sum2) => sum2 + value,\n      \"variance()\",\n      0\n    );\n    if (meanResult.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (meanResult.count <= 1) {\n      return null;\n    }\n    const meanValue = meanResult.state / meanResult.count;\n    const varianceResult = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, sum2) => {\n        const actualValue = typeof value === \"boolean\" && mergedOptions.coerceBooleans ? value ? 1 : 0 : value;\n        return sum2 + Math.pow(actualValue - meanValue, 2);\n      },\n      \"variance()\",\n      0\n    );\n    return varianceResult.state / (meanResult.count - 1);\n  } else if (Array.isArray(variableOrValues)) {\n    const validValues = [];\n    let containsMissing = false;\n    for (const value of variableOrValues) {\n      if (typeof value === \"number\" && !isNaN(value) && isFinite(value)) {\n        validValues.push(value);\n      } else if (typeof value === \"boolean\" && mergedOptions.coerceBooleans) {\n        validValues.push(value ? 1 : 0);\n      } else if (value === null || value === void 0 || typeof value === \"number\" && (isNaN(value) || !isFinite(value))) {\n        containsMissing = true;\n      } else {\n        throw new M2Error(`variance(): has non-numeric value ${value}`);\n      }\n    }\n    if (containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (validValues.length <= 1) {\n      return null;\n    }\n    const sum2 = validValues.reduce((acc, val) => acc + val, 0);\n    const mean2 = sum2 / validValues.length;\n    const sumSquaredDiffs = validValues.reduce(\n      (acc, val) => acc + Math.pow(val - mean2, 2),\n      0\n    );\n    return sumSquaredDiffs / (validValues.length - 1);\n  } else {\n    return null;\n  }\n};\nfunction variance(variableOrValues, options) {\n  return {\n    summarizeFunction: varianceInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst minInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    const result = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, min2) => min2 === Number.POSITIVE_INFINITY || value < min2 ? value : min2,\n      \"min()\",\n      Number.POSITIVE_INFINITY\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else if (Array.isArray(variableOrValues)) {\n    const result = processDirectValues(\n      variableOrValues,\n      options,\n      (value, min2) => min2 === Number.POSITIVE_INFINITY || value < min2 ? value : min2,\n      \"min()\",\n      Number.POSITIVE_INFINITY\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else {\n    const result = processSingleValue(variableOrValues, options, \"min()\");\n    if (result.isMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    return result.isMissing ? null : result.value;\n  }\n};\nfunction min(variableOrValues, options) {\n  return {\n    summarizeFunction: minInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst maxInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    const result = processNumericValues(\n      dataCalc,\n      variable,\n      options,\n      (value, max2) => max2 === Number.NEGATIVE_INFINITY || value > max2 ? value : max2,\n      \"max()\",\n      Number.NEGATIVE_INFINITY\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else if (Array.isArray(variableOrValues)) {\n    const result = processDirectValues(\n      variableOrValues,\n      options,\n      (value, max2) => max2 === Number.NEGATIVE_INFINITY || value > max2 ? value : max2,\n      \"max()\",\n      Number.NEGATIVE_INFINITY\n    );\n    if (result.containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (result.count === 0) {\n      return null;\n    }\n    return result.state;\n  } else {\n    const result = processSingleValue(variableOrValues, options, \"max()\");\n    if (result.isMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    return result.isMissing ? null : result.value;\n  }\n};\nfunction max(variableOrValues, options) {\n  return {\n    summarizeFunction: maxInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst medianInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  const mergedOptions = applyDefaultOptions(options);\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const variable = variableOrValues;\n    dataCalc.verifyObservationsContainVariable(variable);\n    const values = [];\n    let containsMissing = false;\n    dataCalc.observations.forEach((o) => {\n      if (dataCalc.isNonMissingNumeric(o[variable])) {\n        values.push(o[variable]);\n      } else if (typeof o[variable] === \"boolean\" && mergedOptions.coerceBooleans) {\n        values.push(o[variable] ? 1 : 0);\n      } else if (dataCalc.isMissingNumeric(o[variable])) {\n        containsMissing = true;\n      } else {\n        throw new M2Error(\n          `median(): variable ${variable} has non-numeric value ${o[variable]} in this observation: ${JSON.stringify(o)}`\n        );\n      }\n    });\n    if (containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (values.length === 0) {\n      return null;\n    }\n    values.sort((a, b) => a - b);\n    const mid = Math.floor(values.length / 2);\n    if (values.length % 2 === 0) {\n      return (values[mid - 1] + values[mid]) / 2;\n    } else {\n      return values[mid];\n    }\n  } else if (Array.isArray(variableOrValues)) {\n    const values = [];\n    let containsMissing = false;\n    for (const value of variableOrValues) {\n      if (typeof value === \"number\" && !isNaN(value) && isFinite(value)) {\n        values.push(value);\n      } else if (typeof value === \"boolean\" && mergedOptions.coerceBooleans) {\n        values.push(value ? 1 : 0);\n      } else if (value === null || value === void 0 || typeof value === \"number\" && (isNaN(value) || !isFinite(value))) {\n        containsMissing = true;\n      } else {\n        throw new M2Error(`median(): has non-numeric value ${value}`);\n      }\n    }\n    if (containsMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    if (values.length === 0) {\n      return null;\n    }\n    values.sort((a, b) => a - b);\n    const mid = Math.floor(values.length / 2);\n    if (values.length % 2 === 0) {\n      return (values[mid - 1] + values[mid]) / 2;\n    } else {\n      return values[mid];\n    }\n  } else {\n    const result = processSingleValue(variableOrValues, options, \"median()\");\n    if (result.isMissing && !mergedOptions.skipMissing) {\n      return null;\n    }\n    return result.isMissing ? null : result.value;\n  }\n};\nfunction median(variableOrValues, options) {\n  return {\n    summarizeFunction: medianInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\nconst sdInternal = (dataCalc, params, options) => {\n  const variableOrValues = params[0];\n  if (typeof variableOrValues === \"string\") {\n    if (!dataCalc.variableExists(variableOrValues)) {\n      return null;\n    }\n    const varianceValue = varianceInternal(dataCalc, params, options);\n    if (varianceValue === null) {\n      return null;\n    }\n    return Math.sqrt(varianceValue);\n  } else if (Array.isArray(variableOrValues)) {\n    const newParams = [...params];\n    const varianceValue = varianceInternal(dataCalc, newParams, options);\n    if (varianceValue === null) {\n      return null;\n    }\n    return Math.sqrt(varianceValue);\n  } else {\n    return null;\n  }\n};\nfunction sd(variableOrValues, options) {\n  return {\n    summarizeFunction: sdInternal,\n    parameters: [variableOrValues],\n    options\n  };\n}\n\nconsole.log(\"\\u26AA @m2c2kit/data-calc version 0.8.2 (62ccf312)\");\n\nexport { DataCalc, max, mean, median, min, n, sd, sum, variance };\n//# sourceMappingURL=index.js.map\n","import {\n  Game,\n  Action,\n  Scene,\n  Shape,\n  Label,\n  Transition,\n  TransitionDirection,\n  WebColors,\n  RandomDraws,\n  GameParameters,\n  GameOptions,\n  TrialSchema,\n  Timer,\n  Sprite,\n  Easings,\n  Constants,\n  Translation,\n  ScoringProvider,\n  ActivityKeyValueData,\n  ScoringSchema,\n  M2Error,\n} from \"@m2c2kit/core\";\nimport {\n  Button,\n  Grid,\n  Instructions,\n  CountdownScene,\n  LocalePicker,\n  InstructionsOptions,\n} from \"@m2c2kit/addons\";\nimport { DataCalc, median } from \"@m2c2kit/data-calc\";\n\n/**\n * Symbol Search is a speeded continuous performance test of conjunctive\n * feature search in which respondents identify matching symbol pairs as\n * quickly and as accurately as they can.\n */\nclass SymbolSearch extends Game implements ScoringProvider {\n  constructor() {\n    /**\n     * These are configurable game parameters and their defaults.\n     * Each game parameter should have a type, default (this is the default\n     * value), and a description.\n     */\n    const defaultParameters: GameParameters = {\n      number_of_top_pairs: {\n        default: 3,\n        type: \"integer\",\n        enum: [1, 2, 3, 4],\n        description: \"Number of pairs to be shown on top. (1-4)\",\n      },\n      lure_percent: {\n        default: 0.5,\n        type: \"number\",\n        description:\n          \"Percentage of lure trials. Number from 0 to 1. A lure trial is \\\nwhen the incorrect symbol pair on the bottom contains exactly one symbol \\\nthat is found on the top.(1 unique symbol). A non-lure trial is when the \\\nincorrect symbol pair contains exactly zero symbols that match the \\\ntop. (2 unique symbols.)\",\n      },\n      lure_position_on_card: {\n        default: \"either\",\n        type: \"string\",\n        enum: [\"top\", \"bottom\", \"either\"],\n        description:\n          \"If a lure trial, must the lure symbol occupy the top position \\\non the the card, the bottom, or either? If either, then the lure symbol \\\nwill be equally distributed across trials to be in the top and bottom \\\npositions.\",\n      },\n      left_correct_percent: {\n        default: 0.5,\n        type: \"number\",\n        description:\n          \"Percentage of trials where the left pair is the correct answer. Number from 0 to 1.\",\n      },\n      countdown_duration_ms: {\n        default: 3000,\n        type: \"number\",\n        description:\n          \"Duration of the countdown phase, milliseconds. Multiples of 1000 recommended.\",\n      },\n      after_countdown_transition_duration_ms: {\n        default: 500,\n        type: \"number\",\n        description:\n          \"Duration, in milliseconds, of the slide in animation after the countdown phase.\",\n      },\n      number_of_trials: {\n        default: 5,\n        type: \"integer\",\n        description: \"How many trials to run.\",\n      },\n      interstimulus_animation: {\n        default: true,\n        type: \"boolean\",\n        description: \"Should new trials slide in from right to left?\",\n      },\n      interstimulus_interval_duration_ms: {\n        default: 500,\n        type: \"number\",\n        description:\n          \"If interstimulus_animation == true, the duration, in milliseconds, of the slide in animation after each trial. Otherwise, the duration, in milliseconds, to wait after a trial has been completed until a new trial appears.\",\n      },\n      instruction_type: {\n        default: \"long\",\n        type: \"string\",\n        enum: [\"short\", \"long\"],\n        description: \"Type of instructions to show, 'short' or 'long'.\",\n      },\n      instructions: {\n        default: null,\n        type: [\"object\", \"null\"],\n        description:\n          \"When non-null, an InstructionsOptions object that will completely override the built-in instructions.\",\n      },\n      show_trials_complete_scene: {\n        default: true,\n        type: \"boolean\",\n        description:\n          \"After the final trial, should a completion scene be shown? Otherwise, the game will immediately end.\",\n      },\n      show_quit_button: {\n        type: \"boolean\",\n        default: false,\n        description: \"Should the activity quit button be shown?\",\n      },\n      show_fps: {\n        type: \"boolean\",\n        default: false,\n        description: \"Should the FPS be shown?\",\n      },\n      show_locale_picker: {\n        type: \"boolean\",\n        default: false,\n        description:\n          \"Should the icon that allows the participant to switch the locale be shown?\",\n      },\n      scoring: {\n        type: \"boolean\",\n        default: false,\n        description: \"Should scoring data be generated? Default is false.\",\n      },\n      scoring_filter_response_time_duration_ms: {\n        type: \"array\",\n        items: {\n          type: \"number\",\n        },\n        default: [100, 10000],\n        description:\n          \"When scoring, values of response_time_duration_ms less than the lower bound or greater than the upper bound are discarded. This array contains two numbers, the lower and upper bounds.\",\n      },\n    };\n\n    /**\n     * This describes all the data that will be generated by the assessment.\n     * At runtime, when a trial completes, the data will be returned to the\n     * session with a callback, along with this schema transformed into\n     * JSON Schema.\n     */\n    const symbolSearchTrialSchema: TrialSchema = {\n      activity_begin_iso8601_timestamp: {\n        type: \"string\",\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the game activity.\",\n      },\n      trial_begin_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the trial. Null if trial was skipped.\",\n      },\n      trial_end_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the end of the trial (when user selects a card). Null if trial was skipped.\",\n      },\n      trial_index: {\n        type: [\"integer\", \"null\"],\n        description: \"Index of the trial within this assessment, 0-based.\",\n      },\n      trial_type: {\n        type: [\"string\", \"null\"],\n        enum: [\"normal\", \"lure\", null],\n        description:\n          \"Indicates if trial was normal or lure. Null if trial was skipped.\",\n      },\n      card_configuration: {\n        type: [\"object\", \"null\"],\n        description: \"Symbols used on cards. Null if trial was skipped.\",\n        properties: {\n          top_cards_symbols: {\n            type: \"array\",\n            description:\n              \"Symbols of the top cards, starting at 0 for leftmost upper card and incrementing by 1 moving right.\",\n            items: {\n              type: \"object\",\n              properties: {\n                top: {\n                  type: \"integer\",\n                  description:\n                    \"Index of the top symbol within the card, 1-based.\",\n                },\n                bottom: {\n                  type: \"integer\",\n                  description:\n                    \"Index of the bottom symbol within the card, 1-based.\",\n                },\n              },\n            },\n          },\n          bottom_cards_symbols: {\n            type: \"array\",\n            description:\n              \"Symbols of the bottom cards, starting at 0 for leftmost card and incrementing by 1 moving right.\",\n            items: {\n              type: \"object\",\n              properties: {\n                top: {\n                  type: \"integer\",\n                  description:\n                    \"Index of the top symbol within the card, 1-based.\",\n                },\n                bottom: {\n                  type: \"integer\",\n                  description:\n                    \"Index of the bottom symbol within the card, 1-based.\",\n                },\n              },\n            },\n          },\n        },\n      },\n      response_time_duration_ms: {\n        type: [\"number\", \"null\"],\n        description:\n          \"Milliseconds from the beginning of the trial until a user taps a response. Null if trial was skipped.\",\n      },\n      user_response_index: {\n        type: [\"integer\", \"null\"],\n        description:\n          \"Index of user selected response, starting at 0 for leftmost card and incrementing by 1 moving right. Null if trial was skipped.\",\n      },\n      correct_response_index: {\n        type: [\"integer\", \"null\"],\n        description:\n          \"Index of correct response, starting at 0 for leftmost card and incrementing by 1 moving right. Null if trial was skipped.\",\n      },\n      quit_button_pressed: {\n        type: \"boolean\",\n        description: \"Was the quit button pressed?\",\n      },\n    };\n\n    const symbolSearchScoringSchema: ScoringSchema = {\n      activity_begin_iso8601_timestamp: {\n        type: \"string\",\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the game activity.\",\n      },\n      first_trial_begin_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the beginning of the first trial. Null if no trials were completed.\",\n      },\n      last_trial_end_iso8601_timestamp: {\n        type: [\"string\", \"null\"],\n        format: \"date-time\",\n        description:\n          \"ISO 8601 timestamp at the end of the last trial. Null if no trials were completed.\",\n      },\n      n_trials: {\n        type: \"integer\",\n        description: \"Number of trials completed.\",\n      },\n      n_trials_lure: {\n        type: \"integer\",\n        description: \"Number of lure trials completed.\",\n      },\n      n_trials_normal: {\n        type: \"integer\",\n        description: \"Number of normal trials completed.\",\n      },\n      flag_trials_match_expected: {\n        type: \"integer\",\n        description:\n          \"Does the number of completed and expected trials match? 1 = true, 0 = false.\",\n      },\n      n_trials_correct: {\n        type: \"integer\",\n        description: \"Number of correct trials.\",\n      },\n      n_trials_incorrect: {\n        type: \"integer\",\n        description: \"Number of incorrect trials.\",\n      },\n      median_response_time_overall: {\n        type: [\"number\", \"null\"],\n        description: \"Median response time for all trials.\",\n      },\n      median_response_time_filtered: {\n        type: [\"number\", \"null\"],\n        description:\n          \"Median response time for trials within the specified filter response time filter.\",\n      },\n      response_time_filter_lower_bound: {\n        type: \"number\",\n        description:\n          \"Response times less than this lower bound were discarded when calculating filtered response times.\",\n      },\n      response_time_filter_upper_bound: {\n        type: \"number\",\n        description:\n          \"Response times greater than this upper bound were discarded when calculating filtered response times.\",\n      },\n      median_response_time_correct: {\n        type: [\"number\", \"null\"],\n        description: \"Median response time for correct trials.\",\n      },\n      median_response_time_incorrect: {\n        type: [\"number\", \"null\"],\n        description: \"Median response time for incorrect trials.\",\n      },\n    };\n\n    const translation: Translation = {\n      configuration: {\n        baseLocale: \"en-US\",\n      },\n      \"en-US\": {\n        localeName: \"English\",\n        INSTRUCTIONS_TITLE: \"Symbol Search\",\n        SHORT_INSTRUCTIONS_TEXT_PAGE_1:\n          \"Goal: Touch the set on the bottom that is exactly the same as a set above, as fast and accurately as you can\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"You will see sets of symbols on the top and bottom of the screen.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"When prompted, touch the set on the bottom that is exactly the same as a set above.\",\n        INSTRUCTIONS_TEXT_PAGE_3: \"Please be as fast and accurate as you can.\",\n        START_BUTTON_TEXT: \"START\",\n        NEXT_BUTTON_TEXT: \"Next\",\n        BACK_BUTTON_TEXT: \"Back\",\n        GET_READY_COUNTDOWN_TEXT: \"GET READY!\",\n        WHICH_MATCHES_TEXT: \"Which of these matches a pair above?\",\n        OR_TEXT: \"or\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"This activity is complete.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      // cSpell:disable (for VS Code extension, Code Spell Checker)\n      \"es-MX\": {\n        localeName: \"Espaol\",\n        INSTRUCTIONS_TITLE: \"Bsqueda de Smbolos\",\n        // Short instructions need to be translated.\n        //SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"Vers series de smbolos en la parte de arriba y abajo de la pantalla.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"Cuando se le solicite, toque el grupo en la parte de abajo que es exactamente igual a un grupo de arriba.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Por favor, sea tan rpido y preciso como pueda.\",\n        START_BUTTON_TEXT: \"COMENZAR\",\n        NEXT_BUTTON_TEXT: \"Siguiente\",\n        BACK_BUTTON_TEXT: \"Atrs\",\n        GET_READY_COUNTDOWN_TEXT: \"PREPRESE\",\n        WHICH_MATCHES_TEXT: \"Cul de estos coincide con un par anterior?\",\n        OR_TEXT: \"o\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Esta actividad est completa.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      \"fr-FR\": {\n        localeName: \"Franais\",\n        INSTRUCTIONS_TITLE: \"Recherche de Symboles\",\n        // Short instructions need to be translated.\n        // SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"Vous verrez des ensembles de symboles en haut et en bas de l'cran.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"Lorsqu'on vous le demandera, touchez le groupe en bas qui est exactement le mme qu'un groupe ci-dessus.\",\n        INSTRUCTIONS_TEXT_PAGE_3: \"Soyez aussi rapide et prcis que possible.\",\n        START_BUTTON_TEXT: \"DMARRER\",\n        NEXT_BUTTON_TEXT: \"Suivant\",\n        BACK_BUTTON_TEXT: \"Retour\",\n        GET_READY_COUNTDOWN_TEXT: \"PRPAREZ-VOUS\",\n        WHICH_MATCHES_TEXT:\n          \"Lequel de ces lments correspond  une paire ci-dessus ?\",\n        OR_TEXT: \"ou\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Cette activit est termine.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      \"de-DE\": {\n        localeName: \"Deutsch\",\n        INSTRUCTIONS_TITLE: \"Symbol-bereinstimmungs\",\n        // Short instructions need to be translated.\n        // SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1: \"Oben und unten sehen Sie Symbolpaare.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"Ihre Aufgabe wird es sein, auf dasjenige untere Paar zu tippen, welches mit einem der obigen Paare exakt bereinstimmt.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Versuchen Sie bitte, so schnell und korrekt wie mglich zu sein.\",\n        START_BUTTON_TEXT: \"START\",\n        NEXT_BUTTON_TEXT: \"Weiter\",\n        BACK_BUTTON_TEXT: \"Vorherige\",\n        GET_READY_COUNTDOWN_TEXT: \"BEREIT MACHEN\",\n        WHICH_MATCHES_TEXT:\n          \"Welches dieser beiden stimmt mit einem der obigen Paare berein?\",\n        OR_TEXT: \"oder\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Die Aufgabe ist beendet.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      \"it-IT\": {\n        localeName: \"Italiano\",\n        INSTRUCTIONS_TITLE: \"Ricerca di simboli\",\n        SHORT_INSTRUCTIONS_TEXT_PAGE_1:\n          \"Obiettivo: Tocca il pi velocemente e accuratamente possibile il gruppo in basso che  esattamente uguale al gruppo in alto.\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"Vedrai gruppi di simboli nella parte alta e nella parte bassa del tuo schermo.\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"Quando richiesto, tocca il gruppo in basso che  esattamente uguale al gruppo in alto.\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"Per favore, cerca di essere il pi veloce ed accurato possibile.\",\n        START_BUTTON_TEXT: \"INIZIA\",\n        NEXT_BUTTON_TEXT: \"Avanti\",\n        BACK_BUTTON_TEXT: \"Indietro\",\n        GET_READY_COUNTDOWN_TEXT: \"PREPARATI!\",\n        WHICH_MATCHES_TEXT: \"Quali di questi corrisponde al gruppo in alto?\",\n        OR_TEXT: \"oppure\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"Attivit completata.\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"OK\",\n      },\n      \"jp-JP\": {\n        localeName: \"Japanese\",\n        localeSvg: {\n          svgString:\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 396.43 133.77\"><path d=\"M0 9.22h93.45v121.25H83.37v-8.64H9.94v9.5H0zm83.37 9.79H9.94v41.33h73.44V19.01ZM9.94 112.03h73.44V69.84H9.94zM247.82 40.9h-52.56c12.38 25.63 33.98 49.39 57.46 60.62-2.45 2.02-5.62 5.76-7.34 8.5-22.61-12.24-43.06-35.28-56.3-61.34v47.23h28.8v9.79h-28.8v27.94H179V105.7h-29.23v-9.79H179V48.97c-13.68 26.06-34.27 48.67-56.02 61.34-1.73-2.45-4.75-6.05-6.91-7.92 22.61-11.66 44.21-35.85 56.74-61.49h-51.98v-9.79h58.18V0l12.96.72c-.14 1.01-.86 1.73-2.88 2.02v28.37h58.75v9.79Zm13.25-8.21v-8.21h52.85v8.21zm48.24 51.69v42.34h-33.12v6.77h-8.5v-49.1h41.62Zm-.43-39.74v7.92h-41.04v-7.92zm-41.04 27.79v-7.92h41.04v7.92zm40.61-67.39v7.92h-39.74V5.04zm-7.78 87.55h-24.48v25.92h24.48zm81.36-31.97h14.4v8.78h-82.08v-8.78h19.73c1.3-6.34 2.74-13.82 4.18-21.74h-15.84v-8.64h17.28c.86-5.47 1.73-11.09 2.59-16.13h-22.75V5.47h71.57v8.64h-39.46l-2.45 16.13h32.83zm-56.3 73.15V81.35h60.62v51.55h-9.36v-5.76h-42.05v6.62h-9.22Zm51.26-43.63h-42.05v28.08h42.05zm-4.32-51.26h-24.91c-1.3 7.78-2.74 15.41-4.03 21.74h28.94z\"/></svg>',\n          width: 65,\n          height: 22,\n        },\n        fontName: \"noto-sans-japanese\",\n        INSTRUCTIONS_TITLE: \"\",\n        // Short instructions need to be translated.\n        // SHORT_INSTRUCTIONS_TEXT_PAGE_1: \"\",\n        INSTRUCTIONS_TEXT_PAGE_1:\n          \"\",\n        INSTRUCTIONS_TEXT_PAGE_2:\n          \"\",\n        INSTRUCTIONS_TEXT_PAGE_3:\n          \"\",\n        START_BUTTON_TEXT: \"\",\n        NEXT_BUTTON_TEXT: \"\",\n        BACK_BUTTON_TEXT: \"\",\n        // Other locales use 50, but jp-JP uses 40 to fit on one line.\n        GET_READY_COUNTDOWN_TEXT: { text: \"\", fontSize: 40 },\n        WHICH_MATCHES_TEXT: \"\",\n        OR_TEXT: \"\",\n        TRIALS_COMPLETE_SCENE_TEXT: \"\",\n        TRIALS_COMPLETE_SCENE_BUTTON_TEXT: \"\",\n      },\n      // cSpell:enable\n    };\n\n    const symbol_image_size = 160;\n\n    const options: GameOptions = {\n      name: \"Symbol Search\",\n      /**\n       * This id must match the property m2c2kit.assessmentId in package.json\n       */\n      id: \"symbol-search\",\n      publishUuid: \"400ad833-3037-4738-8ad8-c54e07c46896\",\n      version: \"__PACKAGE_JSON_VERSION__\",\n      moduleMetadata: Constants.MODULE_METADATA_PLACEHOLDER,\n      translation: translation,\n      shortDescription:\n        \"Symbol Search is a speeded continuous performance test of \\\nconjunctive feature search in which respondents identify matching symbol \\\npairs as quickly and as accurately as they can.\",\n      longDescription:\n        // cSpell:disable\n        'On each trial of the symbol search task, participants saw a row of \\\nthree symbol pairs at the top of the screen and were presented with two \\\nsymbol pairs at the bottom of the screen. Stimuli were presented until a \\\nresponse was provided there was an interval of 200 msec. between each \\\nresponse and the following stimulus. Participants decided, as quickly as \\\npossible, which of the two pairs presented at the bottom of the screen was \\\namong the pairs at the top of the screen (see Figure 1). Participants \\\ncompleted 12 trials of this task. The dependent variable was median response \\\ntime of correct trials. Because this task requires speeded comparisons \\\nsimilar to standard laboratory tests, we reasoned it would be a viable \\\nindicator of perceptual speed. SOURCE: Sliwinski, Martin J., Jacqueline A. \\\nMogle, Jinshil Hyun, Elizabeth Munoz, Joshua M. Smyth, and Richard B. Lipton. \\\n\"Reliability and validity of ambulatory cognitive assessments.\" Assessment \\\n25, no. 1 (2018): 14-30.',\n      // cSpell:enable\n      showFps: defaultParameters.show_fps.default,\n      width: 400,\n      height: 800,\n      trialSchema: symbolSearchTrialSchema,\n      scoringSchema: symbolSearchScoringSchema,\n      parameters: defaultParameters,\n      fonts: [\n        {\n          fontName: \"roboto\",\n          url: \"fonts/roboto/Roboto-Regular.ttf\",\n        },\n        {\n          fontName: \"noto-sans-japanese\",\n          url: \"fonts/noto-sans-japanese/NotoSansJP-Regular.ttf\",\n          lazy: true,\n        },\n      ],\n      bodyBackgroundColor: WebColors.White,\n      images: [\n        {\n          imageName: \"gameImage\",\n          height: 340,\n          width: 255,\n          url: \"images/gameImage.png\",\n          localize: true,\n        },\n        {\n          imageName: \"gameImageOutlinedCards\",\n          height: 340,\n          width: 255,\n          url: \"images/gameImageOutlinedCards.png\",\n          localize: true,\n        },\n        {\n          imageName: \"stopwatchImage\",\n          height: 319,\n          width: 256,\n          // license is public domain\n          // https://commons.wikimedia.org/wiki/File:Dtjohnnymonkey-Stopwatch-no-shading.svg\n          url: \"images/stopwatch.svg\",\n        },\n        {\n          imageName: \"ssintroImage\",\n          height: 186,\n          width: 336,\n          url: \"images/ssintroImage.png\",\n        },\n        // NOTE: names of symbols must be in form of ss-01, starting\n        // at ss-01, not ss-00.\n        {\n          imageName: \"ss-01\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-01.svg\",\n        },\n        {\n          imageName: \"ss-02\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-02.svg\",\n        },\n        {\n          imageName: \"ss-03\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-03.svg\",\n        },\n        {\n          imageName: \"ss-04\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-04.svg\",\n        },\n        {\n          imageName: \"ss-05\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-05.svg\",\n        },\n        {\n          imageName: \"ss-06\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-06.svg\",\n        },\n        {\n          imageName: \"ss-07\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-07.svg\",\n        },\n        {\n          imageName: \"ss-08\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-08.svg\",\n        },\n        {\n          imageName: \"ss-09\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-09.svg\",\n        },\n        {\n          imageName: \"ss-10\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-10.svg\",\n        },\n        {\n          imageName: \"ss-11\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-11.svg\",\n        },\n        {\n          imageName: \"ss-12\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-12.svg\",\n        },\n        {\n          imageName: \"ss-13\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-13.svg\",\n        },\n        {\n          imageName: \"ss-14\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-14.svg\",\n        },\n        {\n          imageName: \"ss-15\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-15.svg\",\n        },\n        {\n          imageName: \"ss-16\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-16.svg\",\n        },\n        {\n          imageName: \"ss-17\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-17.svg\",\n        },\n        {\n          imageName: \"ss-18\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-18.svg\",\n        },\n        {\n          imageName: \"ss-19\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-19.svg\",\n        },\n        {\n          imageName: \"ss-20\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-20.svg\",\n        },\n        {\n          imageName: \"ss-21\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-21.svg\",\n        },\n        {\n          imageName: \"ss-22\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-22.svg\",\n        },\n        {\n          imageName: \"ss-23\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-23.svg\",\n        },\n        {\n          imageName: \"ss-24\",\n          height: symbol_image_size,\n          width: symbol_image_size,\n          url: \"images/ss-24.svg\",\n        },\n        {\n          imageName: \"circle-x\",\n          height: 32,\n          width: 32,\n          // the svg is from evericons and is licensed under CC0 1.0\n          // Universal (Public Domain). see https://www.patreon.com/evericons\n          url: \"images/circle-x.svg\",\n        },\n      ],\n    };\n\n    super(options);\n  }\n\n  override async initialize() {\n    await super.initialize();\n    // just for convenience, alias the variable game to \"this\"\n    // (even though eslint doesn't like it)\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const game = this;\n\n    // these are defined in game options images\n    const NUMBER_OF_SYMBOLS = 24;\n\n    // ==============================================================\n\n    if (game.getParameter<boolean>(\"show_quit_button\")) {\n      const quitSprite = new Sprite({\n        imageName: \"circle-x\",\n        position: { x: 380, y: 20 },\n        isUserInteractionEnabled: true,\n      });\n      game.addFreeNode(quitSprite);\n      quitSprite.onTapDown((e) => {\n        game.removeAllFreeNodes();\n        e.handled = true;\n        const blankScene = new Scene();\n        game.addScene(blankScene);\n        game.presentScene(blankScene);\n        game.addTrialData(\"quit_button_pressed\", true);\n        game.trialComplete();\n        if (game.getParameter<boolean>(\"scoring\")) {\n          // Score the data only if user does not quit. If user quits, pass\n          // empty data to calculateScores so a \"blank\" set of scores is\n          // generated.\n          const scores = game.calculateScores([], {\n            rtLowerBound: game.getParameter<Array<number>>(\n              \"scoring_filter_response_time_duration_ms\",\n            )[0],\n            rtUpperBound: game.getParameter<Array<number>>(\n              \"scoring_filter_response_time_duration_ms\",\n            )[1],\n            numberOfTrials: game.getParameter<number>(\"number_of_trials\"),\n          });\n          game.addScoringData(scores);\n          game.scoringComplete();\n        }\n        game.cancel();\n      });\n    }\n\n    let localePicker: LocalePicker;\n    if (game.getParameter<boolean>(\"show_locale_picker\")) {\n      localePicker = new LocalePicker();\n      game.addFreeNode(localePicker);\n    }\n\n    // ==================================================\n    // SCENES: instructions\n\n    let instructionsScenes: Array<Scene>;\n\n    const customInstructions = game.getParameter<InstructionsOptions | null>(\n      \"instructions\",\n    );\n    if (customInstructions) {\n      instructionsScenes = Instructions.create(customInstructions);\n    } else {\n      /**\n       * sharedInstructionsOptions are what is the the same for short\n       * and long instructions\n       */\n      const sharedInstructionsOptions = {\n        backgroundColor: WebColors.White,\n        nextButtonBackgroundColor: WebColors.Black,\n        backButtonBackgroundColor: WebColors.Black,\n        nextSceneTransition: Transition.slide({\n          direction: TransitionDirection.Left,\n          duration: 500,\n          easing: Easings.sinusoidalInOut,\n        }),\n        backSceneTransition: Transition.slide({\n          direction: TransitionDirection.Right,\n          duration: 500,\n          easing: Easings.sinusoidalInOut,\n        }),\n      };\n\n      switch (game.getParameter(\"instruction_type\")) {\n        case \"short\": {\n          instructionsScenes = Instructions.create({\n            ...sharedInstructionsOptions,\n            instructionScenes: [\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"SHORT_INSTRUCTIONS_TEXT_PAGE_1\",\n                imageName: \"ssintroImage\",\n                imageAboveText: false,\n                imageMarginTop: 12,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.25,\n                nextButtonText: \"START_BUTTON_TEXT\",\n                nextButtonBackgroundColor: WebColors.Green,\n              },\n            ],\n          });\n          break;\n        }\n        case \"long\": {\n          instructionsScenes = Instructions.create({\n            ...sharedInstructionsOptions,\n            instructionScenes: [\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_1\",\n                imageName: \"gameImage\",\n                imageAboveText: false,\n                imageMarginTop: 12,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.25,\n                nextButtonText: \"NEXT_BUTTON_TEXT\",\n              },\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_2\",\n                imageName: \"gameImageOutlinedCards\",\n                imageAboveText: false,\n                imageMarginTop: 12,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.25,\n                nextButtonText: \"NEXT_BUTTON_TEXT\",\n                backButtonText: \"BACK_BUTTON_TEXT\",\n              },\n              {\n                title: \"INSTRUCTIONS_TITLE\",\n                text: \"INSTRUCTIONS_TEXT_PAGE_3\",\n                imageName: \"stopwatchImage\",\n                imageAboveText: false,\n                imageMarginTop: 48,\n                textFontSize: 24,\n                titleFontSize: 30,\n                textVerticalBias: 0.25,\n                nextButtonText: \"START_BUTTON_TEXT\",\n                nextButtonBackgroundColor: WebColors.Green,\n                backButtonText: \"BACK_BUTTON_TEXT\",\n              },\n            ],\n          });\n          break;\n        }\n        default: {\n          throw new M2Error(\n            `invalid value for instruction_type: ${game.getParameter(\n              \"instruction_type\",\n            )}`,\n          );\n        }\n      }\n    }\n    instructionsScenes[0].onAppear(() => {\n      // in case user quits before starting a trial, record the\n      // timestamp\n      game.addTrialData(\n        \"activity_begin_iso8601_timestamp\",\n        this.beginIso8601Timestamp,\n      );\n    });\n    game.addScenes(instructionsScenes);\n\n    const afterTrialSceneTransition = Transition.slide({\n      direction: TransitionDirection.Left,\n      duration: game.getParameter(\"interstimulus_interval_duration_ms\"),\n      easing: Easings.sinusoidalInOut,\n    });\n\n    // ==================================================\n    // SCENE: countdownScene\n\n    const countdownScene = new CountdownScene({\n      milliseconds: game.getParameter<number>(\"countdown_duration_ms\"),\n      text: \"GET_READY_COUNTDOWN_TEXT\",\n      transitionDurationMilliseconds: game.getParameter(\n        \"after_countdown_transition_duration_ms\",\n      ),\n    });\n    game.addScene(countdownScene);\n    countdownScene.onSetup(() => {\n      /**\n       * Check if localPicker is not null; if show_locale_picker is false,\n       * then localPicker would be null.\n       */\n      if (localePicker) {\n        localePicker.hidden = true;\n      }\n    });\n\n    // ==================================================\n    // SCENE: chooseCardScene\n\n    const chooseCardScene = new Scene({\n      name: \"chooseCardScene\",\n      backgroundColor: [169, 201, 219, 1],\n    });\n    game.addScene(chooseCardScene);\n\n    const bottomBackground = new Shape({\n      rect: { size: { width: 400, height: 400 } },\n      fillColor: [166, 177, 181, 1],\n      position: { x: 200, y: 600 },\n    });\n    chooseCardScene.addChild(bottomBackground);\n\n    const questionLabel = new Label({\n      text: \"WHICH_MATCHES_TEXT\",\n      fontSize: 22,\n      preferredMaxLayoutWidth: 240,\n    });\n    chooseCardScene.addChild(questionLabel);\n    questionLabel.position = { x: 200, y: 460 };\n\n    const orLabel = new Label({\n      text: \"OR_TEXT\",\n      fontSize: 22,\n      preferredMaxLayoutWidth: 240,\n    });\n    chooseCardScene.addChild(orLabel);\n    orLabel.position = { x: 200, y: 580 };\n\n    interface SymbolCard {\n      top: number;\n      bottom: number;\n    }\n\n    interface bottomCardUserData {\n      index: number;\n    }\n\n    /**\n     * note: these are in snake_case because we will directly serialize\n     * these into the trial data\n     */\n    interface TrialConfiguration {\n      top_cards_symbols: Array<SymbolCard>;\n      bottom_cards_symbols: Array<SymbolCard>;\n      trial_type: \"normal\" | \"lure\";\n      correct_response_index: number;\n    }\n\n    const trialConfigurations: Array<TrialConfiguration> = [];\n\n    const numberOfTrials = game.getParameter<number>(\"number_of_trials\");\n    const lurePercent = game.getParameter<number>(\"lure_percent\");\n    const leftCorrectPercent = game.getParameter<number>(\n      \"left_correct_percent\",\n    );\n    const numberOfTopCards = game.getParameter<number>(\"number_of_top_pairs\");\n    // TODO: allow number of bottom cards to be configurable\n    // const numberOfBottomCards = 2;\n    const numberOfLureTrials = Math.round(numberOfTrials * lurePercent);\n    const numberOfLeftCorrectTrials = Math.round(\n      numberOfTrials * leftCorrectPercent,\n    );\n    const lureTrialIndexes = RandomDraws.FromRangeWithoutReplacement(\n      numberOfLureTrials,\n      0,\n      numberOfTrials - 1,\n    );\n    const leftCorrectTrialIndexes = RandomDraws.FromRangeWithoutReplacement(\n      numberOfLeftCorrectTrials,\n      0,\n      numberOfTrials - 1,\n    );\n    /**\n     * For each lure trial, we need to know if the lure symbol should occupy\n     * the top or bottom position on the card. We will pop from this array as\n     * we create lure trials. top = position 0, bottom = position 1\n     */\n    let lurePositions: Array<number>;\n    switch (game.getParameter<string>(\"lure_position_on_card\")) {\n      case \"top\": {\n        lurePositions = Array(numberOfLureTrials).fill(0);\n        break;\n      }\n      case \"bottom\": {\n        lurePositions = Array(numberOfLureTrials).fill(1);\n        break;\n      }\n      case \"either\": {\n        const numberOfTopLurePositions = Math.round(numberOfLureTrials / 2);\n        lurePositions = [\n          ...Array(numberOfTopLurePositions).fill(0),\n          ...Array(numberOfLureTrials - numberOfTopLurePositions).fill(1),\n        ];\n        lurePositions = this.shuffleArray(lurePositions);\n        break;\n      }\n      default: {\n        throw new M2Error(\n          `invalid value for lure_position_on_card: ${game.getParameter(\n            \"lure_position_on_card\",\n          )}`,\n        );\n      }\n    }\n\n    for (let i = 0; i < numberOfTrials; i++) {\n      const isLure = lureTrialIndexes.includes(i);\n      const isLeftCorrect = leftCorrectTrialIndexes.includes(i);\n      let symbols: Array<number>;\n      if (isLure) {\n        /**\n         * 2 unique random symbols for each top card, plus 1 for the incorrect\n         * bottom card because in a lure, the incorrect card will repeat 1 of\n         * the top symbols. Thus we need just one extra symbol for the bottom\n         * card\n         */\n        symbols = RandomDraws.FromRangeWithoutReplacement(\n          numberOfTopCards * 2 + 1,\n          1,\n          NUMBER_OF_SYMBOLS,\n        );\n      } else {\n        /**\n         * 2 unique random symbols for each top card, plus 2 for the incorrect\n         * bottom card\n         */\n        symbols = RandomDraws.FromRangeWithoutReplacement(\n          numberOfTopCards * 2 + 2,\n          1,\n          NUMBER_OF_SYMBOLS,\n        );\n      }\n\n      const topCards = new Array<SymbolCard>();\n\n      for (let j = 0; j < numberOfTopCards; j++) {\n        const card: SymbolCard = {\n          top: symbols[2 * j],\n          bottom: symbols[2 * j + 1],\n        };\n        topCards.push(card);\n      }\n\n      const correctCardIndex = RandomDraws.FromRangeWithoutReplacement(\n        1,\n        0,\n        numberOfTopCards - 1,\n      )[0];\n      const correctCard = topCards[correctCardIndex];\n\n      let incorrectCard: SymbolCard;\n      if (!isLure) {\n        incorrectCard = {\n          top: symbols[2 * numberOfTopCards],\n          bottom: symbols[2 * numberOfTopCards + 1],\n        };\n      } else {\n        /**\n         * the bottom card lure symbol cannot be part of the correct card\n         */\n        const potentialLureSymbols = topCards\n          .filter((c) => c != correctCard)\n          .map((c) => [c.top, c.bottom])\n          .flat();\n        const lureSymbolIndex = RandomDraws.FromRangeWithoutReplacement(\n          1,\n          0,\n          potentialLureSymbols.length - 1,\n        )[0];\n        const lureSymbol = potentialLureSymbols[lureSymbolIndex];\n\n        const lurePosition = lurePositions.shift();\n        if (lurePosition === undefined) {\n          throw new M2Error(\"lurePositions is empty\");\n        }\n        // top = position 0, bottom = position 1\n        if (lurePosition === 0) {\n          incorrectCard = {\n            top: lureSymbol,\n            bottom: symbols[2 * numberOfTopCards],\n          };\n        } else {\n          incorrectCard = {\n            top: symbols[2 * numberOfTopCards],\n            bottom: lureSymbol,\n          };\n        }\n      }\n\n      const trial: TrialConfiguration = {\n        top_cards_symbols: topCards,\n        bottom_cards_symbols: isLeftCorrect\n          ? [correctCard, incorrectCard]\n          : [incorrectCard, correctCard],\n        trial_type: isLure ? \"lure\" : \"normal\",\n        correct_response_index: isLeftCorrect ? 0 : 1,\n      };\n      trialConfigurations.push(trial);\n    }\n\n    chooseCardScene.onSetup(() => {\n      orLabel.hidden = false;\n\n      const trialConfiguration = trialConfigurations[game.trialIndex];\n      const topCardsLength = trialConfiguration.top_cards_symbols.length;\n      const bottomCardsLength = trialConfiguration.bottom_cards_symbols.length;\n\n      let topInterCardMargin: number;\n      switch (topCardsLength) {\n        case 2:\n        case 4: {\n          topInterCardMargin = 200;\n          break;\n        }\n        case 3: {\n          topInterCardMargin = 100;\n          break;\n        }\n        default: {\n          throw new M2Error(\n            \"valid values for number_of_top_pairs are 2, 3, or 4 cards\",\n          );\n        }\n      }\n\n      let topCardGrid: Grid;\n\n      if (topCardsLength >= 1 && topCardsLength <= 3) {\n        topCardGrid = new Grid({\n          rows: 1,\n          columns: topCardsLength,\n          size: {\n            width: 80 * topCardsLength + topInterCardMargin,\n            height: 160,\n          },\n          position: { x: 200, y: 200 },\n          backgroundColor: WebColors.Transparent,\n          gridLineColor: WebColors.Transparent,\n        });\n      } else if (topCardsLength === 4) {\n        topCardGrid = new Grid({\n          rows: 2,\n          columns: 2,\n          size: {\n            width: 80 * 2 + topInterCardMargin,\n            height: 200 + topInterCardMargin,\n          },\n          position: { x: 200, y: 200 },\n          backgroundColor: WebColors.Transparent,\n          gridLineColor: WebColors.Transparent,\n        });\n      } else {\n        throw new M2Error(\"invalid number_of_top_pairs\");\n      }\n      chooseCardScene.addChild(topCardGrid);\n\n      const bottomCardGrid = new Grid({\n        rows: 1,\n        columns: 2,\n        size: { width: 80 * 2 + 200, height: 160 },\n        position: { x: 200, y: 600 },\n        backgroundColor: WebColors.Transparent,\n        gridLineColor: WebColors.Transparent,\n      });\n      chooseCardScene.addChild(bottomCardGrid);\n\n      function createCardShape(\n        topSymbolImageNumber: number,\n        bottomSymbolImageNumber: number,\n      ): Shape {\n        const card = new Shape({\n          rect: { size: { width: 80, height: 160 } },\n          fillColor: WebColors.White,\n          strokeColor: WebColors.Black,\n          lineWidth: 2,\n        });\n\n        const topSymbol = new Sprite({\n          imageName: \"ss-\" + topSymbolImageNumber.toString().padStart(2, \"0\"),\n          position: { x: 0, y: -36 },\n        });\n        card.addChild(topSymbol);\n        const bottomSymbol = new Sprite({\n          imageName:\n            \"ss-\" + bottomSymbolImageNumber.toString().padStart(2, \"0\"),\n          position: { x: 0, y: 36 },\n        });\n        card.addChild(bottomSymbol);\n        return card;\n      }\n\n      const topCards = new Array<Shape>();\n      for (let i = 0; i < topCardsLength; i++) {\n        const card = createCardShape(\n          trialConfiguration.top_cards_symbols[i].top,\n          trialConfiguration.top_cards_symbols[i].bottom,\n        );\n        topCards.push(card);\n        if (topCardsLength === 4) {\n          topCardGrid.addAtCell(card, Math.floor(i / 2), i % 2);\n        } else {\n          topCardGrid.addAtCell(card, 0, i);\n        }\n      }\n\n      const bottomCards = new Array<Shape>();\n      for (let i = 0; i < bottomCardsLength; i++) {\n        const card = createCardShape(\n          trialConfiguration.bottom_cards_symbols[i].top,\n          trialConfiguration.bottom_cards_symbols[i].bottom,\n        );\n\n        (card.userData as bottomCardUserData) = {\n          index: i,\n        };\n        bottomCards.push(card);\n        bottomCardGrid.addAtCell(card, 0, i);\n      }\n\n      function setBottomCardsTappability(tappable: boolean): void {\n        if (tappable) {\n          bottomCards.forEach((card) => (card.isUserInteractionEnabled = true));\n        } else {\n          bottomCards.forEach(\n            (card) => (card.isUserInteractionEnabled = false),\n          );\n        }\n      }\n\n      bottomCards.forEach((card) =>\n        card.onTapDown(() => handleCardChoice(card)),\n      );\n\n      function handleCardChoice(card: Shape): void {\n        bottomCardGrid.hidden = true;\n        topCardGrid.hidden = true;\n        orLabel.hidden = true;\n\n        Timer.stop(\"rt\");\n        setBottomCardsTappability(false);\n        const response_time = Timer.elapsed(\"rt\");\n        Timer.remove(\"rt\");\n\n        game.addTrialData(\n          \"trial_end_iso8601_timestamp\",\n          new Date().toISOString(),\n        );\n        game.addTrialData(\"trial_type\", trialConfiguration.trial_type);\n        game.addTrialData(\"response_time_duration_ms\", response_time);\n        game.addTrialData(\n          \"correct_response_index\",\n          trialConfiguration.correct_response_index,\n        );\n        game.addTrialData(\n          \"user_response_index\",\n          (card.userData as bottomCardUserData).index,\n        );\n\n        // correct_response_index and trial_type are nested in the\n        // trialConfiguration, but we will expose these in a\n        // different property. So, use the rest operator to remove\n        // them from the trialConfiguration.\n        const {\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          correct_response_index,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          trial_type,\n          ...remaining_trial_configuration\n        } = trialConfiguration;\n        game.addTrialData(\"card_configuration\", remaining_trial_configuration);\n        game.addTrialData(\"quit_button_pressed\", false);\n        game.addTrialData(\"trial_index\", game.trialIndex);\n        game.trialComplete();\n        if (game.trialIndex < game.getParameter<number>(\"number_of_trials\")) {\n          orLabel.hidden = true;\n          if (game.getParameter(\"interstimulus_animation\")) {\n            game.presentScene(chooseCardScene, afterTrialSceneTransition);\n          } else {\n            chooseCardScene.run(\n              Action.sequence([\n                Action.wait({\n                  duration: game.getParameter(\"interstimulus_interval_ms\"),\n                }),\n                Action.custom({\n                  callback: () => {\n                    game.presentScene(chooseCardScene);\n                  },\n                }),\n              ]),\n            );\n          }\n        } else {\n          if (game.getParameter<boolean>(\"scoring\")) {\n            const scores = game.calculateScores(game.data.trials, {\n              rtLowerBound: game.getParameter<Array<number>>(\n                \"scoring_filter_response_time_duration_ms\",\n              )[0],\n              rtUpperBound: game.getParameter<Array<number>>(\n                \"scoring_filter_response_time_duration_ms\",\n              )[1],\n              numberOfTrials: game.getParameter<number>(\"number_of_trials\"),\n            });\n            game.addScoringData(scores);\n            game.scoringComplete();\n          }\n\n          questionLabel.hidden = false;\n          game.removeFreeNode(\"questionLabelFree\");\n          if (game.getParameter(\"show_trials_complete_scene\")) {\n            game.presentScene(doneScene, afterTrialSceneTransition);\n          } else {\n            game.end();\n          }\n        }\n      }\n\n      chooseCardScene.onAppear(\n        () => {\n          game.addTrialData(\n            \"activity_begin_iso8601_timestamp\",\n            this.beginIso8601Timestamp,\n          );\n          game.addTrialData(\n            \"trial_begin_iso8601_timestamp\",\n            new Date().toISOString(),\n          );\n          /** Add the question label free node, only if not added yet */\n          if (!game.nodes.map((e) => e.name).includes(\"questionLabelFree\")) {\n            questionLabel.hidden = true;\n\n            const questionLabelFree = new Label({\n              name: \"questionLabelFree\",\n              text: \"WHICH_MATCHES_TEXT\",\n              fontSize: 22,\n              preferredMaxLayoutWidth: 240,\n            });\n            game.addFreeNode(questionLabelFree);\n            questionLabelFree.position = { x: 200, y: 460 };\n          }\n\n          setBottomCardsTappability(true);\n          Timer.startNew(\"rt\");\n          /**\n           * The onAppear() callback references objects within the onSetup()\n           * scope, thus we must place it here. That means we create a new\n           * onAppear() callback each time onSetup() is called. Therefore, we\n           * replace the existing onAppear() callback.\n           */\n        },\n        { replaceExisting: true },\n      );\n    });\n\n    // ==================================================\n    // SCENE: done. Show done message, with a button to exit.\n    const doneScene = new Scene();\n    game.addScene(doneScene);\n\n    const doneSceneText = new Label({\n      text: \"TRIALS_COMPLETE_SCENE_TEXT\",\n      position: { x: 200, y: 400 },\n    });\n    doneScene.addChild(doneSceneText);\n\n    const okButton = new Button({\n      text: \"TRIALS_COMPLETE_SCENE_BUTTON_TEXT\",\n      position: { x: 200, y: 600 },\n      backgroundColor: WebColors.Black,\n    });\n    okButton.isUserInteractionEnabled = true;\n    okButton.onTapDown(() => {\n      // don't allow repeat taps of ok button\n      okButton.isUserInteractionEnabled = false;\n      doneScene.removeAllChildren();\n      game.end();\n    });\n    doneScene.addChild(okButton);\n    doneScene.onSetup(() => {\n      // no need to have cancel button, because we're done\n      game.removeAllFreeNodes();\n    });\n  }\n\n  calculateScores(\n    data: ActivityKeyValueData[],\n    extras: {\n      rtLowerBound: number;\n      rtUpperBound: number;\n      numberOfTrials: number;\n    },\n  ) {\n    const dc = new DataCalc(data);\n    const scores = dc.summarize({\n      activity_begin_iso8601_timestamp: this.beginIso8601Timestamp,\n      first_trial_begin_iso8601_timestamp: dc\n        .arrange(\"trial_begin_iso8601_timestamp\")\n        .slice(0)\n        .pull(\"trial_begin_iso8601_timestamp\"),\n      last_trial_end_iso8601_timestamp: dc\n        .arrange(\"-trial_end_iso8601_timestamp\")\n        .slice(0)\n        .pull(\"trial_end_iso8601_timestamp\"),\n      n_trials: dc.length,\n      flag_trials_match_expected: dc.length === extras.numberOfTrials ? 1 : 0,\n      n_trials_lure: dc.filter((obs) => obs.trial_type === \"lure\").length,\n      n_trials_normal: dc.filter((obs) => obs.trial_type === \"normal\").length,\n      n_trials_correct: dc.filter(\n        (obs) => obs.user_response_index === obs.correct_response_index,\n      ).length,\n      n_trials_incorrect: dc.filter(\n        (obs) => obs.user_response_index !== obs.correct_response_index,\n      ).length,\n      median_response_time_overall: median(\"response_time_duration_ms\"),\n      median_response_time_filtered: median(\n        dc\n          .filter(\n            (obs) =>\n              obs.response_time_duration_ms >= extras.rtLowerBound &&\n              obs.response_time_duration_ms <= extras.rtUpperBound,\n          )\n          .pull(\"response_time_duration_ms\"),\n      ),\n      median_response_time_correct: median(\n        dc\n          .filter(\n            (obs) => obs.user_response_index === obs.correct_response_index,\n          )\n          .pull(\"response_time_duration_ms\"),\n      ),\n      median_response_time_incorrect: median(\n        dc\n          .filter(\n            (obs) => obs.user_response_index !== obs.correct_response_index,\n          )\n          .pull(\"response_time_duration_ms\"),\n      ),\n      response_time_filter_lower_bound: extras.rtLowerBound,\n      response_time_filter_upper_bound: extras.rtUpperBound,\n    });\n    return scores.observations;\n  }\n\n  /**\n   * Returns a new array with the items in random order.\n   *\n   * @param array - The array to shuffle\n   * @returns A new array with the items in random order\n   */\n  private shuffleArray<T>(array: T[]) {\n    // Create a copy of the original array to avoid mutating it\n    const copy = [...array];\n    const shuffled = [];\n    while (copy.length > 0) {\n      // Generate a random index between 0 and the length of the copy array\n      const index = Math.floor(Math.random() * copy.length);\n      // Remove the item at the random index from the copy array and push it to the shuffled array\n      shuffled.push(copy.splice(index, 1)[0]);\n    }\n    return shuffled;\n  }\n}\n\nexport { SymbolSearch };\n"],"names":["M2Error"],"mappings":"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"}